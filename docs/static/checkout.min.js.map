{"version":3,"file":"checkout.min.js","sources":["checkout.js"],"sourcesContent":["(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.$checkout = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\nvar Component = require('./core/component');\n\nvar Api = require('./core/api');\nvar Connector = require('./core/connector');\nvar Response = require('./core/response');\nvar PaymentButton = require('./core/payment/button');\nvar PaymentContainer = require('./core/payment/container');\nvar FormWidget = require('./core/widget/form');\nvar ButtonWidget = require('./core/widget/button');\n\nComponent.add('Api', Api);\nComponent.add('Connector', Connector);\nComponent.add('PaymentContainer', PaymentContainer);\nComponent.add('PaymentButton', PaymentButton);\nComponent.add('FormWidget', FormWidget);\nComponent.add('ButtonWidget', ButtonWidget);\nComponent.add('Response', Response);\n\nmodule.exports = Component;\nmodule.exports['Api'] = Api;\nmodule.exports['Connector'] = Connector;\nmodule.exports['PaymentContainer'] = PaymentContainer;\nmodule.exports['PaymentButton'] = PaymentButton;\nmodule.exports['FormWidget'] = FormWidget;\nmodule.exports['ButtonWidget'] = ButtonWidget;\nmodule.exports['Response'] = Response;\n\n\n},{\"./core/api\":2,\"./core/component\":4,\"./core/connector\":6,\"./core/payment/button\":13,\"./core/payment/container\":14,\"./core/response\":16,\"./core/widget/button\":19,\"./core/widget/form\":20}],2:[function(require,module,exports){\nvar Config    = require('./config');\nvar Deferred  = require('./deferred');\nvar Module    = require('./module');\nvar Connector = require('./connector');\nvar Modal     = require('./modal');\nvar Response  = require('./response');\n\n/**\n * @type {ClassObject}\n * @extends {Module}\n */\nvar Api = Module.extend({\n    'defaults': {\n        'origin': 'https://api.fondy.eu',\n        'endpoint': {\n            'gateway': '/checkout/v2/index.html'\n        },\n        'messages':{\n            'modalHeader':'Now you will be redirected to your bank 3DSecure. If you are not redirected please refer',\n            'modalLinkLabel':'link'\n        }\n    },\n    'init': function (params) {\n        this.initParams(params);\n    },\n    'url': function (type, url) {\n        return [this.params.origin, this.params.endpoint[type] || '/', url || ''].join('');\n    },\n    'extendParams': function(params){\n        this.utils.extend(this.params, params);\n        return this;\n    },\n    'initParams': function (params) {\n        this.params = this.utils.extend({},this.defaults);\n        this.extendParams(params);\n        this.setOrigin(this.params.origin);\n        this.loaded = false;\n        this.created = false;\n    },\n    'setOrigin': function (origin) {\n        if (this.utils.isString(origin)) {\n            this.params.origin = origin;\n        }\n        return this;\n    },\n    'scope': function (callback) {\n        callback = this.proxy(callback);\n        if (this._createFrame().loaded === true) {\n            callback();\n        } else {\n            this.on('checkout.api', callback);\n        }\n    },\n    'request': function (model, method, params) {\n        var defer = Deferred();\n        var data = {\n            uid: this.connector.getUID(),\n            action: model,\n            method: method,\n            params: params || {}\n        };\n        this.connector.send('request', data);\n        this.connector.on(data.uid, this.proxy(function (ev, response, model, action) {\n            model = new Response(response);\n            model.setUID(data.uid);\n            model.setConnector(this.connector);\n            action = 'resolveWith';\n            if (model.attr('submit3ds')) {\n                action = 'notifyWith';\n            }\n            if (model.attr('error')) {\n                action = 'rejectWith';\n            }\n            defer[action](this, [model]);\n        }));\n        return defer;\n    },\n    '_loadFrame': function (url) {\n        this.iframe = this.utils.createElement('iframe');\n        this.addAttr(this.iframe, {'allowtransparency': true, 'frameborder': 0, 'scrolling': 'no'});\n        this.addAttr(this.iframe, {'src': url});\n        this.addCss(this.iframe,Config.ApiFrameCss);\n        this.body = this.utils.querySelector('body');\n        if (this.body.firstChild) {\n            this.body.insertBefore(this.iframe, this.body.firstChild);\n        } else {\n            this.body.appendChild(this.iframe);\n        }\n        return this.iframe;\n    },\n    '_createFrame': function () {\n        if (this.created === false) {\n            this.created = true;\n            this.iframe = this._loadFrame(this.url('gateway'));\n            this.connector = new Connector({target: this.iframe.contentWindow});\n            this.connector.on('load', this.proxy('_onLoadConnector'));\n            this.connector.on('modal', this.proxy('_onOpenModal'));\n        }\n        return this;\n    },\n    '_onOpenModal': function (xhr, model) {\n        this.modal = new Modal({\n            checkout: this,\n            model: model\n        });\n        this.modal.on('close', this.proxy('_onCloseModal'));\n    },\n    '_onCloseModal': function (modal, data) {\n        this.trigger('modal.close', modal, data);\n    },\n    '_onLoadConnector': function () {\n        this.loaded = true;\n        this.connector.off('load');\n        this.trigger('checkout.api');\n        this.off('checkout.api');\n    }\n});\n\nmodule.exports = Api;\n\n},{\"./config\":5,\"./connector\":6,\"./deferred\":7,\"./modal\":10,\"./module\":12,\"./response\":16}],3:[function(require,module,exports){\nvar init = false;\nvar fnTest = /xyz/.test(function () {\n    return 'xyz';\n}.toString()) ? /\\b_super\\b/ : /.*/;\n/**\n * @type {ClassObject}\n */\nfunction ClassObject() {\n\n}\n\nClassObject.prototype._super = function(){\n\n}\n\nClassObject.prototype.instance = function(params){\n    return new this.constructor(params);\n}\n\nClassObject.prototype.proxy = function(fn){\n    fn = typeof (fn) == 'string' ? this[fn] : fn;\n    return (function (cx, cb) {\n        return function () {\n            return cb.apply(cx, [this].concat(Array.prototype.slice.call(arguments)))\n        };\n    })(this, fn);\n}\n\nfunction superMethod(parent,name,method){\n    return function () {\n        var temp = this._super, result;\n        this._super = parent[name];\n        result = method.apply(this,arguments);\n        this._super = temp;\n        return result;\n    };\n}\n\nfunction assign(target,instance){\n    var prop,proto,parent = target.prototype;\n    init = true;\n    proto = new target();\n    init = false;\n    for (prop in instance) {\n        if (instance.hasOwnProperty(prop)) {\n            if (typeof (parent[prop]) == 'function' &&\n                typeof (instance[prop]) == 'function' &&\n                fnTest.test(instance[prop])\n            ) {\n                proto[prop] = superMethod(parent,prop,instance[prop]);\n            } else {\n                proto[prop] = instance[prop];\n            }\n        }\n    }\n    return proto;\n}\n\nClassObject.extend = function extend(instance){\n    function Class(){\n        if (!init && this['init']) this['init'].apply(this, arguments);\n    }\n    Class.prototype = assign(this,instance);\n    Class.prototype.constructor = Class;\n    Class.extend = extend;\n    return Class;\n}\n\nmodule.exports = ClassObject;\n\n},{}],4:[function(require,module,exports){\nvar modules = {};\nvar instance = {};\n\nvar newModule = function (name, params) {\n    if (!modules[name]) {\n        throw Error(['module is undefined', name].join(' '));\n    }\n    return new modules[name](params || {});\n};\n\nvar addModule = function (name, module) {\n    if (modules[name]) {\n        throw Error(['module already added', name].join(' '));\n    }\n    modules[name] = module;\n};\n\nfunction Component(name, params){\n    if (instance[name]) return instance[name];\n    return (instance[name] = newModule(name, params));\n}\n\nComponent.get = function (name, params) {\n    return newModule(name, params);\n};\n\nComponent.add = function (name, module) {\n    addModule(name, module);\n    return this;\n};\n\n\nmodule.exports = Component;\n\n},{}],5:[function(require,module,exports){\nexports.GooglePayApi = 'https://pay.google.com/gp/p/js/pay.js';\n\nexports.GoogleBaseRequest = {\n    'apiVersion': 2,\n    'apiVersionMinor': 0,\n    'allowedPaymentMethods': [\n        {\n            'type': 'CARD',\n            'parameters': {\n                'allowedAuthMethods': [\"PAN_ONLY\", \"CRYPTOGRAM_3DS\"],\n                'allowedCardNetworks': ['AMEX', 'DISCOVER', 'INTERAC', 'JCB', 'MASTERCARD', 'VISA']\n            }\n        }\n    ]\n};\n\nexports.GooglePayLanguages = [\n    'ar',\n    'bg',\n    'ca',\n    'zh',\n    'hr',\n    'cs',\n    'da',\n    'nl',\n    'en',\n    'et',\n    'fi',\n    'fr',\n    'de',\n    'el',\n    'id',\n    'it',\n    'ja',\n    'ko',\n    'ms',\n    'no',\n    'pl',\n    'pt',\n    'ru',\n    'sr',\n    'sk',\n    'sl',\n    'es',\n    'sv',\n    'th',\n    'tr',\n    'uk'\n];\n\nexports.PaymentRequestMethods = [\n    ['google', {\n        'supportedMethods': ['https://google.com/pay'],\n        'data': exports.GoogleBaseRequest\n    }],\n    ['apple', {'supportedMethods': ['https://apple.com/apple-pay']}],\n    ['card', {'supportedMethods': ['basic-card']}]\n];\n\nexports.PaymentRequestDetails = {\n    'total': {\n        'label': 'Total',\n        'amount': {\n            'currency': 'USD',\n            'value': '0.00'\n        }\n    }\n};\n\nexports.ApiFrameCss = {\n    'width': '1px !important',\n    'height': '1px !important',\n    'left': '1px !important',\n    'bottom': '1px !important',\n    'position': 'fixed !important',\n    'border': '0px !important'\n};\n\nexports.ButtonFrameCss = {\n    'border': 'none !important',\n    'margin': '0 !important',\n    'padding': '0 !important',\n    'display': 'block !important',\n    'width': '1px !important',\n    'min-width': '100% !important',\n    'background': 'transparent !important',\n    'position': 'relative !important',\n    'opacity': '0 !important',\n    'overflow': 'hidden !important',\n    'height': '100% !important',\n    'outline': 'none !important',\n    'z-index':'1 !important'\n};\n\nexports.ButtonFrameAttrs = {\n    'tabindex':'-1',\n    'scrolling': 'no',\n    'frameborder': 0,\n    'allowtransparency': true,\n    'allowpaymentrequest': true\n};\n\nexports.ButtonCoverCss = {\n    'z-index':'2 !important',\n    'position':'absolute !important',\n    'left':'0 !important',\n    'top':'0 !important',\n    'cursor':'pointer !important',\n    'outline': 'none !important',\n    'width':'100% !important',\n    'height':'100% !important'\n};\n\nexports.ButtonCoverAttrs = {\n    'tabindex':'0',\n    'href':'javascript:void(0)'\n};\n\nexports.ButtonContainerCss = {\n    'border': '0 !important',\n    'margin': '0 !important',\n    'padding': '0 !important',\n    'display': 'block !important',\n    'background': 'transparent !important',\n    'overflow': 'hidden !important',\n    'position': 'relative !important',\n    'opacity': '1 !important',\n    'height': '0 !important',\n    'outline': 'none !important'\n};\n\n},{}],6:[function(require,module,exports){\nvar Module = require('./module');\n/**\n * @type {ClassObject}\n * @extends {Module}\n */\nvar Connector = Module.extend({\n    'ns': 'crossDomain',\n    'origin': '*',\n    'uniqueId': 1,\n    'signature': null,\n    'init': function (params) {\n        this.setTarget(params.target);\n        this.create();\n    },\n    'create': function () {\n        this.addEvent(window, 'message', 'router');\n    },\n    'setTarget': function (target) {\n        this.target = target;\n        return this;\n    },\n    'getUID': function () {\n        return ++this.uniqueId;\n    },\n    'destroy': function () {\n        this.removeEvent(window, 'message', 'router');\n        this._super();\n    },\n    'router': function (window, ev, response) {\n        if (this.target !== ev.source) return false;\n        try {\n            response = JSON.parse(ev.data);\n        } catch (e) {\n        }\n        if (response && response.action && response.data) {\n            this.trigger(response.action, response.data);\n        }\n    },\n    'send': function (action, data) {\n        if(!this.target){\n            console.log(this.target,action,data);\n            return;\n        }\n        this.target.postMessage(JSON.stringify({\n            action: action,\n            data: data\n        }), this.origin, []);\n    }\n});\n\n\nmodule.exports = Connector;\n\n},{\"./module\":12}],7:[function(require,module,exports){\nvar Utils = require('./utils');\n\nvar PENDING = 0;\nvar RESOLVED = 1;\nvar REJECTED = 2;\n\nfunction isArray(value) {\n    return Utils.isArray(value);\n}\n\nfunction isFunction(value) {\n    return Utils.isFunction(value);\n}\n\nfunction forEach(list, callback, context) {\n    var i = 0;\n    if (list) {\n        if (isArray(list)) {\n            for (; i < list.length; i++) {\n                callback.call(context, list[i]);\n            }\n        } else {\n            callback.call(context, list);\n        }\n    }\n}\n\n/**\n * @name Deferred\n * @param [fn]\n * @return {Deferred}\n */\nfunction Deferred(fn) {\n    var status = PENDING;\n    var doneFuncs = [];\n    var failFuncs = [];\n    var progressFuncs = [];\n    var resultArgs = null;\n    /**\n     * @lends Deferred.prototype\n     */\n    var promise = {\n        done: function () {\n            for (var i = 0; i < arguments.length; i++) {\n                if (!arguments[i]) {\n                    continue;\n                }\n                forEach(arguments[i], function (callback) {\n                    if (status === RESOLVED) {\n                        callback.apply(this, resultArgs);\n                    }\n                    doneFuncs.push(callback);\n                }, this);\n            }\n            return this;\n        },\n        fail: function () {\n            for (var i = 0; i < arguments.length; i++) {\n                if (!arguments[i]) {\n                    continue;\n                }\n                forEach(arguments[i], function (callback) {\n                    if (status === REJECTED) {\n                        callback.apply(this, resultArgs);\n                    }\n                    failFuncs.push(callback);\n                }, this);\n            }\n            return this;\n        },\n        always: function () {\n            return this.done.apply(this, arguments).fail.apply(this, arguments);\n        },\n        progress: function () {\n            for (var i = 0; i < arguments.length; i++) {\n                if (!arguments[i]) {\n                    continue;\n                }\n                forEach(arguments[i], function (callback) {\n                    if (status === PENDING) {\n                        progressFuncs.push(callback);\n                    }\n                }, this);\n            }\n            return this;\n        },\n        then: function () {\n            if (arguments.length > 1 && arguments[1]) {\n                this.fail(arguments[1]);\n            }\n            if (arguments.length > 0 && arguments[0]) {\n                this.done(arguments[0]);\n            }\n            if (arguments.length > 2 && arguments[2]) {\n                this.progress(arguments[2]);\n            }\n            return this;\n        },\n        promise: function (object) {\n            var prop;\n            if (object === null) {\n                return promise;\n            }\n            for (prop in promise) {\n                if (promise.hasOwnProperty(prop)) {\n                    object[prop] = promise[prop];\n                }\n            }\n            return object;\n        },\n        state: function () {\n            return status;\n        },\n        isPending: function () {\n            return status === PENDING;\n        },\n        isRejected: function () {\n            return status === REJECTED;\n        },\n        isResolved: function () {\n            return status === RESOLVED;\n        }\n    };\n    /**\n     * @lends Deferred.prototype\n     */\n    var deferred = {\n        resolveWith: function (context) {\n            if (status === PENDING) {\n                status = RESOLVED;\n                var args = resultArgs = (arguments.length > 1) ? arguments[1] : [];\n                for (var i = 0; i < doneFuncs.length; i++) {\n                    doneFuncs[i].apply(context, args);\n                }\n            }\n            return this;\n        },\n        rejectWith: function (context) {\n            if (status === PENDING) {\n                status = REJECTED;\n                var args = resultArgs = (arguments.length > 1) ? arguments[1] : [];\n                for (var i = 0; i < failFuncs.length; i++) {\n                    failFuncs[i].apply(context, args);\n                }\n            }\n            return this;\n        },\n        notifyWith: function (context) {\n            if (status === PENDING) {\n                var args = resultArgs = (arguments.length > 1) ? arguments[1] : [];\n                for (var i = 0; i < progressFuncs.length; i++) {\n                    progressFuncs[i].apply(context, args);\n                }\n            }\n            return this;\n        },\n        resetState: function(){\n            status = PENDING;\n            return this;\n        },\n        resolve: function () {\n            return this.resolveWith(this, arguments);\n        },\n        reject: function () {\n            return this.rejectWith(this, arguments);\n        },\n        notify: function () {\n            return this.notifyWith(this, arguments);\n        }\n    };\n    var obj = promise.promise(deferred);\n    if (isFunction(fn)) {\n        fn.call(obj, obj);\n    }\n    return obj;\n}\n\n\nmodule.exports = Deferred;\n\n},{\"./utils\":18}],8:[function(require,module,exports){\nvar Class = require('./class');\n/**\n * @type {ClassObject}\n * @extends {Class}\n */\nvar Event = Class.extend({\n    'init': function () {\n        this.events = {};\n        this.empty = [];\n    },\n    'on': function (type, callback) {\n        (this.events[type] = this.events[type] || []).push(callback);\n        return this;\n    },\n    'off': function (type, callback) {\n        type || (this.events = {});\n        var list = this.events[type] || this.empty,\n            i = list.length = callback ? list.length : 0;\n        while (i--) callback === list[i][0] && list.splice(i, 1);\n        return this;\n    },\n    'trigger': function (type) {\n        var e = this.events[type] || this.empty,\n            list = e.length > 0 ? e.slice(0, e.length) : e,\n            i = 0, j;\n        while ((j = list[i++])) j.apply(j, this.empty.slice.call(arguments, 1));\n        return this;\n    }\n});\n\nmodule.exports = Event;\n\n},{\"./class\":3}],9:[function(require,module,exports){\nvar Deferred = require('../deferred');\nvar Module = require('../module');\nvar config = require('../config');\n\nvar GooglePay = Module.extend({\n    'id':'google-payments-api',\n    'init': function () {\n        this.client  = null;\n        this.wrapper = this.utils.querySelector('head');\n        this.defer   = Deferred();\n    },\n    'load': function(){\n        if( this.utils.getPath('google.payments.api.PaymentsClient') ) {\n            return this.defer.resolveWith(this);\n        }\n        if( this.utils.querySelector('#'.concat(this.id)) ){\n            return this.defer;\n        }\n        this.script = this.utils.createElement('script');\n        this.addAttr(this.script,{\n            id: this.id ,\n            async:true,\n            src:config.GooglePayApi\n        });\n        this.utils.isElement(this.wrapper) && this.wrapper.appendChild(this.script);\n        this.addEvent(this.script,'load', 'onLoadSuccess');\n        this.addEvent(this.script,'error', 'onLoadError');\n        return this.defer;\n    },\n    'show': function(methods){\n        var method = methods.find(function(item){\n            return item.supportedMethods === 'https://google.com/pay';\n        });\n        var client = this.getClient();\n        return client.loadPaymentData(method.data);\n    },\n    'readyToPay': function(cx,response){\n        if (response.result) {\n            this.defer.resolveWith(this);\n        }\n    },\n    'onError': function(cx,error){\n        this.defer.rejectWith(this,error);\n    },\n    'onLoadSuccess': function(){\n        this.getClient().isReadyToPay(config.GoogleBaseRequest)\n            .then(this.proxy('readyToPay'))\n            .catch(this.proxy('onError'));\n    },\n    'onLoadError': function(){\n        this.defer.rejectWith(this);\n    },\n    'getClient': function(options){\n        if (this.client === null) {\n            var PaymentClient = this.utils.getPath('google.payments.api.PaymentsClient');\n            if( PaymentClient ) {\n                this.client = new PaymentClient(options);\n            } else {\n                this.onError(null, new Error('Google Client Error') );\n            }\n        }\n        return this.client;\n    }\n});\n\nmodule.exports = new GooglePay;\n\n},{\"../config\":5,\"../deferred\":7,\"../module\":12}],10:[function(require,module,exports){\nvar Module = require('./module');\nvar Connector = require('./connector');\nvar Template  = require('./template');\n/**\n * @type {ClassObject}\n * @extends {Module}\n */\nvar Modal = Module.extend({\n    'init': function (data) {\n        this.checkout = data.checkout;\n        this.model    = data.model || {};\n        this.messages = data.checkout.params.messages || {};\n        this.template = new Template('3ds.ejs');\n        this.body = this.utils.querySelector('body');\n        this.initModal();\n        this.initConnector();\n    },\n    'initModal': function () {\n        this.name = ['modal-iframe', this.getRandomNumber()].join('-');\n        this.modal = this.utils.createElement('div');\n        this.modal.innerHTML = this.template.render({\n            model: this.model,\n            messages: this.messages\n        });\n        this.iframe = this.find('.ipsp-modal-iframe');\n        this.addAttr(this.iframe, {name: this.name, id: this.name});\n        if (this.model['send_data']) {\n            this.form = this.prepareForm(this.model['url'], this.model['send_data'], this.name);\n            this.modal.appendChild(this.form);\n        } else {\n            this.iframe.src = this.model['url'];\n        }\n        this.addEvent(this.find('.ipsp-modal-close'), 'click', 'closeModal');\n        this.addEvent(this.find('.ipsp-modal-title a'), 'click', 'submitForm');\n        this.initScrollbar();\n        this.body.appendChild(this.modal);\n        if (this.form) {\n            this.form.submit();\n        }\n    },\n    'measureScrollbar': function () {\n        var width;\n        var scrollDiv = document.createElement('div');\n        scrollDiv.className = 'modal-scrollbar-measure';\n        this.body.appendChild(scrollDiv);\n        width = scrollDiv.offsetWidth - scrollDiv.clientWidth;\n        this.utils.removeElement(scrollDiv);\n        return width;\n    },\n    'checkScrollbar': function () {\n        var documentElementRect;\n        var fullWindowWidth = window.innerWidth;\n        if (!fullWindowWidth) {\n            documentElementRect = document.documentElement.getBoundingClientRect();\n            fullWindowWidth = documentElementRect.right - Math.abs(documentElementRect.left);\n        }\n        this.bodyIsOverflowing = document.body.clientWidth < fullWindowWidth;\n        this.scrollbarWidth = this.measureScrollbar()\n    },\n    'initScrollbar': function () {\n        this.checkScrollbar();\n        this.bodyPad = parseInt(this.utils.getStyle(this.body, 'padding-right') || 0, 10);\n        this.originalBodyPad = document.body.style.paddingRight || '';\n        this.originalOverflow = document.body.style.overflow || '';\n        if (this.bodyIsOverflowing) {\n            this.addCss(this.body, {\n                'paddingRight': [this.bodyPad + this.scrollbarWidth, 'px'].join(''),\n                'overflow': 'hidden'\n            });\n        }\n    },\n    'resetScrollbar': function () {\n        this.addCss(this.body, {\n            'paddingRight': this.originalBodyPad ? [this.originalBodyPad, 'px'].join('') : '',\n            'overflow': this.originalOverflow\n        });\n    },\n    'getRandomNumber': function () {\n        return Math.round(Math.random() * 1000000000);\n    },\n    'find': function (selector) {\n        return this.utils.querySelector(selector, this.modal);\n    },\n    'closeModal': function (el, ev) {\n        ev.preventDefault();\n        this.trigger('close', this.data);\n        this.removeModal();\n    },\n    'submitForm': function (el, ev) {\n        ev.preventDefault();\n        this.trigger('submit', this.data);\n        this.addAttr(this.form,{\n            target: '_blank'\n        });\n        this.form.submit();\n    },\n    'removeModal': function () {\n        this.destroy();\n    },\n    'destroy': function () {\n        this.utils.removeElement(this.modal);\n        this.resetScrollbar();\n        this.connector.destroy();\n        this._super();\n    },\n    'initConnector': function () {\n        this.connector = new Connector({target: this.iframe.contentWindow});\n        this.connector.on('response', this.proxy('onResponse'));\n    },\n    'onResponse': function (ev, data) {\n        this.sendResponse(data);\n        this.removeModal();\n    },\n    'sendResponse': function (data) {\n        this.checkout.connector.send('request', {\n            uid: data.uid,\n            action: 'api.checkout.proxy',\n            method: 'send',\n            params: data\n        });\n    }\n});\n\nmodule.exports = Modal;\n\n},{\"./connector\":6,\"./module\":12,\"./template\":17}],11:[function(require,module,exports){\nvar Module = require('./module');\n/**\n * @type {ClassObject}\n * @extends {Module}\n */\nvar Model = Module.extend({\n    'init': function (data) {\n        this.data = data || {};\n        this.create();\n    },\n    'create': function () {\n\n    },\n    'eachProps': function(args){\n        var name = args[1] ? args[0] : null;\n        var callback = args[1] ? args[1] : args[0];\n        var list = name ? this.alt(name, []) : this.data;\n        return {\n            list: list,\n            callback: callback\n        }\n    },\n    'each': function () {\n        var prop;\n        var props = this.eachProps(arguments);\n        for (prop in props.list) {\n            if (props.list.hasOwnProperty(prop)) {\n                props.callback(this.instance(props.list[prop]), props.list[prop], prop)\n            }\n        }\n    },\n    'filter': function(){\n        var item,prop;\n        var props = this.eachProps(arguments);\n        for (prop in props.list) {\n            if (props.list.hasOwnProperty(prop)) {\n                item   = this.instance(props.list[prop]);\n                if( props.callback(item, props.list[prop], prop) ){\n                    return props.list[prop];\n                }\n            }\n        }\n    },\n    /**\n     *\n     * @return {boolean|Model}\n     */\n    'find': function(){\n        var item,prop;\n        var props = this.eachProps(arguments);\n        for (prop in props.list) {\n            if (props.list.hasOwnProperty(prop)) {\n                item   = this.instance(props.list[prop]);\n                if( props.callback(item, props.list[prop], prop) ){\n                    return item;\n                }\n            }\n        }\n        return false;\n    },\n    'alt': function (prop, defaults) {\n        prop = this.attr(prop);\n        return typeof (prop) === 'undefined' ? defaults : prop;\n    },\n    'attr': function (key, value) {\n        var i = 0,\n            data = this.data,\n            name = (key || '').split('.'),\n            prop = name.pop(),\n            len = arguments.length;\n        for (; i < name.length; i++) {\n            if (data && data.hasOwnProperty(name[i])) {\n                data = data[name[i]];\n            } else {\n                if (len === 2) {\n                    data = (data[name[i]] = {});\n                } else {\n                    break;\n                }\n            }\n        }\n        if (len === 1) {\n            return data ? data[prop] : undefined;\n        }\n        if (len === 2) {\n            data[prop] = value;\n        }\n        return this;\n    },\n    'stringify': function () {\n        return JSON.stringify(this.serialize());\n    },\n    'serialize': function () {\n        return this.data;\n    }\n});\n\n\nmodule.exports = Model;\n\n},{\"./module\":12}],12:[function(require,module,exports){\nvar Class = require('./class');\nvar Event = require('./event');\nvar Utils = require('./utils');\n/**\n * @type {ClassObject}\n * @extends {Class}\n */\nvar Module =  Class.extend({\n    'utils': Utils,\n    'getListener': function () {\n        if (!this._listener_) this._listener_ = new Event();\n        return this._listener_;\n    },\n    'destroy': function () {\n        this.off();\n    },\n    'on': function (type, callback) {\n        this.getListener().on(type, callback);\n        return this;\n    },\n    'off': function (type, callback) {\n        this.getListener().off(type, callback);\n        return this;\n    },\n    'proxy': function (fn) {\n        if (!this._proxy_cache_) this._proxy_cache_ = {};\n        if (this.utils.isString(fn)) {\n            if (!this._proxy_cache_[fn]) {\n                this._proxy_cache_[fn] = this._super(fn);\n            }\n            return this._proxy_cache_[fn];\n        }\n        return this._super(fn);\n    },\n    'trigger': function () {\n        this.getListener().trigger.apply(this.getListener(), arguments);\n        return this;\n    },\n    'each': function (ob, cb) {\n        this.utils.forEach(ob, this.proxy(cb));\n    },\n    'addAttr': function (el, ob) {\n        if (!this.utils.isElement(el)) return false;\n        this.utils.forEach(ob, function (v, k) {\n            el.setAttribute(k, v);\n        });\n    },\n    'addCss': function (el, ob) {\n        if (!this.utils.isElement(el)) return false;\n        this.utils.forEach(ob, function (v, k) {\n            this.addCssProperty(el, k, v);\n        }, this);\n    },\n    'addCssProperty': function (el, style, value) {\n        var result = el.style.cssText.match(new RegExp(\"(?:[;\\\\s]|^)(\" +\n            style.replace(\"-\", \"\\\\-\") + \"\\\\s*:(.*?)(;|$))\")),\n            idx;\n        if (result) {\n            idx = result.index + result[0].indexOf(result[1]);\n            el.style.cssText = el.style.cssText.substring(0, idx) +\n                style + \": \" + value + \";\" +\n                el.style.cssText.substring(idx + result[1].length);\n        } else {\n            el.style.cssText += \" \" + style + \": \" + value + \";\";\n        }\n    },\n    'addEvent': function (el, ev, cb) {\n        if (!el || !ev || !cb) return false;\n        cb = this.proxy(cb);\n        if (el.addEventListener) el.addEventListener(ev, cb);\n        else if (el['attachEvent']) el['attachEvent']('on' + ev, cb);\n    },\n    'removeEvent': function (el, ev, cb) {\n        if (!el || !ev || !cb) return false;\n        cb = this.proxy(cb);\n        if (el.removeEventListener) el.removeEventListener(ev, cb, false);\n        else if (el['detachEvent']) el['detachEvent']('on' + ev, cb);\n    },\n    'prepareForm': function (url, data, target, method) {\n        var form = this.utils.createElement('form');\n        this.addAttr(form, {\n            'action': url,\n            'target': target || '_self',\n            'method': method || 'POST'\n        });\n        this.addCss(form, {\n            'display': 'none'\n        });\n        this.utils.forEach(data, function (v, k, el) {\n            el = this.utils.createElement('input');\n            el.type = 'hidden';\n            el.name = k;\n            el.value = v;\n            form.appendChild(el);\n        }, this);\n        return form;\n    }\n});\n\nmodule.exports = Module;\n\n},{\"./class\":3,\"./event\":8,\"./utils\":18}],13:[function(require,module,exports){\nvar Config = require('../config');\nvar Module    = require('../module');\nvar Api       = require('../api');\nvar Connector = require('../connector');\nvar Response  = require('../response');\nvar Deferred = require('../deferred');\nvar Request   = require('./request');\n\n\n/**\n * @type {ClassObject}\n * @extends {Module}\n */\nvar Button = Module.extend({\n    'defaults': {\n        origin: 'https://api.fondy.eu',\n        endpoint: {\n            gateway: '/checkout/v2/index.html',\n            button: '/checkout/v2/button/index.html'\n        },\n        style: {\n            height: 38,\n            mode: 'default',\n            type: 'long',\n            color: 'black'\n        },\n        data: {}\n    },\n    'init': function (params) {\n        this.initParams(params);\n        this.initElement();\n        this.initEvents();\n        this.initApi();\n        this.initFrame();\n        this.initPaymentRequest();\n    },\n    'initParams': function (params) {\n        this.supported = false;\n        this.params = this.utils.extend({},this.defaults, params);\n    },\n    'initApi': function () {\n        if(this.params.api instanceof Api){\n            this.api = this.params.api;\n            delete this.params['api'];\n        } else {\n            this.api = new Api({\n                origin:this.params.origin,\n                endpoint: this.params.endpoint\n            });\n        }\n    },\n    'endpointUrl': function (type, url) {\n        return [this.params.origin, this.params.endpoint[type] || '/', url || ''].join('');\n    },\n    'initElement': function () {\n        this.element = this.utils.querySelector(this.params.element);\n        this.container = this.utils.createElement('div');\n        this.cover = this.utils.createElement('a');\n        this.addCss(this.cover,Config.ButtonCoverCss);\n        this.addAttr(this.cover,Config.ButtonCoverAttrs)\n        this.addCss(this.container,Config.ButtonContainerCss);\n        this.element.appendChild(this.container);\n    },\n    'sendButtonEvent': function(cx,ev){\n        ev.preventDefault();\n        this.connector.send('event',{type:ev.type});\n    },\n    'initEvents': function(){\n        this.addEvent(this.cover, 'mouseenter', 'sendButtonEvent');\n        this.addEvent(this.cover, 'mouseleave', 'sendButtonEvent');\n        this.addEvent(this.cover, 'blur', 'sendButtonEvent');\n        this.addEvent(this.cover, 'focus', 'sendButtonEvent');\n        this.addEvent(this.cover, 'click', 'onClick');\n    },\n    'initPaymentRequest': function () {\n        this.payment = new Request({});\n        this.payment.on('complete', this.proxy('onToken'));\n        this.payment.on('error', this.proxy('onError'));\n        this.payment.on('log', this.proxy('onLog'));\n        this.payment.on('supported', this.proxy('onSupported'));\n        this.payment.on('fallback', this.proxy('onFallback'));\n        this.payment.on('reload', this.proxy('onReload'));\n        this.payment.setApi(this.api);\n        this.payment.setMerchant(this.params.data.merchant_id);\n        this.payment.getSupportedMethod();\n    },\n    'initFrame': function () {\n        this.frameLoaded = Deferred();\n        this.frame = this.utils.createElement('iframe');\n        this.addCss(this.frame,Config.ButtonFrameCss);\n        this.addAttr(this.frame,Config.ButtonFrameAttrs);\n        this.addAttr(this.frame, {\n            src: this.endpointUrl('button')\n        });\n        this.container.appendChild(this.frame);\n        this.container.appendChild(this.cover);\n        this.initConnector();\n        this.addEvent(this.frame, 'load', function () {\n            this.frameLoaded.resetState().resolve();\n        });\n    },\n    'onFrameLoaded': function(){\n        this.update({});\n    },\n    'onFallback': function(){\n        this.fallback = true;\n        this.payment.fallback(this.proxy(function() {\n            this.onSupported(null, 'google');\n        }));\n    },\n    'onSupported': function(cx, method){\n        this.supported = true;\n        this.method = method;\n        this.frameLoaded.done(this.proxy('onFrameLoaded'));\n    },\n    'initConnector': function () {\n        this.connector = new Connector({target: this.frame.contentWindow});\n        this.connector.on('show', this.proxy('onShow'));\n        this.connector.on('hide', this.proxy('onHide'));\n        this.connector.on('log', this.proxy('onLog'));\n        this.connector.on('pay', this.proxy('onPay'));\n        this.connector.on('complete', this.proxy('onToken'));\n        this.connector.on('error', this.proxy('onError'));\n        this.connector.on('reload', this.proxy('onReload'));\n    },\n    'getConfigParams': function (data) {\n        var params = {method: this.method, data: {}, style: {} , fallback: this.fallback};\n        this.utils.extend(params.data, this.params.data);\n        this.utils.extend(params.style, this.params.style);\n        if (this.utils.isPlainObject(data)) {\n            this.utils.extend(params,data);\n        }\n        return params;\n    },\n    'send': function(action,data){\n        if( this.supported === true ){\n            this.connector.send(action,data);\n        }\n        return this;\n    },\n    'update': function (params) {\n        this.sendOptions(params);\n        this.api.scope(this.proxy(function(){\n            this.api.request('api.checkout.pay','get',this.params.data)\n                .done(this.proxy('sendConfig'))\n                .fail(this.proxy('sendConfig'));\n        }));\n    },\n    'sendOptions': function(params){\n        this.utils.extend(this.params,this.getConfigParams(params));\n        this.send('options',this.params);\n    },\n    'sendConfig': function(cx,model){\n        this.model = model;\n        this.model.supportedMethod(this.method);\n        this.payment.setConfig(this.model.data);\n        this.send('config',this.model.data);\n    },\n    'callback': function (model) {\n        var params = this.utils.extend({}, this.params.data, model.serialize());\n        this.api.scope(this.proxy(function(){\n            this.api.request('api.checkout.form','request',params)\n                .done(this.proxy('onSuccess'))\n                .fail(this.proxy('onError'));\n        }));\n    },\n    'process': function (callback) {\n        this.callback = callback;\n        return this;\n    },\n    'validate': function(callback){\n        this.validateCallback = (function(context){\n            return function(resolve){\n                if( context.validationProgress === true ) return false;\n                context.validationProgress = true;\n                callback(function(){\n                    context.validationProgress = false;\n                    resolve.call(context);\n                });\n            }\n        })(this);\n    },\n    'cssUnit': function (value, unit) {\n        return String(value || 0).concat(unit || '').concat(' !important')\n    },\n    'onClick': function () {\n        if( this.validateCallback ){\n            this.validateCallback(function(){\n                this.payment.pay();\n            });\n        } else {\n            this.payment.pay();\n        }\n    },\n    'onToken': function (c, data) {\n        this.callback(new Response(data));\n    },\n    'onSuccess': function (c, data) {\n        this.trigger('success', data);\n    },\n    'onError': function (c, data) {\n        this.trigger('error', data);\n    },\n    'onReload': function(c,data){\n        this.trigger('reload', data);\n    },\n    'onShow': function () {\n        this.addCss(this.frame, {\n            'transition': 'opacity 0.6s 0.4s ease-out',\n            'opacity': this.cssUnit(1)\n        });\n        this.addCss(this.container, {\n            'transition': 'height 0.2s ease-out',\n            'height': this.cssUnit(this.params.style.height, 'px')\n        });\n        this.trigger('show', {});\n    },\n    'onHide': function () {\n        this.addCss(this.frame, {\n            'transition': 'opacity 0.4s ease-out',\n            'opacity': this.cssUnit(0)\n        });\n        this.addCss(this.container, {\n            'transition': 'height 0.2s 0.4s ease-out',\n            'height': this.cssUnit(0, 'px')\n        });\n        this.trigger('hide', {});\n    },\n    'onLog': function (c, result) {\n        this.trigger('log',{\n            event: 'log',\n            result: result\n        });\n    }\n});\n\nmodule.exports = Button;\n\n},{\"../api\":2,\"../config\":5,\"../connector\":6,\"../deferred\":7,\"../module\":12,\"../response\":16,\"./request\":15}],14:[function(require,module,exports){\nvar Config = require('../config');\nvar Module = require('../module');\nvar Connector = require('../connector');\nvar Request = require('./request');\n\nvar svgLang = function(lang,defaults){\n    return Config.GooglePayLanguages.indexOf(lang) !== -1 ? lang : defaults;\n}\n\n/**\n * @type {ClassObject}\n * @extends {Module}\n */\nvar Container = Module.extend({\n    'defaults': {\n        element: null,\n        method: 'card',\n        data: {\n            lang: 'en'\n        },\n        style: {}\n    },\n    'init': function (params) {\n        this.initParams(params);\n        this.initEvents();\n    },\n    'initParams': function (params) {\n        this.params = this.utils.extend({}, this.defaults, params);\n        this.element = this.utils.querySelector(this.params.element);\n        this.connector = new Connector({target: window.parent});\n        this.payment = new Request({\n            embedded: true\n        });\n    },\n    'extendParams': function (params) {\n        this.utils.extend(this.params, {\n            method: params.method,\n            style: params.style,\n            data: params.data,\n            css: params.css\n        });\n    },\n    'addFrameImage': function(){\n        var frame = this.utils.querySelector('iframe',this.element) || this.utils.createElement('iframe');\n        var url = 'https://pay.google.com/gp/p/generate_gpay_btn_img';\n        var style = this.params.style || {};\n        var lang = svgLang(this.params.data.lang,'en');\n        var query = {\n            buttonColor: style.color || 'black',\n            browserLocale: lang,\n            buttonSizeMode: 'fill'\n        };\n        var src = [url,this.utils.param(query)].join('?');\n        this.addAttr(frame,{\n            'scrolling': 'no',\n            'frameborder': 0,\n            'src': src\n        });\n        this.element.appendChild(frame);\n        this.element.classList.remove('short','long');\n    },\n    'styleButton': function () {\n        var element = this.element;\n        var method = this.params.method;\n        var style = this.params.style || {};\n        var lang = this.params.data.lang || 'en';\n        var css = this.params.css || {};\n        element.setAttribute('class', '');\n        element.classList.add('button', 'pending');\n        if (method === 'card') method = 'google';\n        if (method) {\n            element.classList.add(method);\n        }\n        if ( lang ) {\n            element.classList.add(lang);\n        }\n        if(style.type){\n            element.classList.add(style.type);\n        }\n        if(style.mode){\n            element.classList.add(style.mode);\n        }\n        if(style.color){\n            element.classList.add(style.color);\n        }\n        if (css) {\n            this.utils.forEach(css, function (value, name) {\n                element.style.setProperty(['--', name].join(''), value);\n            });\n        }\n        if(method === 'google' && style.mode === 'default') {\n            this.addFrameImage();\n        }\n    },\n    'initEvents': function () {\n        this.payment.on('complete', this.proxy(function (cx, data) {\n            this.connector.send('complete', data);\n        }));\n        this.payment.on('reload', this.proxy(function (cx, data) {\n            this.connector.send('reload', data);\n        }));\n        this.payment.on('error', this.proxy(function (cx, data) {\n            this.connector.send('error', data);\n        }));\n        this.connector.on('options', this.proxy(function (cx, data) {\n            this.extendParams(data);\n            this.styleButton();\n        }));\n        this.connector.on('config', this.proxy(function (cx, data) {\n            if (this.payment.setConfig(data).isValidConfig()) {\n                this.element.classList.remove('pending');\n                this.element.classList.add('ready');\n                this.connector.send('show', {});\n            } else {\n                this.connector.send('hide', {});\n            }\n        }));\n        this.connector.on('event', this.proxy(function(cx,data){\n            if( data.type === 'mouseenter' ) {\n                this.element.classList.add('hover');\n            }\n            if( data.type === 'mouseleave' ) {\n                this.element.classList.remove('hover');\n            }\n            if( data.type === 'focus' ) {\n                this.element.classList.add('active');\n            }\n            if( data.type === 'blur' ) {\n                this.element.classList.remove('active');\n            }\n        }))\n    }\n});\n\nmodule.exports = Container;\n\n},{\"../config\":5,\"../connector\":6,\"../module\":12,\"./request\":15}],15:[function(require,module,exports){\nvar Api = require('../api');\nvar Module = require('../module');\nvar GooglePay = require('../google/pay')\nvar Deferred = require('../deferred');\nvar Utils = require('../utils');\nvar Config = require('../config');\n\nvar hasPaymentRequest = function () {\n    return window.hasOwnProperty('PaymentRequest') && typeof (window.PaymentRequest) === 'function'\n}\n\nvar getPaymentRequest = function (methods, details, options) {\n    var request = null;\n    options = options || {};\n    details = details || {};\n    details.id = Utils.uuid();\n    if (hasPaymentRequest()) {\n        try {\n            request = new PaymentRequest(methods, details, options);\n        } catch (e) {\n            request = null;\n        }\n    }\n    return request;\n};\n\n/**\n * @type {ClassObject}\n * @extends {Module}\n */\nvar Request = Module.extend({\n    'config': {\n        payment_system: '',\n        fallback: false,\n        methods: [],\n        details: {},\n        options: {}\n    },\n    'init': function (params) {\n        this.params = params || {};\n    },\n    'setConfig': function (config) {\n        this.config = config;\n        return this;\n    },\n    'setMerchant': function (merchant) {\n        this.merchant = merchant;\n    },\n    'setApi': function (api) {\n        if (api instanceof Api) {\n            this.api = api;\n        }\n    },\n    'isValidConfig': function(){\n        return this.config.payment_system && this.config.methods && this.config.methods.length > 0;\n    },\n    'getSupportedMethod': function () {\n        (function (module, list, index) {\n            var request, method, config;\n            var callback = arguments.callee;\n            var item = list[index] || false;\n            if (item === false) {\n                return module.trigger('fallback');\n            }\n            index = (index || 0) + 1;\n            method = item[0];\n            config = item[1];\n            request = getPaymentRequest([config], Config.PaymentRequestDetails);\n            if( request ){\n                request.canMakePayment().then(function (status) {\n                    if (status === true) {\n                        module.trigger('supported', method);\n                    } else {\n                        callback(module, list, index);\n                    }\n                });\n            } else {\n                callback(module, list, index);\n            }\n        })(this, Config.PaymentRequestMethods , 0);\n    },\n    'modelRequest': function (method, params, callback, failure) {\n        if (this.api instanceof Api) {\n            this.api.scope(this.proxy(function () {\n                this.api.request('api.checkout.pay', method, params)\n                    .done(this.proxy(callback)).fail(this.proxy(failure));\n            }));\n        }\n    },\n    'getRequest': function () {\n        var module = this;\n        var defer = Deferred();\n        var request = getPaymentRequest(\n            this.config.methods,\n            this.config.details,\n            this.config.options\n        );\n        if (request) {\n            this.addEvent(request, 'merchantvalidation', 'merchantValidation');\n            request.canMakePayment().then(function () {\n                request.show().then(function (response) {\n                    response.complete('success').then(function () {\n                        defer.resolveWith(module, [response.details])\n                    });\n                }).catch(function (e) {\n                    defer.rejectWith(module, [{code: e.code, message: e.message}]);\n                })\n            }).catch(function (e) {\n                defer.rejectWith(module, [{code: e.code, message: e.message}]);\n            });\n        } else {\n            GooglePay.show(this.config.methods).then(function(details){\n                defer.resolveWith(module, [details])\n            }).catch(function(e){\n                defer.rejectWith(module, [{code: e.code, message: e.message}]);\n            });\n        }\n        return defer;\n    },\n    'fallback': function(callback){\n        GooglePay.load().then(callback);\n    },\n    'pay': function () {\n        this.getRequest().done(function (details) {\n            this.trigger('complete', {\n                payment_system: this.config.payment_system,\n                data: details\n            });\n        }).fail(function (error) {\n            this.trigger('error', error);\n            if (this.params.embedded === true) {\n                location.reload();\n                this.trigger('reload', this.params);\n            }\n        });\n    },\n    'appleSession': function (params) {\n        var defer = Deferred();\n        this.modelRequest('session', params, function (c, model) {\n            defer.resolveWith(this, [model.serialize()]);\n        }, function (c, model) {\n            defer.rejectWith(this, [model]);\n        });\n        return defer;\n    },\n    'merchantValidation': function (cx, event) {\n        this.appleSession({\n            url: event['validationURL'],\n            domain: location['host'],\n            merchant_id: this.merchant\n        }).done(function (session) {\n            try {\n                event.complete(session.data);\n            } catch (error) {\n                this.trigger('error', error);\n            }\n        }).fail(function (error) {\n            this.trigger('error', error);\n        });\n    }\n});\n\nmodule.exports = Request;\n\n},{\"../api\":2,\"../config\":5,\"../deferred\":7,\"../google/pay\":9,\"../module\":12,\"../utils\":18}],16:[function(require,module,exports){\nvar Model = require('./model');\n/**\n * @type {ClassObject}\n * @extends {Model}\n */\n\nvar ProxyUrl = 'http://secure-redirect.cloudipsp.com/submit/';\n\n\nvar Response = Model.extend({\n    'stringFormat': function (string) {\n        var that = this;\n        return (string || '').replace(/{(.+?)}/g, function (match, prop) {\n            return that.attr(['order.order_data', prop].join('.')) || match;\n        });\n    },\n    'setConnector': function (connector) {\n        this.connector = connector;\n        return this;\n    },\n    'setUID': function (uid) {\n        this.uid = uid;\n        return this;\n    },\n    'getUID': function () {\n        return this.uid;\n    },\n    'formDataProxy': function(url, data, target, method){\n        location.assign([ProxyUrl, JSON.stringify({\n            url: url,\n            params: data,\n            target: target,\n            method: method\n        })].join('#'));\n    },\n    'formDataSubmit': function (url, data, target, method) {\n        if( url.match(/^http:/) ){\n            return this.formDataProxy(url,data,target,method);\n        }\n        var action = this.stringFormat(url);\n        var form = this.prepareForm(action, data, target, method);\n        var body = this.utils.querySelector('body');\n        body.appendChild(form);\n        form.submit();\n        form.parentNode.removeChild(form);\n    },\n    'inProgress': function () {\n        return this.attr('order.in_progress');\n    },\n    'readyToSubmit': function () {\n        return this.attr('order.ready_to_submit');\n    },\n    'waitForResponse': function () {\n        return this.attr('order.pending');\n    },\n    'needVerifyCode': function () {\n        return this.attr('order.need_verify_code');\n    },\n    'redirectUrl': function () {\n        if (this.attr('url')) {\n            location.assign(this.attr('url'));\n            return true;\n        }\n        return false;\n    },\n    'submitToMerchant': function () {\n        var ready = this.attr('order.ready_to_submit');\n        var url = this.attr('model.url') || this.attr('order.response_url');\n        var method = this.attr('order.method');\n        var data = this.attr('model.send_data') || this.attr('order.order_data');\n        if (ready && url && data) {\n            this.formDataSubmit(url, data, '_self', method);\n            return true;\n        }\n    },\n    'submitForm': function () {\n        var method = this.attr('method');\n        var url = this.attr('url');\n        var data = this.attr('send_data');\n        if (url && data) {\n            this.formDataSubmit(url, data, '_self', method);\n            return true;\n        }\n        return false;\n    },\n    'sendResponse': function () {\n        var action = this.attr('action');\n        if (action === 'submit')\n            return this.submitForm();\n        if (action === 'redirect')\n            return this.redirectUrl();\n        return false;\n    },\n    'prepare3dsData': function () {\n        var params = {};\n        var data = this.attr('submit3ds');\n        if (data['3ds']) {\n            params.token = this.attr('token');\n            params.uid = this.getUID();\n            params.frame = true;\n            if (data['send_data'].TermUrl) {\n                data['send_data'].TermUrl = [\n                    data['send_data'].TermUrl,\n                    this.utils.param(params)\n                ].join('#!!');\n            }\n        }\n        return data;\n    },\n    'waitOn3dsDecline': function () {\n        var data = this.alt('submit3ds.checkout_data', {\n            js_wait_on_3ds_decline: false,\n            js_wait_on_3ds_decline_duration: 0\n        });\n        return data.js_wait_on_3ds_decline ? data.js_wait_on_3ds_decline_duration : 0;\n    },\n    'submit3dsForm': function () {\n        if (this.attr('submit3ds.checkout_data')) {\n            this.connector.trigger('modal', this.prepare3dsData());\n        }\n    },\n    'supportedMethod': function(method){\n        var item = this.find('methods',function(item){\n            return item.alt('supportedMethods','').match(method)\n        });\n        if( item ){\n            this.attr('methods',[item.serialize()])\n        }\n    }\n});\n\nmodule.exports = Response;\n\n},{\"./model\":11}],17:[function(require,module,exports){\nvar Views = require('../views');\nvar Class = require('./class');\nvar Utils = require('./utils');\n\nvar settings = {\n    evaluate: /<%([\\s\\S]+?)%>/g,\n    interpolate: /<%=([\\s\\S]+?)%>/g,\n    escape: /<%-([\\s\\S]+?)%>/g\n};\nvar noMatch = /(.)^/;\nvar escapes = {\n    \"'\": \"'\",\n    '\\\\': '\\\\',\n    '\\r': 'r',\n    '\\n': 'n',\n    '\\t': 't',\n    '\\u2028': 'u2028',\n    '\\u2029': 'u2029'\n};\nvar escaper = /\\\\|'|\\r|\\n|\\t|\\u2028|\\u2029/g;\nvar htmlEntities = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#x27;'\n};\nvar entityRe = new RegExp('[&<>\"\\']', 'g');\nvar escapeExpr = function (string) {\n    if (string == null) return '';\n    return ('' + string).replace(entityRe, function (match) {\n        return htmlEntities[match];\n    });\n};\nvar counter = 0;\nvar template = function (text) {\n    var render;\n    var matcher = new RegExp([\n        (settings.escape || noMatch).source,\n        (settings.interpolate || noMatch).source,\n        (settings.evaluate || noMatch).source\n    ].join('|') + '|$', 'g');\n    var index = 0;\n    var source = \"__p+='\";\n    text.replace(matcher, function (match, escape, interpolate, evaluate, offset) {\n        source += text.slice(index, offset).replace(escaper, function (match) {\n            return '\\\\' + escapes[match];\n        });\n        if (escape) {\n            source += \"'+\\n((__t=(\" + escape + \"))==null?'':escapeExpr(__t))+\\n'\";\n        }\n        if (interpolate) {\n            source += \"'+\\n((__t=(\" + interpolate + \"))==null?'':__t)+\\n'\";\n        }\n        if (evaluate) {\n            source += \"';\\n\" + evaluate + \"\\n__p+='\";\n        }\n        index = offset + match.length;\n        return match;\n    });\n    source += \"';\\n\";\n    if (!settings['variable']) source = 'with(obj||{}){\\n' + source + '}\\n';\n    source = \"var __t,__p='',__j=Array.prototype.join,\" +\n        \"print=function(){__p+=__j.call(arguments,'');};\\n\" +\n        source + \"return __p;\\n//# sourceURL=/tmpl/source[\" + counter++ + \"]\";\n    try {\n        render = new Function(settings['variable'] || 'obj', 'escapeExpr', source);\n    } catch (e) {\n        e.source = source;\n        throw e;\n    }\n    var template = function (data) {\n        return render.call(this, data, escapeExpr);\n    };\n    template.source = 'function(' + (settings['variable'] || 'obj') + '){\\n' + source + '}';\n    return template;\n};\n/**\n * @type {ClassObject}\n * @extends {Class}\n */\nvar Template = Class.extend({\n    'utils': Utils,\n    'init': function (name) {\n        this.name = name;\n        this.view = {};\n        this.output();\n    },\n    'output': function () {\n        this.view.source = Views[this.name];\n        this.view.output = template(this.view.source);\n    },\n    'render': function (data) {\n        this.data = data;\n        return this.view.output.call(this, this);\n    },\n    'include': function (name, data) {\n        return this.instance(name).render(this.utils.extend(this.data, data));\n    }\n});\n\nmodule.exports = Template;\n\n},{\"../views\":22,\"./class\":3,\"./utils\":18}],18:[function(require,module,exports){\nvar Utils = {\n    'getType': function (o) {\n        return ({}).toString.call(o).match(/\\s([a-zA-Z]+)/)[1].toLowerCase();\n    },\n    'isObject': function (o) {\n        return this.getType(o) === 'object';\n    },\n    'isPlainObject': function (o) {\n        return (!!o && typeof o === 'object' && o.constructor === Object);\n    },\n    'isFunction': function (o) {\n        return this.getType(o) === 'function';\n    },\n    'isRegexp': function (o) {\n        return this.getType(o) === 'regexp';\n    },\n    'isArguments': function (o) {\n        return this.getType(o) === 'arguments';\n    },\n    'isError': function (o) {\n        return this.getType(o) === 'error';\n    },\n    'isArray': function (o) {\n        return this.getType(o) === 'array';\n    },\n    'isDate': function (o) {\n        return this.getType(o) === 'date';\n    },\n    'isString': function (o) {\n        return this.getType(o) === 'string';\n    },\n    'isNumber': function (o) {\n        return this.getType(o) === 'number';\n    },\n    'isElement': function (o) {\n        return o && o.nodeType === 1;\n    },\n    'toArray': function (o) {\n        return [].slice.call(o);\n    },\n    'querySelectorAll': function (o, p) {\n        return this.toArray((p || document).querySelectorAll(o));\n    },\n    'querySelector': function (o, p) {\n        return (p || document).querySelector(o);\n    },\n    'hasProp': function(o,v){\n        return o && o.hasOwnProperty(v);\n    },\n    'forEach': function (ob, cb, cx) {\n        var p;\n        for (p in ob)\n            if (this.hasProp(ob,p))\n                cb.call(cx || null, ob[p], p);\n    },\n    'map': function (ob, cb, cx) {\n        var p, t, r = [];\n        for (p in ob)\n            if (this.hasProp(ob,p))\n                if ((t = cb.call(cx || null, ob[p], p)) !== undefined)\n                    r[p] = t;\n        return r;\n    },\n    'cleanObject': function (ob) {\n        var p;\n        for (p in ob) {\n            if (this.hasProp(ob,p)) {\n                if (ob[p].length === 0) {\n                    if (this.isArray(ob)) ob.splice(p, 1);\n                    if (this.isPlainObject(ob)) delete ob[p];\n                } else if (this.isPlainObject(ob[p])) {\n                    this.cleanObject(ob[p]);\n                }\n            }\n        }\n        return ob;\n    },\n    'param': function (data) {\n        var s = [];\n        var add = function (k, v) {\n            v = typeof v === 'function' ? v() : v;\n            v = v === null ? '' : v === undefined ? '' : v;\n            s[s.length] = encodeURIComponent(k) + '=' + encodeURIComponent(v);\n        };\n        var ns = function(o,i){\n            return (typeof o === 'object' && o ? i : '' )\n        };\n        var build = function (prefix, ob) {\n            if (prefix) {\n                if (Utils.isArray(ob)) {\n                    Utils.forEach(ob,function(v,k){\n                        build(prefix+'['+ns(v,k)+']',v);\n                    })\n                } else if (Utils.isObject(ob)) {\n                    Utils.forEach(ob,function(v,k){\n                        build(prefix+'['+k+']',v);\n                    });\n                } else {\n                    add(prefix,ob);\n                }\n            } else if (Utils.isArray(ob)) {\n                Utils.forEach(ob,function(v){\n                    add(v.name,v.value);\n                });\n            } else {\n                Utils.forEach(ob,function(v,k){\n                    build(k,v);\n                });\n            }\n            return s;\n        };\n        return build('', data).join('&');\n    },\n    'removeElement': function (el) {\n        el.parentNode.removeChild(el);\n    },\n    'createElement': function (el) {\n        return document.createElement(el);\n    },\n    'getStyle': function (el, prop, getComputedStyle) {\n        getComputedStyle = window.getComputedStyle;\n        return (getComputedStyle ? getComputedStyle(el) : el['currentStyle'])[prop.replace(/-(\\w)/gi, function (word, letter) {\n            return letter.toUpperCase()\n        })];\n    },\n    'extend': function (obj) {\n        this.forEach([].slice.call(arguments, 1), function (o) {\n            if (o !== null) {\n                this.forEach(o, function (value, key) {\n                    if (this.isPlainObject(value)) {\n                        obj[key] = this.extend(obj[key] || {}, value);\n                    } else {\n                        obj[key] = value;\n                    }\n                }, this);\n            }\n        }, this);\n        return obj;\n    },\n    'uuid': function(){\n        var a=0,b='';\n        while(a++<36){\n            if( a * 51 & 52 ){\n                b+= ( a ^ 15 ? 8 ^ Math.random() * ( a ^ 20 ? 16 : 4 ) : 4 ).toString(16);\n            } else {\n                b+= '-';\n            }\n        }\n        return b;\n    },\n    'getPath': function(path){\n        var props = path.split('.');\n        var first = props.shift();\n        var value = null;\n        if( this.hasProp(window,first) ) {\n            value = window[first];\n            this.forEach(props,function(name){\n                value = this.hasProp(value,name) ? value[name] : null;\n            },this)\n        }\n        return value;\n    }\n};\n\nmodule.exports = Utils;\n\n},{}],19:[function(require,module,exports){\nvar Widget = require('./index');\n/**\n * @type {ClassObject}\n * @extends {Widget}\n */\nvar Button = Widget.extend({\n    'attributes': {},\n    'initElement': function (el) {\n        if (this.utils.isPlainObject(this.params.attributes)) {\n            this.utils.extend(this.attributes, this.params.attributes);\n        }\n        this.addSelectorEvent(el, 'click', 'sendRequest');\n    },\n    'getRequestParams': function (el) {\n        return this.utils.extend({}, this.params.options, this.getElementData(el));\n    },\n    'getElementData': function (el) {\n        var result = {};\n        this.utils.forEach(this.attributes, function (value, key) {\n            if (el.hasAttribute(key)) {\n                result[value] = el.getAttribute(key);\n            }\n        });\n        return result;\n    }\n});\n\nmodule.exports = Button;\n\n},{\"./index\":21}],20:[function(require,module,exports){\nvar Module = require('../module');\nvar Widget = require('./index');\n/**\n * @type {ClassObject}\n */\nvar FormData = Module.extend({\n    'init': function (form) {\n        this.setFormElement(form);\n    },\n    'setFormElement': function (form) {\n        if (this.utils.isElement(form)) {\n            this.form = form;\n        }\n    },\n    'getData': function (filter) {\n        var params = this.deparam(this.serializeArray());\n        return filter === true ? this.utils.cleanObject(params) : params;\n    },\n    'serializeArray': function () {\n        var list = this.utils.toArray(this.form.elements);\n        return this.utils.map(list, function (field) {\n            if (field.disabled || field.name === '') return;\n            if (field.type.match('checkbox|radio') && !field.checked) return;\n            return {\n                name: field.name,\n                value: field.value\n            };\n        });\n    },\n    'serializeAndEncode': function () {\n        return this.utils.map(this.serializeArray(), function (field) {\n            return [field.name, encodeURIComponent(field.value)].join('=');\n        }).join('&');\n    },\n    'deparam': function (obj) {\n        var prop;\n        var result = {};\n        var breaker = /[^\\[\\]]+|\\[\\]$/g;\n        var attr = function (name, value) {\n            var i, data = result, last = name.pop(), len = name.length;\n            for (i = 0; i < len; i++) {\n                if (!data[name[i]])\n                    data[name[i]] = len === i + 1 && last === '[]' ? [] : {};\n                data = data[name[i]];\n            }\n            if (last === '[]') {\n                data.push(value);\n            } else {\n                data[last] = value;\n            }\n        };\n        for (prop in obj) {\n            if (obj.hasOwnProperty(prop)) {\n                attr(obj[prop].name.match(breaker), obj[prop].value);\n            }\n        }\n        return result;\n    }\n});\n/**\n * @type {ClassObject}\n * @extends {Widget}\n */\nvar Form = Widget.extend({\n    'initElement': function (el) {\n        this.addSelectorEvent(el, 'submit', 'sendRequest');\n    },\n    'getRequestParams': function (el) {\n        return this.utils.extend({}, this.params.options, new FormData(el).getData() );\n    }\n});\n\nmodule.exports = Form;\n\n},{\"../module\":12,\"./index\":21}],21:[function(require,module,exports){\nvar Api = require('../api');\n/**\n * @type {ClassObject}\n * @extends {Api}\n */\nvar Widget = Api.extend({\n    'init': function (params) {\n        this.initParams(params);\n        this.initWidget();\n    },\n    'initWidget': function () {\n        this.initOptions(this.params.options);\n        if (this.utils.isString(this.params.element)) {\n            this.initElement(this.params.element);\n        }\n    },\n    'initOptions': function () {\n        if (this.utils.isPlainObject(this.params.options)) {\n            this.params.options = this.params.options || {};\n        }\n    },\n    'initElement': function (el) {\n\n    },\n    'addSelectorEvent': function (el, ev, cb) {\n        this.each(this.utils.querySelectorAll(el), function (cx, element) {\n            this.addEvent(element, ev, cb);\n        });\n        return this;\n    },\n    'getRequestParams': function () {\n        return {};\n    },\n    'sendRequest': function (el, ev) {\n        if (ev.defaultPrevented) return;\n        ev.preventDefault();\n        this.trigger('request', this.getRequestParams(el));\n        this.scope(function () {\n            this.request('api.checkout.form', 'request', this.getRequestParams(el))\n                .done(this.proxy('onSuccess'))\n                .fail(this.proxy('onError'))\n                .progress(this.proxy('onProgress'));\n        });\n    },\n    'onProgress': function (cx, model) {\n        this.trigger('progress', model);\n    },\n    'onSuccess': function (cx, model) {\n        model.sendResponse();\n        model.submitToMerchant();\n        this.trigger('success', model);\n    },\n    'onError': function (cx, model) {\n        this.trigger('error', model);\n    }\n});\n\n\nmodule.exports = Widget;\n\n},{\"../api\":2}],22:[function(require,module,exports){\nmodule.exports = Object.create(null)\nmodule.exports['3ds.ejs'] = '<%=include(\\'styles.ejs\\')%>\\n<div class=\"ipsp-modal-wrapper\">\\n    <div class=\"ipsp-modal\">\\n        <div class=\"ipsp-modal-header\">\\n            <a href=\"javascript:void(0)\" class=\"ipsp-modal-close\"></a>\\n            <div class=\"ipsp-modal-title\">\\n                <%-data.messages.modalHeader%>\\n                <a href=\\'javascript:void(0)\\'><%-data.messages.modalLinkLabel%></a>\\n            </div>\\n        </div>\\n        <div class=\"ipsp-modal-content\">\\n            <iframe src=\"about:blank\" class=\"ipsp-modal-iframe\" frameborder=\"0\" allowtransparency=\"true\"></iframe>\\n        </div>\\n    </div>\\n</div>\\n\\n'\nmodule.exports['styles.ejs'] = '<style>\\n    .ipsp-modal{\\n        box-sizing: border-box;\\n        margin:100px auto;\\n        max-width:680px;\\n        background-color:#fff;\\n        border-radius:5px;\\n        box-shadow:0 2px 2px rgba(0,0,0,0.2);\\n        overflow: hidden;\\n    }\\n    @media (max-width:850px){\\n        .ipsp-modal{\\n            margin:50px auto;\\n        }\\n    }\\n    @media (max-width:695px){\\n        .ipsp-modal{\\n            max-width:100%;\\n            margin:5px;\\n        }\\n    }\\n    .ipsp-modal-wrapper{\\n        box-sizing: border-box;\\n        overflow: auto;\\n        position:fixed;\\n        z-index:99999;\\n        left:0;\\n        bottom:0;\\n        top:0;\\n        right:0;\\n        background-color: rgba(0,0,0,0.2);\\n    }\\n    .ipsp-modal-header{\\n        box-sizing: border-box;\\n        background-color:#fafafa;\\n        height:50px;\\n        box-shadow:0 0 2px rgba(0,0,0,0.2);\\n        border-top-left-radius:5px;\\n        border-top-right-radius:5px;\\n    }\\n    .ipsp-modal-close{\\n        box-sizing: border-box;\\n        float:right;\\n        overflow:hidden;\\n        height:50px;\\n        text-decoration:none;\\n        border-top-right-radius:5px;\\n        color:#949494;\\n    }\\n    .ipsp-modal-close:hover,.ipsp-modal-close:focus,.ipsp-modal-close:active{\\n        text-decoration:none;\\n        color:#646464;\\n    }\\n    .ipsp-modal-close:before{\\n        content:\"\";\\n        font-size:50px;\\n        line-height:50px;\\n        padding:0 10px;\\n    }\\n    .ipsp-modal-title{\\n        box-sizing: border-box;\\n        border-top-left-radius:5px;\\n        line-height:20px;\\n        height:50px;\\n        padding:5px 15px;\\n        font-size:12px;\\n        display:table-cell;\\n        vertical-align: middle;\\n    }\\n    .ipsp-modal-content{\\n        box-sizing: border-box;\\n        border-bottom-left-radius:5px;\\n        min-height:650px;\\n    }\\n    .ipsp-modal-iframe{\\n        overflow-x: hidden;\\n        border: 0;\\n        display: block;\\n        width: 100%;\\n        height: 750px;\\n    }\\n\\n</style>\\n'\nmodule.exports['trustly.ejs'] = '<%=include(\\'styles.ejs\\')%>\\n<div class=\"ipsp-modal-wrapper\">\\n    <div class=\"ipsp-modal\">\\n        <div class=\"ipsp-modal-header\">\\n            <a href=\"#\" class=\"ipsp-modal-close\"></a>\\n            <div class=\"ipsp-modal-title\">\\n                <%-data.messages.modalHeader%>\\n                <a href=\\'javascript:void(0)\\'><%-data.messages.modalLinkLabel%></a>\\n            </div>\\n        </div>\\n        <div class=\"ipsp-modal-content\">\\n            <iframe src=\"about:blank\" class=\"ipsp-modal-iframe\" frameborder=\"0\" allowtransparency=\"true\"></iframe>\\n        </div>\\n    </div>\\n</div>\\n'\n},{}]},{},[1])(1)\n});\n"],"names":["f","exports","module","define","amd","window","global","self","this","$checkout","r","e","n","t","o","i","c","require","u","a","Error","code","p","call","length","1","Component","Api","Connector","Response","PaymentButton","PaymentContainer","FormWidget","ButtonWidget","add","./core/api","./core/component","./core/connector","./core/payment/button","./core/payment/container","./core/response","./core/widget/button","./core/widget/form","2","Config","Deferred","Module","Modal","extend","defaults","origin","endpoint","gateway","messages","modalHeader","modalLinkLabel","init","params","initParams","url","type","join","extendParams","utils","setOrigin","loaded","created","isString","scope","callback","proxy","_createFrame","on","request","model","method","defer","data","uid","connector","getUID","action","send","ev","response","setUID","setConnector","attr","_loadFrame","iframe","createElement","addAttr","allowtransparency","frameborder","scrolling","src","addCss","ApiFrameCss","body","querySelector","firstChild","insertBefore","appendChild","target","contentWindow","_onOpenModal","xhr","modal","checkout","_onCloseModal","trigger","_onLoadConnector","off","./config","./connector","./deferred","./modal","./module","./response","3","fnTest","test","toString","ClassObject","assign","instance","prop","proto","parent","prototype","hasOwnProperty","name","result","temp","_super","apply","arguments","superMethod","constructor","fn","cx","cb","concat","Array","slice","Class","4","newModule","modules","get","addModule","5","GooglePayApi","GoogleBaseRequest","apiVersion","apiVersionMinor","allowedPaymentMethods","parameters","allowedAuthMethods","allowedCardNetworks","GooglePayLanguages","PaymentRequestMethods","supportedMethods","PaymentRequestDetails","total","label","amount","currency","value","width","height","left","bottom","position","border","ButtonFrameCss","margin","padding","display","min-width","background","opacity","overflow","outline","z-index","ButtonFrameAttrs","tabindex","allowpaymentrequest","ButtonCoverCss","top","cursor","ButtonCoverAttrs","href","ButtonContainerCss","6","ns","uniqueId","signature","setTarget","create","addEvent","destroy","removeEvent","router","source","JSON","parse","postMessage","stringify","console","log","7","Utils","forEach","list","context","isArray","status","doneFuncs","failFuncs","progressFuncs","resultArgs","promise","done","push","fail","always","progress","then","object","state","isPending","isRejected","isResolved","obj","resolveWith","args","rejectWith","notifyWith","resetState","resolve","reject","notify","isFunction","./utils","8","Event","events","empty","splice","j","./class","9","config","GooglePay","id","client","wrapper","load","getPath","script","async","isElement","show","methods","find","item","getClient","loadPaymentData","readyToPay","onError","error","onLoadSuccess","isReadyToPay","catch","onLoadError","options","PaymentClient","../config","../deferred","../module","10","Template","template","initModal","initConnector","getRandomNumber","innerHTML","render","form","prepareForm","initScrollbar","submit","measureScrollbar","scrollDiv","document","className","offsetWidth","clientWidth","removeElement","checkScrollbar","documentElementRect","fullWindowWidth","innerWidth","documentElement","getBoundingClientRect","right","Math","abs","bodyIsOverflowing","scrollbarWidth","bodyPad","parseInt","getStyle","originalBodyPad","style","paddingRight","originalOverflow","resetScrollbar","round","random","selector","closeModal","el","preventDefault","removeModal","submitForm","onResponse","sendResponse","./template","11","Model","eachProps","alt","each","props","filter","key","split","pop","len","undefined","serialize","12","getListener","_listener_","_proxy_cache_","ob","v","k","setAttribute","addCssProperty","idx","cssText","match","RegExp","replace","index","indexOf","substring","addEventListener","removeEventListener","./event","13","Request","Button","button","mode","color","initElement","initEvents","initApi","initFrame","initPaymentRequest","supported","api","endpointUrl","element","container","cover","sendButtonEvent","payment","setApi","setMerchant","merchant_id","getSupportedMethod","frameLoaded","frame","onFrameLoaded","update","onFallback","fallback","onSupported","getConfigParams","isPlainObject","sendOptions","sendConfig","supportedMethod","setConfig","process","validate","validateCallback","validationProgress","cssUnit","unit","String","onClick","pay","onToken","onSuccess","onReload","onShow","transition","onHide","onLog","event","../api","../connector","../response","./request","14","Container","lang","embedded","css","addFrameImage","query","buttonColor","browserLocale","buttonSizeMode","param","classList","remove","styleButton","setProperty","isValidConfig","15","getPaymentRequest","details","uuid","PaymentRequest","payment_system","merchant","callee","canMakePayment","modelRequest","failure","getRequest","complete","message","location","reload","appleSession","merchantValidation","domain","session","../google/pay","../utils","16","ProxyUrl","stringFormat","string","that","formDataProxy","formDataSubmit","parentNode","removeChild","inProgress","readyToSubmit","waitForResponse","needVerifyCode","redirectUrl","submitToMerchant","ready","prepare3dsData","token","TermUrl","waitOn3dsDecline","js_wait_on_3ds_decline","js_wait_on_3ds_decline_duration","submit3dsForm","./model","17","escapeExpr","entityRe","htmlEntities","Views","settings","evaluate","interpolate","escape","noMatch","escapes","'","\\","\r","\n","\t","","","escaper","&","<",">","\"","counter","view","output","text","matcher","offset","Function","include","../views","18","getType","toLowerCase","isObject","Object","isRegexp","isArguments","isError","isDate","isNumber","nodeType","toArray","querySelectorAll","hasProp","map","cleanObject","s","encodeURIComponent","build","prefix","getComputedStyle","word","letter","toUpperCase","b","path","first","shift","19","attributes","addSelectorEvent","getRequestParams","getElementData","hasAttribute","getAttribute","./index","20","Widget","FormData","setFormElement","getData","deparam","serializeArray","elements","field","disabled","checked","serializeAndEncode","breaker","last","Form","21","initWidget","initOptions","sendRequest","defaultPrevented","onProgress","22"],"mappings":"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"}