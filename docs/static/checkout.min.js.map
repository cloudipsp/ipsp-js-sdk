{"version":3,"file":"checkout.min.js","sources":["checkout.js"],"sourcesContent":["(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.$checkout = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\nvar Component = require('./core/component');\n\nvar Api = require('./core/api');\nvar Module = require('./core/module');\nvar Connector = require('./core/connector');\nvar Response = require('./core/response');\nvar PaymentButton = require('./core/payment/button');\nvar PaymentContainer = require('./core/payment/container');\nvar FormWidget = require('./core/widget/form');\nvar ButtonWidget = require('./core/widget/button');\nvar Utils = require('./core/utils');\nvar Config = require('./core/config');\n\nComponent.add('Api', Api);\nComponent.add('Connector', Connector);\nComponent.add('PaymentContainer', PaymentContainer);\nComponent.add('PaymentButton', PaymentButton);\nComponent.add('FormWidget', FormWidget);\nComponent.add('ButtonWidget', ButtonWidget);\nComponent.add('Response', Response);\n\nmodule.exports = Component;\nmodule.exports['Api'] = Api;\nmodule.exports['Module'] = Module;\nmodule.exports['Utils'] = Utils;\nmodule.exports['Config'] = Config;\nmodule.exports['Connector'] = Connector;\nmodule.exports['PaymentContainer'] = PaymentContainer;\nmodule.exports['PaymentButton'] = PaymentButton;\nmodule.exports['FormWidget'] = FormWidget;\nmodule.exports['ButtonWidget'] = ButtonWidget;\nmodule.exports['Response'] = Response;\n\n},{\"./core/api\":2,\"./core/component\":4,\"./core/config\":5,\"./core/connector\":6,\"./core/module\":12,\"./core/payment/button\":13,\"./core/payment/container\":14,\"./core/response\":16,\"./core/utils\":18,\"./core/widget/button\":19,\"./core/widget/form\":20}],2:[function(require,module,exports){\nvar Config    = require('./config');\nvar Deferred  = require('./deferred');\nvar Module    = require('./module');\nvar Connector = require('./connector');\nvar Modal     = require('./modal');\nvar Response  = require('./response');\n\n/**\n * @type {ClassObject}\n * @extends {Module}\n */\nvar Api = Module.extend({\n    'defaults': {\n        'origin': 'https://api.fondy.eu',\n        'endpoint': {\n            'gateway': '/checkout/v2/index.html'\n        },\n        'messages':{\n            'modalHeader':'Now you will be redirected to your bank 3DSecure. If you are not redirected please refer',\n            'modalLinkLabel':'link'\n        }\n    },\n    'init': function (params) {\n        this.initParams(params);\n    },\n    'url': function (type, url) {\n        return [this.params.origin, this.params.endpoint[type] || '/', url || ''].join('');\n    },\n    'extendParams': function(params){\n        this.utils.extend(this.params, params);\n        return this;\n    },\n    'initParams': function (params) {\n        this.params = this.utils.extend({},this.defaults);\n        this.extendParams(params);\n        this.setOrigin(this.params.origin);\n        this.loaded = false;\n        this.created = false;\n    },\n    'setOrigin': function (origin) {\n        if (this.utils.isString(origin)) {\n            this.params.origin = origin;\n        }\n        return this;\n    },\n    'scope': function (callback) {\n        callback = this.proxy(callback);\n        if (this._createFrame().loaded === true) {\n            callback();\n        } else {\n            this.on('checkout.api', callback);\n        }\n    },\n    'request': function (model, method, params) {\n        var defer = Deferred();\n        var data = {\n            uid: this.connector.getUID(),\n            action: model,\n            method: method,\n            params: params || {}\n        };\n        this.connector.send('request', data);\n        this.connector.on(data.uid, this.proxy(function (ev, response, model, action) {\n            model = new Response(response);\n            model.setUID(data.uid);\n            model.setConnector(this.connector);\n            action = 'resolveWith';\n            if (model.attr('submit3ds')) {\n                action = 'notifyWith';\n            }\n            if (model.attr('error')) {\n                action = 'rejectWith';\n            }\n            defer[action](this, [model]);\n        }));\n        return defer;\n    },\n    '_loadFrame': function (url) {\n        this.iframe = this.utils.createElement('iframe');\n        this.addAttr(this.iframe, {'allowtransparency': true, 'frameborder': 0, 'scrolling': 'no'});\n        this.addAttr(this.iframe, {'src': url});\n        this.addCss(this.iframe,Config.ApiFrameCss);\n        this.body = this.utils.querySelector('body');\n        if (this.body.firstChild) {\n            this.body.insertBefore(this.iframe, this.body.firstChild);\n        } else {\n            this.body.appendChild(this.iframe);\n        }\n        return this.iframe;\n    },\n    '_createFrame': function () {\n        if (this.created === false) {\n            this.created = true;\n            this.iframe = this._loadFrame(this.url('gateway'));\n            this.connector = new Connector({\n                target: this.iframe.contentWindow,\n                origin: this.params.origin\n            });\n            this.connector.on('load', this.proxy('_onLoadConnector'));\n            this.connector.on('modal', this.proxy('_onOpenModal'));\n        }\n        return this;\n    },\n    '_onOpenModal': function (xhr, model) {\n        this.modal = new Modal({\n            checkout: this,\n            model: model\n        });\n        this.modal.on('close', this.proxy('_onCloseModal'));\n    },\n    '_onCloseModal': function (modal, data) {\n        this.trigger('modal.close', modal, data);\n    },\n    '_onLoadConnector': function () {\n        this.loaded = true;\n        this.connector.off('load');\n        this.trigger('checkout.api');\n        this.off('checkout.api');\n    }\n});\n\nmodule.exports = Api;\n\n},{\"./config\":5,\"./connector\":6,\"./deferred\":7,\"./modal\":10,\"./module\":12,\"./response\":16}],3:[function(require,module,exports){\nvar init = false;\nvar fnTest = /xyz/.test(function () {\n    return 'xyz';\n}.toString()) ? /\\b_super\\b/ : /.*/;\n/**\n * @type {ClassObject}\n */\nfunction ClassObject() {\n\n}\n\nClassObject.prototype._super = function(){\n\n}\n\nClassObject.prototype.instance = function(params){\n    return new this.constructor(params);\n}\n\nClassObject.prototype.proxy = function(fn){\n    fn = typeof (fn) == 'string' ? this[fn] : fn;\n    return (function (cx, cb) {\n        return function () {\n            return cb.apply(cx, [this].concat(Array.prototype.slice.call(arguments)))\n        };\n    })(this, fn);\n}\n\nfunction superMethod(parent,name,method){\n    return function () {\n        var temp = this._super, result;\n        this._super = parent[name];\n        result = method.apply(this,arguments);\n        this._super = temp;\n        return result;\n    };\n}\n\nfunction assign(target,instance){\n    var prop,proto,parent = target.prototype;\n    init = true;\n    proto = new target();\n    init = false;\n    for (prop in instance) {\n        if (instance.hasOwnProperty(prop)) {\n            if (typeof (parent[prop]) == 'function' &&\n                typeof (instance[prop]) == 'function' &&\n                fnTest.test(instance[prop])\n            ) {\n                proto[prop] = superMethod(parent,prop,instance[prop]);\n            } else {\n                proto[prop] = instance[prop];\n            }\n        }\n    }\n    return proto;\n}\n\nClassObject.extend = function extend(instance){\n    function Class(){\n        if (!init && this['init']) this['init'].apply(this, arguments);\n    }\n    Class.prototype = assign(this,instance);\n    Class.prototype.constructor = Class;\n    Class.extend = extend;\n    return Class;\n}\n\nmodule.exports = ClassObject;\n\n},{}],4:[function(require,module,exports){\nvar modules = {};\nvar instance = {};\n\nvar newModule = function (name, params) {\n    if (!modules[name]) {\n        throw Error(['module is undefined', name].join(' '));\n    }\n    return new modules[name](params || {});\n};\n\nvar addModule = function (name, module) {\n    if (modules[name]) {\n        throw Error(['module already added', name].join(' '));\n    }\n    modules[name] = module;\n};\n\nfunction Component(name, params){\n    if (instance[name]) return instance[name];\n    return (instance[name] = newModule(name, params));\n}\n\nComponent.get = function (name, params) {\n    return newModule(name, params);\n};\n\nComponent.add = function (name, module) {\n    addModule(name, module);\n    return this;\n};\n\n\nmodule.exports = Component;\n\n},{}],5:[function(require,module,exports){\nexports.GooglePayApi = 'https://pay.google.com/gp/p/js/pay.js';\n\nexports.GoogleBaseRequest = {\n    'apiVersion': 2,\n    'apiVersionMinor': 0,\n    'allowedPaymentMethods': [\n        {\n            'type': 'CARD',\n            'parameters': {\n                'allowedAuthMethods': [\"PAN_ONLY\", \"CRYPTOGRAM_3DS\"],\n                'allowedCardNetworks': ['AMEX', 'DISCOVER', 'INTERAC', 'JCB', 'MASTERCARD', 'VISA']\n            }\n        }\n    ]\n};\n\nexports.GooglePayLanguages = [\n    'ar',\n    'bg',\n    'ca',\n    'zh',\n    'hr',\n    'cs',\n    'da',\n    'nl',\n    'en',\n    'et',\n    'fi',\n    'fr',\n    'de',\n    'el',\n    'id',\n    'it',\n    'ja',\n    'ko',\n    'ms',\n    'no',\n    'pl',\n    'pt',\n    'ru',\n    'sr',\n    'sk',\n    'sl',\n    'es',\n    'sv',\n    'th',\n    'tr',\n    'uk'\n];\n\nexports.PaymentRequestMethods = [\n    ['google', {\n        'supportedMethods': ['https://google.com/pay'],\n        'data': exports.GoogleBaseRequest\n    }],\n    ['apple', {'supportedMethods': ['https://apple.com/apple-pay']}],\n    ['card', {'supportedMethods': ['basic-card']}]\n];\n\nexports.PaymentRequestDetails = {\n    'total': {\n        'label': 'Total',\n        'amount': {\n            'currency': 'USD',\n            'value': '0.00'\n        }\n    }\n};\n\nexports.ApiFrameCss = {\n    'width': '1px !important',\n    'height': '1px !important',\n    'left': '1px !important',\n    'bottom': '1px !important',\n    'position': 'fixed !important',\n    'border': '0px !important'\n};\n\nexports.ButtonFrameCss = {\n    'border': 'none !important',\n    'margin': '0 !important',\n    'padding': '0 !important',\n    'display': 'block !important',\n    'width': '1px !important',\n    'min-width': '100% !important',\n    'background': 'transparent !important',\n    'position': 'relative !important',\n    'opacity': '0 !important',\n    'overflow': 'hidden !important',\n    'height': '100% !important',\n    'outline': 'none !important',\n    'z-index':'1 !important'\n};\n\nexports.ButtonFrameAttrs = {\n    'tabindex':'-1',\n    'scrolling': 'no',\n    'frameborder': 0,\n    'allowtransparency': true,\n    'allowpaymentrequest': true\n};\n\nexports.ButtonCoverCss = {\n    'z-index':'2 !important',\n    'position':'absolute !important',\n    'left':'0 !important',\n    'top':'0 !important',\n    'cursor':'pointer !important',\n    'outline': 'none !important',\n    'width':'100% !important',\n    'height':'100% !important'\n};\n\nexports.ButtonCoverAttrs = {\n    'tabindex':'0',\n    'href':'javascript:void(0)'\n};\n\nexports.ButtonContainerCss = {\n    'border': '0 !important',\n    'margin': '0 !important',\n    'padding': '0 !important',\n    'display': 'block !important',\n    'background': 'transparent !important',\n    'overflow': 'hidden !important',\n    'position': 'relative !important',\n    'opacity': '1 !important',\n    'height': '0 !important',\n    'outline': 'none !important'\n};\n\nexports.ButtonDefaultColor = 'dark';\n\nexports.ButtonColorMap = {\n    'dark': 'dark',\n    'light': 'light',\n    'black': 'dark',\n    'white': 'light'\n}\n\nexports.ButtonLabelMap = {\n    'ar':'',\n    'bg':'',\n    'ca':'',\n    'zh':'',\n    'hr':'',\n    'cs':'',\n    'da':'',\n    'nl':'',\n    'en':'Pay with',\n    'et':'',\n    'es':'Comprar con',\n    'el':'',\n    'fi':'',\n    'fr':'Acheter avec',\n    'de':'Zahlen über',\n    'id':'',\n    'it':'Acquista con',\n    'ja':'',\n    'ko':'',\n    'ms':'',\n    'no':'',\n    'pl':'Zapłać przez',\n    'pt':'',\n    'ru':'Оплатить через',\n    'sr':'',\n    'sk':'Zaplatiť cez',\n    'sl':'',\n    'sv':'',\n    'th':'',\n    'tr':'',\n    'uk':'Оплатити через'\n}\n\n},{}],6:[function(require,module,exports){\nvar Module = require('./module');\n/**\n * @type {ClassObject}\n * @extends {Module}\n */\nvar Connector = Module.extend({\n    'ns': 'crossDomain',\n    'origin': '*',\n    'uniqueId': 1,\n    'signature': null,\n    'init': function (params) {\n        this.setTarget(params.target);\n        this.setOrigin(params.origin);\n        this.create();\n    },\n    'create': function () {\n        this.addEvent(window, 'message', 'router');\n    },\n    'setOrigin': function(origin){\n        this.origin = origin || '*';\n    },\n    'setTarget': function (target) {\n        this.target = target;\n        return this;\n    },\n    'getUID': function () {\n        return ++this.uniqueId;\n    },\n    'destroy': function () {\n        this.removeEvent(window, 'message', 'router');\n        this._super();\n    },\n    'router': function (window, ev, response) {\n        if (this.target !== ev.source) return false;\n        try {\n            response = JSON.parse(ev.data);\n        } catch (e) {\n        }\n        if (response && response.action && response.data) {\n            if( response.action === 'pay' ) {\n                console.log(JSON.stringify(ev))\n            }\n            this.trigger(response.action, response.data);\n        }\n    },\n    'send': function (action, data, request, options) {\n        if(!this.target){\n            return;\n        }\n        request = JSON.stringify({\n            action: action,\n            data: data\n        });\n        options = {\n            targetOrigin: this.origin,\n            delegate: 'payment'\n        }\n        try{\n            this.target.postMessage(request,options);\n        } catch(e) {\n            this.target.postMessage(request,this.origin,[]);\n        }\n    }\n});\n\n\nmodule.exports = Connector;\n\n},{\"./module\":12}],7:[function(require,module,exports){\nvar Utils = require('./utils');\n\nvar PENDING = 0;\nvar RESOLVED = 1;\nvar REJECTED = 2;\n\nfunction isArray(value) {\n    return Utils.isArray(value);\n}\n\nfunction isFunction(value) {\n    return Utils.isFunction(value);\n}\n\nfunction forEach(list, callback, context) {\n    var i = 0;\n    if (list) {\n        if (isArray(list)) {\n            for (; i < list.length; i++) {\n                callback.call(context, list[i]);\n            }\n        } else {\n            callback.call(context, list);\n        }\n    }\n}\n\n/**\n * @name Deferred\n * @param [fn]\n * @return {Deferred}\n */\nfunction Deferred(fn) {\n    var status = PENDING;\n    var doneFuncs = [];\n    var failFuncs = [];\n    var progressFuncs = [];\n    var resultArgs = null;\n    /**\n     * @lends Deferred.prototype\n     */\n    var promise = {\n        done: function () {\n            for (var i = 0; i < arguments.length; i++) {\n                if (!arguments[i]) {\n                    continue;\n                }\n                forEach(arguments[i], function (callback) {\n                    if (status === RESOLVED) {\n                        callback.apply(this, resultArgs);\n                    }\n                    doneFuncs.push(callback);\n                }, this);\n            }\n            return this;\n        },\n        fail: function () {\n            for (var i = 0; i < arguments.length; i++) {\n                if (!arguments[i]) {\n                    continue;\n                }\n                forEach(arguments[i], function (callback) {\n                    if (status === REJECTED) {\n                        callback.apply(this, resultArgs);\n                    }\n                    failFuncs.push(callback);\n                }, this);\n            }\n            return this;\n        },\n        always: function () {\n            return this.done.apply(this, arguments).fail.apply(this, arguments);\n        },\n        progress: function () {\n            for (var i = 0; i < arguments.length; i++) {\n                if (!arguments[i]) {\n                    continue;\n                }\n                forEach(arguments[i], function (callback) {\n                    if (status === PENDING) {\n                        progressFuncs.push(callback);\n                    }\n                }, this);\n            }\n            return this;\n        },\n        then: function () {\n            if (arguments.length > 1 && arguments[1]) {\n                this.fail(arguments[1]);\n            }\n            if (arguments.length > 0 && arguments[0]) {\n                this.done(arguments[0]);\n            }\n            if (arguments.length > 2 && arguments[2]) {\n                this.progress(arguments[2]);\n            }\n            return this;\n        },\n        promise: function (object) {\n            var prop;\n            if (object === null) {\n                return promise;\n            }\n            for (prop in promise) {\n                if (promise.hasOwnProperty(prop)) {\n                    object[prop] = promise[prop];\n                }\n            }\n            return object;\n        },\n        state: function () {\n            return status;\n        },\n        isPending: function () {\n            return status === PENDING;\n        },\n        isRejected: function () {\n            return status === REJECTED;\n        },\n        isResolved: function () {\n            return status === RESOLVED;\n        }\n    };\n    /**\n     * @lends Deferred.prototype\n     */\n    var deferred = {\n        resolveWith: function (context) {\n            if (status === PENDING) {\n                status = RESOLVED;\n                var args = resultArgs = (arguments.length > 1) ? arguments[1] : [];\n                for (var i = 0; i < doneFuncs.length; i++) {\n                    doneFuncs[i].apply(context, args);\n                }\n            }\n            return this;\n        },\n        rejectWith: function (context) {\n            if (status === PENDING) {\n                status = REJECTED;\n                var args = resultArgs = (arguments.length > 1) ? arguments[1] : [];\n                for (var i = 0; i < failFuncs.length; i++) {\n                    failFuncs[i].apply(context, args);\n                }\n            }\n            return this;\n        },\n        notifyWith: function (context) {\n            if (status === PENDING) {\n                var args = resultArgs = (arguments.length > 1) ? arguments[1] : [];\n                for (var i = 0; i < progressFuncs.length; i++) {\n                    progressFuncs[i].apply(context, args);\n                }\n            }\n            return this;\n        },\n        resetState: function(){\n            status = PENDING;\n            return this;\n        },\n        resolve: function () {\n            return this.resolveWith(this, arguments);\n        },\n        reject: function () {\n            return this.rejectWith(this, arguments);\n        },\n        notify: function () {\n            return this.notifyWith(this, arguments);\n        }\n    };\n    var obj = promise.promise(deferred);\n    if (isFunction(fn)) {\n        fn.call(obj, obj);\n    }\n    return obj;\n}\n\n\nmodule.exports = Deferred;\n\n},{\"./utils\":18}],8:[function(require,module,exports){\nvar Class = require('./class');\n/**\n * @type {ClassObject}\n * @extends {Class}\n */\nvar Event = Class.extend({\n    'init': function () {\n        this.events = {};\n        this.empty = [];\n    },\n    'on': function (type, callback) {\n        (this.events[type] = this.events[type] || []).push(callback);\n        return this;\n    },\n    'off': function (type, callback) {\n        type || (this.events = {});\n        var list = this.events[type] || this.empty,\n            i = list.length = callback ? list.length : 0;\n        while (i--) callback === list[i][0] && list.splice(i, 1);\n        return this;\n    },\n    'trigger': function (type) {\n        var e = this.events[type] || this.empty,\n            list = e.length > 0 ? e.slice(0, e.length) : e,\n            i = 0, j;\n        while ((j = list[i++])) j.apply(j, this.empty.slice.call(arguments, 1));\n        return this;\n    }\n});\n\nmodule.exports = Event;\n\n},{\"./class\":3}],9:[function(require,module,exports){\nvar Deferred = require('../deferred');\nvar Module = require('../module');\nvar config = require('../config');\n\nvar GooglePay = Module.extend({\n    'id': 'google-payments-api',\n    'init': function () {\n        this.client = null;\n        this.wrapper = this.utils.querySelector('head');\n        this.defer = Deferred();\n    },\n    'load': function () {\n        if (this.utils.getPath('google.payments.api.PaymentsClient')) {\n            return this.defer.resolveWith(this);\n        }\n        if (this.utils.querySelector('#'.concat(this.id))) {\n            return this.defer;\n        }\n        this.script = this.utils.createElement('script');\n        this.addAttr(this.script, {\n            id: this.id,\n            async: true,\n            src: config.GooglePayApi\n        });\n        this.utils.isElement(this.wrapper) && this.wrapper.appendChild(this.script);\n        this.addEvent(this.script, 'load', 'onLoadSuccess');\n        this.addEvent(this.script, 'error', 'onLoadError');\n        return this.defer;\n    },\n    'show': function (methods) {\n        var method = methods.find(function (item) {\n            return item.supportedMethods === 'https://google.com/pay';\n        });\n        var client = this.getClient({environment: method.data.environment});\n        return client.loadPaymentData(method.data);\n    },\n    'readyToPay': function (cx, response) {\n        if (response.result) {\n            this.defer.resolveWith(this);\n        }\n    },\n    'onError': function (cx, error) {\n        this.defer.rejectWith(this, error);\n    },\n    'onLoadSuccess': function () {\n        this.getClient().isReadyToPay(config.GoogleBaseRequest)\n            .then(this.proxy('readyToPay'))\n            .catch(this.proxy('onError'));\n    },\n    'onLoadError': function () {\n        this.defer.rejectWith(this);\n    },\n    'getClient': function (options) {\n        if( options || this.client === null ) {\n            var PaymentClient = this.utils.getPath('google.payments.api.PaymentsClient');\n            if (PaymentClient) {\n                this.client = new PaymentClient(options);\n            } else {\n                this.onError(null, new Error('Google Client Error'));\n            }\n        }\n        return this.client;\n    }\n});\n\nmodule.exports = new GooglePay;\n\n},{\"../config\":5,\"../deferred\":7,\"../module\":12}],10:[function(require,module,exports){\nvar Module = require('./module');\nvar Connector = require('./connector');\nvar Template  = require('./template');\n/**\n * @type {ClassObject}\n * @extends {Module}\n */\nvar Modal = Module.extend({\n    'init': function (data) {\n        this.checkout = data.checkout;\n        this.model    = data.model || {};\n        this.messages = data.checkout.params.messages || {};\n        this.template = new Template('3ds.ejs');\n        this.body = this.utils.querySelector('body');\n        this.initModal();\n        this.initConnector();\n    },\n    'initModal': function () {\n        this.name = ['modal-iframe', this.getRandomNumber()].join('-');\n        this.modal = this.utils.createElement('div');\n        this.modal.innerHTML = this.template.render({\n            model: this.model,\n            messages: this.messages\n        });\n        this.iframe = this.find('.ipsp-modal-iframe');\n        this.addAttr(this.iframe, {name: this.name, id: this.name});\n        if (this.model['send_data']) {\n            this.form = this.prepareForm(this.model['url'], this.model['send_data'], this.name);\n            this.modal.appendChild(this.form);\n        } else {\n            this.iframe.src = this.model['url'];\n        }\n        this.addEvent(this.find('.ipsp-modal-close'), 'click', 'closeModal');\n        this.addEvent(this.find('.ipsp-modal-title a'), 'click', 'submitForm');\n        this.initScrollbar();\n        this.body.appendChild(this.modal);\n        if (this.form) {\n            this.form.submit();\n        }\n    },\n    'measureScrollbar': function () {\n        var width;\n        var scrollDiv = document.createElement('div');\n        scrollDiv.className = 'modal-scrollbar-measure';\n        this.body.appendChild(scrollDiv);\n        width = scrollDiv.offsetWidth - scrollDiv.clientWidth;\n        this.utils.removeElement(scrollDiv);\n        return width;\n    },\n    'checkScrollbar': function () {\n        var documentElementRect;\n        var fullWindowWidth = window.innerWidth;\n        if (!fullWindowWidth) {\n            documentElementRect = document.documentElement.getBoundingClientRect();\n            fullWindowWidth = documentElementRect.right - Math.abs(documentElementRect.left);\n        }\n        this.bodyIsOverflowing = document.body.clientWidth < fullWindowWidth;\n        this.scrollbarWidth = this.measureScrollbar()\n    },\n    'initScrollbar': function () {\n        this.checkScrollbar();\n        this.bodyPad = parseInt(this.utils.getStyle(this.body, 'padding-right') || 0, 10);\n        this.originalBodyPad = document.body.style.paddingRight || '';\n        this.originalOverflow = document.body.style.overflow || '';\n        if (this.bodyIsOverflowing) {\n            this.addCss(this.body, {\n                'paddingRight': [this.bodyPad + this.scrollbarWidth, 'px'].join(''),\n                'overflow': 'hidden'\n            });\n        }\n    },\n    'resetScrollbar': function () {\n        this.addCss(this.body, {\n            'paddingRight': this.originalBodyPad ? [this.originalBodyPad, 'px'].join('') : '',\n            'overflow': this.originalOverflow\n        });\n    },\n    'getRandomNumber': function () {\n        return Math.round(Math.random() * 1000000000);\n    },\n    'find': function (selector) {\n        return this.utils.querySelector(selector, this.modal);\n    },\n    'closeModal': function (el, ev) {\n        ev.preventDefault();\n        this.trigger('close', this.data);\n        this.removeModal();\n    },\n    'submitForm': function (el, ev) {\n        ev.preventDefault();\n        this.trigger('submit', this.data);\n        this.addAttr(this.form,{\n            target: '_blank'\n        });\n        this.form.submit();\n    },\n    'removeModal': function () {\n        this.destroy();\n    },\n    'destroy': function () {\n        this.utils.removeElement(this.modal);\n        this.resetScrollbar();\n        this.connector.destroy();\n        this._super();\n    },\n    'initConnector': function () {\n        this.connector = new Connector({target: this.iframe.contentWindow});\n        this.connector.on('response', this.proxy('onResponse'));\n    },\n    'onResponse': function (ev, data) {\n        this.sendResponse(data);\n        this.removeModal();\n    },\n    'sendResponse': function (data) {\n        this.checkout.connector.send('request', {\n            uid: data.uid,\n            action: 'api.checkout.proxy',\n            method: 'send',\n            params: data\n        });\n    }\n});\n\nmodule.exports = Modal;\n\n},{\"./connector\":6,\"./module\":12,\"./template\":17}],11:[function(require,module,exports){\nvar Module = require('./module');\n/**\n * @type {ClassObject}\n * @extends {Module}\n */\nvar Model = Module.extend({\n    'init': function (data) {\n        this.data = data || {};\n        this.create();\n    },\n    'create': function () {\n\n    },\n    'eachProps': function(args){\n        var name = args[1] ? args[0] : null;\n        var callback = args[1] ? args[1] : args[0];\n        var list = name ? this.alt(name, []) : this.data;\n        return {\n            list: list,\n            callback: callback\n        }\n    },\n    'each': function () {\n        var prop;\n        var props = this.eachProps(arguments);\n        for (prop in props.list) {\n            if (props.list.hasOwnProperty(prop)) {\n                props.callback(this.instance(props.list[prop]), props.list[prop], prop)\n            }\n        }\n    },\n    'filter': function(){\n        var item,prop;\n        var props = this.eachProps(arguments);\n        for (prop in props.list) {\n            if (props.list.hasOwnProperty(prop)) {\n                item   = this.instance(props.list[prop]);\n                if( props.callback(item, props.list[prop], prop) ){\n                    return props.list[prop];\n                }\n            }\n        }\n    },\n    /**\n     *\n     * @return {boolean|Model}\n     */\n    'find': function(){\n        var item,prop;\n        var props = this.eachProps(arguments);\n        for (prop in props.list) {\n            if (props.list.hasOwnProperty(prop)) {\n                item   = this.instance(props.list[prop]);\n                if( props.callback(item, props.list[prop], prop) ){\n                    return item;\n                }\n            }\n        }\n        return false;\n    },\n    'alt': function (prop, defaults) {\n        prop = this.attr(prop);\n        return typeof (prop) === 'undefined' ? defaults : prop;\n    },\n    'attr': function (key, value) {\n        var i = 0,\n            data = this.data,\n            name = (key || '').split('.'),\n            prop = name.pop(),\n            len = arguments.length;\n        for (; i < name.length; i++) {\n            if (data && data.hasOwnProperty(name[i])) {\n                data = data[name[i]];\n            } else {\n                if (len === 2) {\n                    data = (data[name[i]] = {});\n                } else {\n                    break;\n                }\n            }\n        }\n        if (len === 1) {\n            return data ? data[prop] : undefined;\n        }\n        if (len === 2) {\n            data[prop] = value;\n        }\n        return this;\n    },\n    'stringify': function () {\n        return JSON.stringify(this.serialize());\n    },\n    'serialize': function () {\n        return this.data;\n    }\n});\n\n\nmodule.exports = Model;\n\n},{\"./module\":12}],12:[function(require,module,exports){\nvar Class = require('./class');\nvar Event = require('./event');\nvar Utils = require('./utils');\n/**\n * @type {ClassObject}\n * @extends {Class}\n */\nvar Module =  Class.extend({\n    'utils': Utils,\n    'getListener': function () {\n        if (!this._listener_) this._listener_ = new Event();\n        return this._listener_;\n    },\n    'destroy': function () {\n        this.off();\n    },\n    'on': function (type, callback) {\n        this.getListener().on(type, callback);\n        return this;\n    },\n    'off': function (type, callback) {\n        this.getListener().off(type, callback);\n        return this;\n    },\n    'proxy': function (fn) {\n        if (!this._proxy_cache_) this._proxy_cache_ = {};\n        if (this.utils.isString(fn)) {\n            if (!this._proxy_cache_[fn]) {\n                this._proxy_cache_[fn] = this._super(fn);\n            }\n            return this._proxy_cache_[fn];\n        }\n        return this._super(fn);\n    },\n    'trigger': function () {\n        this.getListener().trigger.apply(this.getListener(), arguments);\n        return this;\n    },\n    'each': function (ob, cb) {\n        this.utils.forEach(ob, this.proxy(cb));\n    },\n    'addAttr': function (el, ob) {\n        if (!this.utils.isElement(el)) return false;\n        this.utils.forEach(ob, function (v, k) {\n            el.setAttribute(k, v);\n        });\n    },\n    'addCss': function (el, ob) {\n        if (!this.utils.isElement(el)) return false;\n        this.utils.forEach(ob, function (v, k) {\n            this.addCssProperty(el, k, v);\n        }, this);\n    },\n    'addCssProperty': function (el, style, value) {\n        var result = el.style.cssText.match(new RegExp(\"(?:[;\\\\s]|^)(\" +\n            style.replace(\"-\", \"\\\\-\") + \"\\\\s*:(.*?)(;|$))\")),\n            idx;\n        if (result) {\n            idx = result.index + result[0].indexOf(result[1]);\n            el.style.cssText = el.style.cssText.substring(0, idx) +\n                style + \": \" + value + \";\" +\n                el.style.cssText.substring(idx + result[1].length);\n        } else {\n            el.style.cssText += \" \" + style + \": \" + value + \";\";\n        }\n    },\n    'addEvent': function (el, ev, cb) {\n        if (!el || !ev || !cb) return false;\n        cb = this.proxy(cb);\n        if (el.addEventListener) el.addEventListener(ev, cb);\n        else if (el['attachEvent']) el['attachEvent']('on' + ev, cb);\n    },\n    'removeEvent': function (el, ev, cb) {\n        if (!el || !ev || !cb) return false;\n        cb = this.proxy(cb);\n        if (el.removeEventListener) el.removeEventListener(ev, cb, false);\n        else if (el['detachEvent']) el['detachEvent']('on' + ev, cb);\n    },\n    'prepareForm': function (url, data, target, method) {\n        var form = this.utils.createElement('form');\n        this.addAttr(form, {\n            'action': url,\n            'target': target || '_self',\n            'method': method || 'POST'\n        });\n        this.addCss(form, {\n            'display': 'none'\n        });\n        this.utils.forEach(data, function (v, k, el) {\n            el = this.utils.createElement('input');\n            el.type = 'hidden';\n            el.name = k;\n            el.value = v;\n            form.appendChild(el);\n        }, this);\n        return form;\n    }\n});\n\nmodule.exports = Module;\n\n},{\"./class\":3,\"./event\":8,\"./utils\":18}],13:[function(require,module,exports){\nvar Config = require('../config');\nvar Module    = require('../module');\nvar Api       = require('../api');\nvar Connector = require('../connector');\nvar Response  = require('../response');\nvar Deferred = require('../deferred');\nvar Request   = require('./request');\nvar GooglePay = require('../google/pay')\n\n/**\n * @type {ClassObject}\n * @extends {Module}\n */\nvar Button = Module.extend({\n    'defaults': {\n        origin: 'https://api.fondy.eu',\n        endpoint: {\n            gateway: '/checkout/v2/index.html',\n            button: '/checkout/v2/button/index.html'\n        },\n        style: {\n            height: 38,\n            mode: 'default',\n            type: 'long',\n            color: 'black'\n        },\n        data: {}\n    },\n    'init': function (params) {\n        this.initParams(params);\n        this.initElement();\n        this.initEvents();\n        this.initApi();\n        this.initFrame();\n        this.initPaymentRequest();\n    },\n    'initParams': function (params) {\n        this.supported = false;\n        this.params = this.utils.extend({},this.defaults, params);\n    },\n    'initApi': function () {\n        if(this.params.api instanceof Api){\n            this.api = this.params.api;\n            delete this.params['api'];\n        } else {\n            this.api = new Api({\n                origin:this.params.origin,\n                endpoint: this.params.endpoint\n            });\n        }\n    },\n    'endpointUrl': function (type, url) {\n        return [this.params.origin, this.params.endpoint[type] || '/', url || ''].join('');\n    },\n    'initElement': function () {\n        this.element = this.utils.querySelector(this.params.element);\n        this.container = this.utils.createElement('div');\n        this.cover = this.utils.createElement('a');\n        this.addCss(this.cover,Config.ButtonCoverCss);\n        this.addAttr(this.cover,Config.ButtonCoverAttrs)\n        this.addCss(this.container,Config.ButtonContainerCss);\n        this.element.appendChild(this.container);\n    },\n    'sendButtonEvent': function(cx,ev){\n        ev.preventDefault();\n        this.connector.send('event',{type:ev.type});\n    },\n    'initEvents': function(){\n        this.addEvent(this.cover, 'mouseenter', 'sendButtonEvent');\n        this.addEvent(this.cover, 'mouseleave', 'sendButtonEvent');\n        this.addEvent(this.cover, 'blur', 'sendButtonEvent');\n        this.addEvent(this.cover, 'focus', 'sendButtonEvent');\n        this.addEvent(this.cover, 'click', 'onClick');\n    },\n    'initPaymentRequest': function () {\n        this.payment = new Request({});\n        this.payment.on('complete', this.proxy('onToken'));\n        this.payment.on('error', this.proxy('onError'));\n        this.payment.on('log', this.proxy('onLog'));\n        this.payment.on('supported', this.proxy('onSupported'));\n        this.payment.on('fallback', this.proxy('onFallback'));\n        this.payment.on('reload', this.proxy('onReload'));\n        this.payment.setApi(this.api);\n        this.payment.setMerchant(this.params.data.merchant_id);\n        this.payment.getSupportedMethod();\n    },\n    'initFrame': function () {\n        this.frameLoaded = Deferred();\n        this.frame = this.utils.createElement('iframe');\n        this.addCss(this.frame,Config.ButtonFrameCss);\n        this.addAttr(this.frame,Config.ButtonFrameAttrs);\n        this.addAttr(this.frame, {\n            src: this.endpointUrl('button')\n        });\n        this.container.appendChild(this.frame);\n        this.container.appendChild(this.cover);\n        this.initConnector();\n        this.addEvent(this.frame, 'load', function () {\n            this.frameLoaded.resetState().resolve();\n        });\n    },\n    'onFrameLoaded': function(){\n        this.update({});\n    },\n    'onFallback': function(){\n        this.fallback = true;\n        GooglePay.load().then(this.proxy(function(){\n            this.onSupported(null, 'google');\n        }));\n    },\n    'onSupported': function(cx, method){\n        this.supported = true;\n        this.method = method;\n        this.frameLoaded.done(this.proxy('onFrameLoaded'));\n    },\n    'initConnector': function () {\n        this.connector = new Connector({\n            target: this.frame.contentWindow,\n            origin: this.params.origin\n        });\n        this.connector.on('show', this.proxy('onShow'));\n        this.connector.on('hide', this.proxy('onHide'));\n        this.connector.on('log', this.proxy('onLog'));\n        this.connector.on('pay', this.proxy('onPay'));\n        this.connector.on('complete', this.proxy('onToken'));\n        this.connector.on('error', this.proxy('onError'));\n        this.connector.on('reload', this.proxy('onReload'));\n    },\n    'getConfigParams': function (data) {\n        var params = {method: this.method, data: {}, style: {} , fallback: this.fallback};\n        this.utils.extend(params.data, this.params.data);\n        this.utils.extend(params.style, this.params.style);\n        if (this.utils.isPlainObject(data)) {\n            this.utils.extend(params,data);\n        }\n        return params;\n    },\n    'send': function(action,data){\n        if( this.supported === true ){\n            this.connector.send(action,data);\n        }\n        return this;\n    },\n    'update': function (params) {\n        this.sendOptions(params);\n        this.api.scope(this.proxy(function(){\n            this.api.request('api.checkout.pay','get',this.params.data)\n                .done(this.proxy('sendConfig'))\n                .fail(this.proxy('sendConfig'));\n        }));\n    },\n    'sendOptions': function(params){\n        this.utils.extend(this.params,this.getConfigParams(params));\n        this.send('options',this.params);\n    },\n    'sendConfig': function(cx,model){\n        this.model = model;\n        this.model.supportedMethod(this.method);\n        this.payment.setConfig(this.model.data);\n        this.send('config',this.model.data);\n    },\n    'callback': function (model) {\n        var params = this.utils.extend({}, this.params.data, model.serialize());\n        this.api.scope(this.proxy(function(){\n            this.api.request('api.checkout.form','request',params)\n                .done(this.proxy('onSuccess'))\n                .fail(this.proxy('onError'));\n        }));\n    },\n    'process': function (callback) {\n        this.callback = callback;\n        return this;\n    },\n    'validate': function(callback){\n        this.validateCallback = (function(context){\n            return function(resolve){\n                if( context.validationProgress === true ) return false;\n                context.validationProgress = true;\n                callback(function(){\n                    context.validationProgress = false;\n                    resolve.call(context);\n                });\n            }\n        })(this);\n    },\n    'click': function(){\n        this.onClick();\n    },\n    'cssUnit': function (value, unit) {\n        return String(value || 0).concat(unit || '').concat(' !important')\n    },\n    'onClick': function () {\n        if( this.validateCallback ){\n            this.validateCallback(function(){\n                this.sendPay();\n            });\n        } else {\n            this.sendPay();\n        }\n    },\n    'sendPay': function(){\n        if( this.fallback === true ) {\n             GooglePay.show(this.model.data.methods).then(this.proxy(function(cx,details){\n                 this.callback(new Response({\n                     payment_system: this.model.data.payment_system,\n                     data: details\n                 }));\n             })).catch(this.proxy(function(cx,error){\n                 this.trigger('error', {code: error.code, message: error.message});\n             }));\n        } else {\n            this.send('pay',{});\n        }\n    },\n    'onToken': function (c, data) {\n        this.callback(new Response(data));\n    },\n    'onSuccess': function (c, data) {\n        this.trigger('success', data);\n    },\n    'onError': function (c, data) {\n        this.trigger('error', data);\n    },\n    'onReload': function(c,data){\n        this.trigger('reload', data);\n    },\n    'onShow': function () {\n        this.addCss(this.frame, {\n            'transition': 'opacity 0.6s 0.4s ease-out',\n            'opacity': this.cssUnit(1)\n        });\n        this.addCss(this.container, {\n            'transition': 'height 0.2s ease-out',\n            'height': this.cssUnit(this.params.style.height, 'px')\n        });\n        this.trigger('show', {});\n    },\n    'onHide': function () {\n        this.addCss(this.frame, {\n            'transition': 'opacity 0.4s ease-out',\n            'opacity': this.cssUnit(0)\n        });\n        this.addCss(this.container, {\n            'transition': 'height 0.2s 0.4s ease-out',\n            'height': this.cssUnit(0, 'px')\n        });\n        this.trigger('hide', {});\n    },\n    'onLog': function (c, result) {\n        this.trigger('log',{\n            event: 'log',\n            result: result\n        });\n    },\n    'onPay': function (c, data) {\n        this.payment.setConfig(data);\n        this.payment.pay();\n    }\n});\n\nmodule.exports = Button;\n\n},{\"../api\":2,\"../config\":5,\"../connector\":6,\"../deferred\":7,\"../google/pay\":9,\"../module\":12,\"../response\":16,\"./request\":15}],14:[function(require,module,exports){\nvar Config = require('../config');\nvar Module = require('../module');\nvar Connector = require('../connector');\nvar Request = require('./request');\n\n/**\n * @type {ClassObject}\n * @extends {Module}\n */\nvar Container = Module.extend({\n    'defaults': {\n        element: null,\n        method: 'card',\n        data: {\n            lang: 'en'\n        },\n        style: {}\n    },\n    'init': function (params) {\n        this.initParams(params);\n        this.initEvents();\n    },\n    'initParams': function (params) {\n        this.params = this.utils.extend({}, this.defaults, params);\n        this.element = this.utils.querySelector(this.params.element);\n        this.connector = new Connector({target: window.parent});\n        this.payment   = new Request({\n            embedded: true\n        });\n    },\n    'extendParams': function (params) {\n        this.utils.extend(this.params, {\n            method: params.method,\n            style: params.style,\n            data: params.data,\n            css: params.css\n        });\n    },\n    'getGoogleLangSupport': function (lang, defaults) {\n        return Config.GooglePayLanguages.indexOf(lang) !== -1 ? lang : defaults;\n    },\n    'getButtonColor': function(color){\n        return Config.ButtonColorMap[color] || Config.ButtonDefaultColor;\n    },\n    'getGoogleSvg': function (color, lang, mode) {\n        var format = 'url(\"{endpoint}/{color}/{mode}/{lang}.svg\")';\n        var params = {\n            endpoint: 'https://www.gstatic.com/instantbuy/svg',\n            color: this.getButtonColor(color),\n            mode: mode || 'plain',\n            lang: lang || 'en'\n        };\n        if (mode === 'plain') {\n            format = 'url(\"{endpoint}/{color}_gpay.svg\")';\n        }\n        if (mode === 'buy') {\n            format = 'url(\"{endpoint}/{color}/{lang}.svg\")';\n        }\n        return this.utils.stringFormat(format, params)\n    },\n    'getAppleSvg': function (color, lang, mode) {\n        var format = 'url(\"svg/apple-pay-{color}.svg\")';\n        var params = {\n            color: this.getButtonColor(color)\n        };\n        return this.utils.stringFormat(format, params);\n    },\n    'getAppleLabel': function (lang) {\n        return Config.ButtonLabelMap[lang || 'en'];\n    },\n    'addFrameImage': function () {\n        var frame = this.utils.querySelector('iframe', this.element) || this.utils.createElement('iframe');\n        var url = 'https://pay.google.com/gp/p/generate_gpay_btn_img';\n        var style = this.params.style || {};\n        var lang = this.getGoogleLangSupport(this.params.data.lang, 'en');\n        var query = {\n            buttonColor: style.color || 'black',\n            browserLocale: lang,\n            buttonSizeMode: 'fill'\n        };\n        var src = [url, this.utils.param(query)].join('?');\n        this.addAttr(frame, {\n            'scrolling': 'no',\n            'frameborder': 0,\n            'src': src\n        });\n        this.element.appendChild(frame);\n        this.element.classList.remove('short', 'long');\n    },\n    'styleButton': function () {\n        var element = this.element;\n        var params = this.params;\n        var method = params.method;\n        var style = params.style || {};\n        var lang = params.data.lang || 'en';\n        var css = params.css || {};\n        element.setAttribute('class', '');\n        element.classList.add('button','pending');\n        if (method === 'card') method = 'google';\n        if (method) {\n            element.classList.add(method);\n        }\n        if (lang) {\n            element.classList.add(lang);\n        }\n        if (style.type) {\n            element.classList.add(style.type);\n        }\n        if (style.mode) {\n            element.classList.add(style.mode);\n        }\n        if (style.color) {\n            element.classList.add(style.color);\n        }\n        if (method === 'google') {\n            if (style.type === 'short') {\n                style.mode = 'plain';\n            }\n            if (style.mode === 'default') {\n                this.addFrameImage();\n            } else {\n                css.image = this.getGoogleSvg(style.color, lang, style.mode);\n            }\n        }\n        if (method === 'apple') {\n            css.image = this.getAppleSvg(style.color);\n            css.label = this.getAppleLabel(lang, style.mode);\n        }\n        if (css) {\n            this.utils.forEach(css, function (value, name) {\n                element.style.setProperty(['--', name].join(''), value);\n            });\n        }\n    },\n    'initEvents': function () {\n        this.payment.on('complete', this.proxy(function (cx, data) {\n            this.connector.send('complete',data);\n        }));\n        this.payment.on('reload', this.proxy(function (cx, data) {\n            this.connector.send('reload',data);\n        }));\n        this.payment.on('error', this.proxy(function (cx, data) {\n            this.connector.send('error',data);\n        }));\n        this.connector.on('options', this.proxy(function (cx, data) {\n            this.extendParams(data);\n            this.styleButton();\n        }));\n        this.connector.on('pay', this.proxy(function () {\n            if (!this.element.classList.contains('pending')) {\n                if (this.params.method === 'apple') {\n                    this.connector.send('pay', this.payment.config);\n                } else {\n                    this.payment.pay();\n                }\n            }\n        }));\n        this.connector.on('config', this.proxy(function (cx, data) {\n            this.payment.setConfig(data);\n            if (data.payment_system && data.methods && data.methods.length > 0) {\n                this.element.classList.remove('pending');\n                this.element.classList.add('ready');\n                this.connector.send('show', {});\n            } else {\n                this.connector.send('hide', {});\n            }\n        }));\n        this.connector.on('event', this.proxy(function (cx, data) {\n            if (data.type === 'mouseenter') {\n                this.element.classList.add('hover');\n            }\n            if (data.type === 'mouseleave') {\n                this.element.classList.remove('hover');\n            }\n            if (data.type === 'focus') {\n                this.element.classList.add('active');\n            }\n            if (data.type === 'blur') {\n                this.element.classList.remove('active');\n            }\n        }))\n    }\n});\n\nmodule.exports = Container;\n\n},{\"../config\":5,\"../connector\":6,\"../module\":12,\"./request\":15}],15:[function(require,module,exports){\nvar Api = require('../api');\nvar Module = require('../module');\nvar GooglePay = require('../google/pay')\nvar Deferred = require('../deferred');\nvar Utils = require('../utils');\nvar Config = require('../config');\n\nvar hasPaymentRequest = function () {\n    return window.hasOwnProperty('PaymentRequest') && typeof (window.PaymentRequest) === 'function'\n}\n\nvar getPaymentRequest = function (methods, details, options) {\n    var request = null;\n    options = options || {};\n    details = details || {};\n    details.id = Utils.uuid();\n    if (hasPaymentRequest()) {\n        try {\n            request = new PaymentRequest(methods, details, options);\n        } catch (e) {\n            request = null;\n        }\n    }\n    return request;\n};\n\n/**\n * @type {ClassObject}\n * @extends {Module}\n */\nvar Request = Module.extend({\n    'config': {\n        payment_system: '',\n        fallback: false,\n        methods: [],\n        details: {},\n        options: {}\n    },\n    'init': function (params) {\n        this.params = params || {};\n    },\n    'setConfig': function (config) {\n        this.config = config;\n        return this;\n    },\n    'setMerchant': function (merchant) {\n        this.merchant = merchant;\n    },\n    'setApi': function (api) {\n        if (api instanceof Api) {\n            this.api = api;\n        }\n    },\n    'isValidConfig': function(){\n        return this.config.payment_system && this.config.methods && this.config.methods.length > 0;\n    },\n    'getSupportedMethod': function () {\n        (function (module, list, index) {\n            var request, method, config;\n            var callback = arguments.callee;\n            var item = list[index] || false;\n            if (item === false) {\n                return module.trigger('fallback');\n            }\n            index = (index || 0) + 1;\n            method = item[0];\n            config = item[1];\n            request = getPaymentRequest([config], Config.PaymentRequestDetails);\n            if( request ){\n                request.canMakePayment().then(function (status) {\n                    if (status === true) {\n                        module.trigger('supported', method);\n                    } else {\n                        callback(module, list, index);\n                    }\n                });\n            } else {\n                callback(module, list, index);\n            }\n        })(this, Config.PaymentRequestMethods , 0);\n    },\n    'modelRequest': function (method, params, callback, failure) {\n        if (this.api instanceof Api) {\n            this.api.scope(this.proxy(function () {\n                this.api.request('api.checkout.pay', method, params)\n                    .done(this.proxy(callback)).fail(this.proxy(failure));\n            }));\n        }\n    },\n    'getRequest': function () {\n        var module = this;\n        var defer = Deferred();\n        var request = getPaymentRequest(\n            this.config.methods,\n            this.config.details,\n            this.config.options\n        );\n        if (request) {\n            this.addEvent(request, 'merchantvalidation', 'merchantValidation');\n            request.canMakePayment().then(function () {\n                request.show().then(function (response) {\n                    response.complete('success').then(function () {\n                        defer.resolveWith(module, [response.details])\n                    });\n                }).catch(function (e) {\n                    defer.rejectWith(module, [{code: e.code, message: e.message}]);\n                })\n            }).catch(function (e) {\n                defer.rejectWith(module, [{code: e.code, message: e.message}]);\n            });\n        } else {\n            GooglePay.load().then(this.proxy(function(){\n                GooglePay.show(this.config.methods).then(function(details){\n                    defer.resolveWith(module, [details])\n                }).catch(function(e){\n                    defer.rejectWith(module, [{code: e.code, message: e.message}]);\n                });\n            }));\n        }\n        return defer;\n    },\n    'pay': function () {\n        this.getRequest().done(function (details) {\n            this.trigger('complete', {\n                payment_system: this.config.payment_system,\n                data: details\n            });\n        }).fail(function (error) {\n            this.trigger('error', error);\n            if (this.params.embedded === true) {\n                location.reload();\n                this.trigger('reload', this.params);\n            }\n        });\n    },\n    'appleSession': function (params) {\n        var defer = Deferred();\n        this.modelRequest('session', params, function (c, model) {\n            defer.resolveWith(this, [model.serialize()]);\n        }, function (c, model) {\n            defer.rejectWith(this, [model]);\n        });\n        return defer;\n    },\n    'merchantValidation': function (cx, event) {\n        this.appleSession({\n            url: event['validationURL'],\n            domain: location['host'],\n            merchant_id: this.merchant\n        }).done(function (session) {\n            try {\n                event.complete(session.data);\n            } catch (error) {\n                this.trigger('error', error);\n            }\n        }).fail(function (error) {\n            this.trigger('error', error);\n        });\n    }\n});\n\nmodule.exports = Request;\n\n},{\"../api\":2,\"../config\":5,\"../deferred\":7,\"../google/pay\":9,\"../module\":12,\"../utils\":18}],16:[function(require,module,exports){\nvar Model = require('./model');\n/**\n * @type {ClassObject}\n * @extends {Model}\n */\n\nvar ProxyUrl = 'http://secure-redirect.cloudipsp.com/submit/';\n\n\nvar Response = Model.extend({\n    'stringFormat': function (string) {\n        var that = this;\n        return (string || '').replace(/{(.+?)}/g, function (match, prop) {\n            return that.attr(['order.order_data', prop].join('.')) || match;\n        });\n    },\n    'setConnector': function (connector) {\n        this.connector = connector;\n        return this;\n    },\n    'setUID': function (uid) {\n        this.uid = uid;\n        return this;\n    },\n    'getUID': function () {\n        return this.uid;\n    },\n    'formDataProxy': function(url, data, target, method){\n        location.assign([ProxyUrl, JSON.stringify({\n            url: url,\n            params: data,\n            target: target,\n            method: method\n        })].join('#'));\n    },\n    'formDataSubmit': function (url, data, target, method) {\n        if( url.match(/^http:/) ){\n            return this.formDataProxy(url,data,target,method);\n        }\n        var action = this.stringFormat(url);\n        var form = this.prepareForm(action, data, target, method);\n        var body = this.utils.querySelector('body');\n        body.appendChild(form);\n        form.submit();\n        form.parentNode.removeChild(form);\n    },\n    'inProgress': function () {\n        return this.attr('order.in_progress');\n    },\n    'readyToSubmit': function () {\n        return this.attr('order.ready_to_submit');\n    },\n    'waitForResponse': function () {\n        return this.attr('order.pending');\n    },\n    'needVerifyCode': function () {\n        return this.attr('order.need_verify_code');\n    },\n    'redirectUrl': function () {\n        if (this.attr('url')) {\n            this.redirectToUrl(this.attr('url'));\n            return true;\n        }\n        return false;\n    },\n    'redirectToUrl': function(url){\n        location.assign(url);\n    },\n    'submitToMerchant': function () {\n        var ready = this.attr('order.ready_to_submit');\n        var url = this.attr('model.url') || this.attr('order.response_url');\n        var method = this.attr('order.method');\n        var action = this.attr('order.action');\n        var data = this.attr('model.send_data') || this.attr('order.order_data');\n        if (action && ready && url && data) {\n            if( action === 'redirect' || data['get_without_parameters'] === true) {\n                this.redirectToUrl(url);\n                return true;\n            }\n            if( action === 'submit') {\n                this.formDataSubmit(url, data, '_self', method);\n                return true;\n            }\n        }\n    },\n    'submitForm': function () {\n        var method = this.attr('method');\n        var url = this.attr('url');\n        var data = this.attr('send_data');\n        if (url && data) {\n            this.formDataSubmit(url, data, '_self', method);\n            return true;\n        }\n        return false;\n    },\n    'sendResponse': function () {\n        var action = this.attr('action');\n        if (action === 'submit')\n            return this.submitForm();\n        if (action === 'redirect')\n            return this.redirectUrl();\n        return false;\n    },\n    'prepare3dsData': function () {\n        var params = {};\n        var data = this.attr('submit3ds');\n        if (data['3ds']) {\n            params.token = this.attr('token');\n            params.uid = this.getUID();\n            params.frame = true;\n            if (data['send_data'].TermUrl) {\n                data['send_data'].TermUrl = [\n                    data['send_data'].TermUrl,\n                    this.utils.param(params)\n                ].join('#!!');\n            }\n        }\n        return data;\n    },\n    'waitOn3dsDecline': function () {\n        var data = this.alt('submit3ds.checkout_data', {\n            js_wait_on_3ds_decline: false,\n            js_wait_on_3ds_decline_duration: 0\n        });\n        return data.js_wait_on_3ds_decline ? data.js_wait_on_3ds_decline_duration : 0;\n    },\n    'submit3dsForm': function () {\n        if (this.attr('submit3ds.checkout_data')) {\n            this.connector.trigger('modal', this.prepare3dsData());\n        }\n    },\n    'supportedMethod': function(method){\n        var item = this.find('methods',function(item){\n            return item.alt('supportedMethods','').match(method)\n        });\n        if( item ){\n            this.attr('methods',[item.serialize()])\n        } else {\n            this.attr('methods',[]);\n        }\n    }\n});\n\nmodule.exports = Response;\n\n},{\"./model\":11}],17:[function(require,module,exports){\nvar Views = require('../views');\nvar Class = require('./class');\nvar Utils = require('./utils');\n\nvar settings = {\n    evaluate: /<%([\\s\\S]+?)%>/g,\n    interpolate: /<%=([\\s\\S]+?)%>/g,\n    escape: /<%-([\\s\\S]+?)%>/g\n};\nvar noMatch = /(.)^/;\nvar escapes = {\n    \"'\": \"'\",\n    '\\\\': '\\\\',\n    '\\r': 'r',\n    '\\n': 'n',\n    '\\t': 't',\n    '\\u2028': 'u2028',\n    '\\u2029': 'u2029'\n};\nvar escaper = /\\\\|'|\\r|\\n|\\t|\\u2028|\\u2029/g;\nvar htmlEntities = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#x27;'\n};\nvar entityRe = new RegExp('[&<>\"\\']', 'g');\nvar escapeExpr = function (string) {\n    if (string == null) return '';\n    return ('' + string).replace(entityRe, function (match) {\n        return htmlEntities[match];\n    });\n};\nvar counter = 0;\nvar template = function (text) {\n    var render;\n    var matcher = new RegExp([\n        (settings.escape || noMatch).source,\n        (settings.interpolate || noMatch).source,\n        (settings.evaluate || noMatch).source\n    ].join('|') + '|$', 'g');\n    var index = 0;\n    var source = \"__p+='\";\n    text.replace(matcher, function (match, escape, interpolate, evaluate, offset) {\n        source += text.slice(index, offset).replace(escaper, function (match) {\n            return '\\\\' + escapes[match];\n        });\n        if (escape) {\n            source += \"'+\\n((__t=(\" + escape + \"))==null?'':escapeExpr(__t))+\\n'\";\n        }\n        if (interpolate) {\n            source += \"'+\\n((__t=(\" + interpolate + \"))==null?'':__t)+\\n'\";\n        }\n        if (evaluate) {\n            source += \"';\\n\" + evaluate + \"\\n__p+='\";\n        }\n        index = offset + match.length;\n        return match;\n    });\n    source += \"';\\n\";\n    if (!settings['variable']) source = 'with(obj||{}){\\n' + source + '}\\n';\n    source = \"var __t,__p='',__j=Array.prototype.join,\" +\n        \"print=function(){__p+=__j.call(arguments,'');};\\n\" +\n        source + \"return __p;\\n//# sourceURL=/tmpl/source[\" + counter++ + \"]\";\n    try {\n        render = new Function(settings['variable'] || 'obj', 'escapeExpr', source);\n    } catch (e) {\n        e.source = source;\n        throw e;\n    }\n    var template = function (data) {\n        return render.call(this, data, escapeExpr);\n    };\n    template.source = 'function(' + (settings['variable'] || 'obj') + '){\\n' + source + '}';\n    return template;\n};\n/**\n * @type {ClassObject}\n * @extends {Class}\n */\nvar Template = Class.extend({\n    'utils': Utils,\n    'init': function (name) {\n        this.name = name;\n        this.view = {};\n        this.output();\n    },\n    'output': function () {\n        this.view.source = Views[this.name];\n        this.view.output = template(this.view.source);\n    },\n    'render': function (data) {\n        this.data = data;\n        return this.view.output.call(this, this);\n    },\n    'include': function (name, data) {\n        return this.instance(name).render(this.utils.extend(this.data, data));\n    }\n});\n\nmodule.exports = Template;\n\n},{\"../views\":22,\"./class\":3,\"./utils\":18}],18:[function(require,module,exports){\nvar Utils = {\n    'getType': function (o) {\n        return ({}).toString.call(o).match(/\\s([a-zA-Z]+)/)[1].toLowerCase();\n    },\n    'isObject': function (o) {\n        return this.getType(o) === 'object';\n    },\n    'isPlainObject': function (o) {\n        return (!!o && typeof o === 'object' && o.constructor === Object);\n    },\n    'isFunction': function (o) {\n        return this.getType(o) === 'function';\n    },\n    'isRegexp': function (o) {\n        return this.getType(o) === 'regexp';\n    },\n    'isArguments': function (o) {\n        return this.getType(o) === 'arguments';\n    },\n    'isError': function (o) {\n        return this.getType(o) === 'error';\n    },\n    'isArray': function (o) {\n        return this.getType(o) === 'array';\n    },\n    'isDate': function (o) {\n        return this.getType(o) === 'date';\n    },\n    'isString': function (o) {\n        return this.getType(o) === 'string';\n    },\n    'isNumber': function (o) {\n        return this.getType(o) === 'number';\n    },\n    'isElement': function (o) {\n        return o && o.nodeType === 1;\n    },\n    'toArray': function (o) {\n        return [].slice.call(o);\n    },\n    'querySelectorAll': function (o, p) {\n        return this.toArray((p || document).querySelectorAll(o));\n    },\n    'querySelector': function (o, p) {\n        return (p || document).querySelector(o);\n    },\n    'hasProp': function(o,v){\n        return o && o.hasOwnProperty(v);\n    },\n    'forEach': function (ob, cb, cx) {\n        var p;\n        for (p in ob)\n            if (this.hasProp(ob,p))\n                cb.call(cx || null, ob[p], p);\n    },\n    'map': function (ob, cb, cx) {\n        var p, t, r = [];\n        for (p in ob)\n            if (this.hasProp(ob,p))\n                if ((t = cb.call(cx || null, ob[p], p)) !== undefined)\n                    r[p] = t;\n        return r;\n    },\n    'cleanObject': function (ob) {\n        var p;\n        for (p in ob) {\n            if (this.hasProp(ob,p)) {\n                if (ob[p].length === 0) {\n                    if (this.isArray(ob)) ob.splice(p, 1);\n                    if (this.isPlainObject(ob)) delete ob[p];\n                } else if (this.isPlainObject(ob[p])) {\n                    this.cleanObject(ob[p]);\n                }\n            }\n        }\n        return ob;\n    },\n    'param': function (data) {\n        var s = [];\n        var add = function (k, v) {\n            v = typeof v === 'function' ? v() : v;\n            v = v === null ? '' : v === undefined ? '' : v;\n            s[s.length] = encodeURIComponent(k) + '=' + encodeURIComponent(v);\n        };\n        var ns = function(o,i){\n            return (typeof o === 'object' && o ? i : '' )\n        };\n        var build = function (prefix, ob) {\n            if (prefix) {\n                if (Utils.isArray(ob)) {\n                    Utils.forEach(ob,function(v,k){\n                        build(prefix+'['+ns(v,k)+']',v);\n                    })\n                } else if (Utils.isObject(ob)) {\n                    Utils.forEach(ob,function(v,k){\n                        build(prefix+'['+k+']',v);\n                    });\n                } else {\n                    add(prefix,ob);\n                }\n            } else if (Utils.isArray(ob)) {\n                Utils.forEach(ob,function(v){\n                    add(v.name,v.value);\n                });\n            } else {\n                Utils.forEach(ob,function(v,k){\n                    build(k,v);\n                });\n            }\n            return s;\n        };\n        return build('', data).join('&');\n    },\n    'removeElement': function (el) {\n        el.parentNode.removeChild(el);\n    },\n    'createElement': function (el) {\n        return document.createElement(el);\n    },\n    'getStyle': function (el, prop, getComputedStyle) {\n        getComputedStyle = window.getComputedStyle;\n        return (getComputedStyle ? getComputedStyle(el) : el['currentStyle'])[prop.replace(/-(\\w)/gi, function (word, letter) {\n            return letter.toUpperCase()\n        })];\n    },\n    'extend': function (obj) {\n        this.forEach([].slice.call(arguments, 1), function (o) {\n            if (o !== null) {\n                this.forEach(o, function (value, key) {\n                    if (this.isPlainObject(value)) {\n                        obj[key] = this.extend(obj[key] || {}, value);\n                    } else {\n                        obj[key] = value;\n                    }\n                }, this);\n            }\n        }, this);\n        return obj;\n    },\n    'uuid': function(){\n        var a=0,b='';\n        while(a++<36){\n            if( a * 51 & 52 ){\n                b+= ( a ^ 15 ? 8 ^ Math.random() * ( a ^ 20 ? 16 : 4 ) : 4 ).toString(16);\n            } else {\n                b+= '-';\n            }\n        }\n        return b;\n    },\n    'getPath': function(path){\n        var props = path.split('.');\n        var first = props.shift();\n        var value = null;\n        if( this.hasProp(window,first) ) {\n            value = window[first];\n            this.forEach(props,function(name){\n                value = this.hasProp(value,name) ? value[name] : null;\n            },this)\n        }\n        return value;\n    },\n    'stringFormat':function(format,params){\n        return (format || '').replace(/{(.+?)}/g, function(match, prop) {\n            return params[prop] || match;\n        });\n    }\n};\n\nmodule.exports = Utils;\n\n},{}],19:[function(require,module,exports){\nvar Widget = require('./index');\n/**\n * @type {ClassObject}\n * @extends {Widget}\n */\nvar Button = Widget.extend({\n    'attributes': {},\n    'initElement': function (el) {\n        if (this.utils.isPlainObject(this.params.attributes)) {\n            this.utils.extend(this.attributes, this.params.attributes);\n        }\n        this.addSelectorEvent(el, 'click', 'sendRequest');\n    },\n    'getRequestParams': function (el) {\n        return this.utils.extend({}, this.params.options, this.getElementData(el));\n    },\n    'getElementData': function (el) {\n        var result = {};\n        this.utils.forEach(this.attributes, function (value, key) {\n            if (el.hasAttribute(key)) {\n                result[value] = el.getAttribute(key);\n            }\n        });\n        return result;\n    }\n});\n\nmodule.exports = Button;\n\n},{\"./index\":21}],20:[function(require,module,exports){\nvar Module = require('../module');\nvar Widget = require('./index');\n/**\n * @type {ClassObject}\n */\nvar FormData = Module.extend({\n    'init': function (form) {\n        this.setFormElement(form);\n    },\n    'setFormElement': function (form) {\n        if (this.utils.isElement(form)) {\n            this.form = form;\n        }\n    },\n    'getData': function (filter) {\n        var params = this.deparam(this.serializeArray());\n        return filter === true ? this.utils.cleanObject(params) : params;\n    },\n    'serializeArray': function () {\n        var list = this.utils.toArray(this.form.elements);\n        return this.utils.map(list, function (field) {\n            if (field.disabled || field.name === '') return;\n            if (field.type.match('checkbox|radio') && !field.checked) return;\n            return {\n                name: field.name,\n                value: field.value\n            };\n        });\n    },\n    'serializeAndEncode': function () {\n        return this.utils.map(this.serializeArray(), function (field) {\n            return [field.name, encodeURIComponent(field.value)].join('=');\n        }).join('&');\n    },\n    'deparam': function (obj) {\n        var prop;\n        var result = {};\n        var breaker = /[^\\[\\]]+|\\[\\]$/g;\n        var attr = function (name, value) {\n            var i, data = result, last = name.pop(), len = name.length;\n            for (i = 0; i < len; i++) {\n                if (!data[name[i]])\n                    data[name[i]] = len === i + 1 && last === '[]' ? [] : {};\n                data = data[name[i]];\n            }\n            if (last === '[]') {\n                data.push(value);\n            } else {\n                data[last] = value;\n            }\n        };\n        for (prop in obj) {\n            if (obj.hasOwnProperty(prop)) {\n                attr(obj[prop].name.match(breaker), obj[prop].value);\n            }\n        }\n        return result;\n    }\n});\n/**\n * @type {ClassObject}\n * @extends {Widget}\n */\nvar Form = Widget.extend({\n    'initElement': function (el) {\n        this.addSelectorEvent(el, 'submit', 'sendRequest');\n    },\n    'getRequestParams': function (el) {\n        return this.utils.extend({}, this.params.options, new FormData(el).getData() );\n    }\n});\n\nmodule.exports = Form;\n\n},{\"../module\":12,\"./index\":21}],21:[function(require,module,exports){\nvar Api = require('../api');\n/**\n * @type {ClassObject}\n * @extends {Api}\n */\nvar Widget = Api.extend({\n    'init': function (params) {\n        this.initParams(params);\n        this.initWidget();\n    },\n    'initWidget': function () {\n        this.initOptions(this.params.options);\n        if (this.utils.isString(this.params.element)) {\n            this.initElement(this.params.element);\n        }\n    },\n    'initOptions': function () {\n        if (this.utils.isPlainObject(this.params.options)) {\n            this.params.options = this.params.options || {};\n        }\n    },\n    'initElement': function (el) {\n\n    },\n    'addSelectorEvent': function (el, ev, cb) {\n        this.each(this.utils.querySelectorAll(el), function (cx, element) {\n            this.addEvent(element, ev, cb);\n        });\n        return this;\n    },\n    'getRequestParams': function () {\n        return {};\n    },\n    'sendRequest': function (el, ev) {\n        if (ev.defaultPrevented) return;\n        ev.preventDefault();\n        this.trigger('request', this.getRequestParams(el));\n        this.scope(function () {\n            this.request('api.checkout.form', 'request', this.getRequestParams(el))\n                .done(this.proxy('onSuccess'))\n                .fail(this.proxy('onError'))\n                .progress(this.proxy('onProgress'));\n        });\n    },\n    'onProgress': function (cx, model) {\n        this.trigger('progress', model);\n    },\n    'onSuccess': function (cx, model) {\n        model.sendResponse();\n        model.submitToMerchant();\n        this.trigger('success', model);\n    },\n    'onError': function (cx, model) {\n        this.trigger('error', model);\n    }\n});\n\n\nmodule.exports = Widget;\n\n},{\"../api\":2}],22:[function(require,module,exports){\nmodule.exports = Object.create(null)\nmodule.exports['3ds.ejs'] = '<%=include(\\'styles.ejs\\')%>\\n<div class=\"ipsp-modal-wrapper\">\\n    <div class=\"ipsp-modal\">\\n        <div class=\"ipsp-modal-header\">\\n            <a href=\"javascript:void(0)\" class=\"ipsp-modal-close\"></a>\\n            <div class=\"ipsp-modal-title\">\\n                <%-data.messages.modalHeader%>\\n                <a href=\\'javascript:void(0)\\'><%-data.messages.modalLinkLabel%></a>\\n            </div>\\n        </div>\\n        <div class=\"ipsp-modal-content\">\\n            <iframe src=\"about:blank\" class=\"ipsp-modal-iframe\" frameborder=\"0\" allowtransparency=\"true\"></iframe>\\n        </div>\\n    </div>\\n</div>\\n\\n'\nmodule.exports['styles.ejs'] = '<style>\\n    .ipsp-modal{\\n        box-sizing: border-box;\\n        margin:100px auto;\\n        max-width:680px;\\n        background-color:#fff;\\n        border-radius:5px;\\n        box-shadow:0 2px 2px rgba(0,0,0,0.2);\\n        overflow: hidden;\\n    }\\n    @media (max-width:850px){\\n        .ipsp-modal{\\n            margin:50px auto;\\n        }\\n    }\\n    @media (max-width:695px){\\n        .ipsp-modal{\\n            max-width:100%;\\n            margin:5px;\\n        }\\n    }\\n    .ipsp-modal-wrapper{\\n        box-sizing: border-box;\\n        overflow: auto;\\n        position:fixed;\\n        z-index:99999;\\n        left:0;\\n        bottom:0;\\n        top:0;\\n        right:0;\\n        background-color: rgba(0,0,0,0.2);\\n    }\\n    .ipsp-modal-header{\\n        box-sizing: border-box;\\n        background-color:#fafafa;\\n        height:50px;\\n        box-shadow:0 0 2px rgba(0,0,0,0.2);\\n        border-top-left-radius:5px;\\n        border-top-right-radius:5px;\\n    }\\n    .ipsp-modal-close{\\n        box-sizing: border-box;\\n        float:right;\\n        overflow:hidden;\\n        height:50px;\\n        text-decoration:none;\\n        border-top-right-radius:5px;\\n        color:#949494;\\n    }\\n    .ipsp-modal-close:hover,.ipsp-modal-close:focus,.ipsp-modal-close:active{\\n        text-decoration:none;\\n        color:#646464;\\n    }\\n    .ipsp-modal-close:before{\\n        content:\"×\";\\n        font-size:50px;\\n        line-height:50px;\\n        padding:0 10px;\\n    }\\n    .ipsp-modal-title{\\n        box-sizing: border-box;\\n        border-top-left-radius:5px;\\n        line-height:20px;\\n        height:50px;\\n        padding:5px 15px;\\n        font-size:12px;\\n        display:table-cell;\\n        vertical-align: middle;\\n    }\\n    .ipsp-modal-content{\\n        box-sizing: border-box;\\n        border-bottom-left-radius:5px;\\n        min-height:650px;\\n    }\\n    .ipsp-modal-iframe{\\n        overflow-x: hidden;\\n        border: 0;\\n        display: block;\\n        width: 100%;\\n        height: 750px;\\n    }\\n\\n</style>\\n'\nmodule.exports['trustly.ejs'] = '<%=include(\\'styles.ejs\\')%>\\n<div class=\"ipsp-modal-wrapper\">\\n    <div class=\"ipsp-modal\">\\n        <div class=\"ipsp-modal-header\">\\n            <a href=\"#\" class=\"ipsp-modal-close\"></a>\\n            <div class=\"ipsp-modal-title\">\\n                <%-data.messages.modalHeader%>\\n                <a href=\\'javascript:void(0)\\'><%-data.messages.modalLinkLabel%></a>\\n            </div>\\n        </div>\\n        <div class=\"ipsp-modal-content\">\\n            <iframe src=\"about:blank\" class=\"ipsp-modal-iframe\" frameborder=\"0\" allowtransparency=\"true\"></iframe>\\n        </div>\\n    </div>\\n</div>\\n'\n},{}]},{},[1])(1)\n});\n"],"names":["f","exports","module","define","amd","window","global","self","this","$checkout","r","e","n","t","o","i","c","require","u","a","Error","code","p","call","length","1","Component","Api","Module","Connector","Response","PaymentButton","PaymentContainer","FormWidget","ButtonWidget","Utils","Config","add","./core/api","./core/component","./core/config","./core/connector","./core/module","./core/payment/button","./core/payment/container","./core/response","./core/utils","./core/widget/button","./core/widget/form","2","Deferred","Modal","extend","defaults","origin","endpoint","gateway","messages","modalHeader","modalLinkLabel","init","params","initParams","url","type","join","extendParams","utils","setOrigin","loaded","created","isString","scope","callback","proxy","_createFrame","on","request","model","method","defer","data","uid","connector","getUID","action","send","ev","response","setUID","setConnector","attr","_loadFrame","iframe","createElement","addAttr","allowtransparency","frameborder","scrolling","src","addCss","ApiFrameCss","body","querySelector","firstChild","insertBefore","appendChild","target","contentWindow","_onOpenModal","xhr","modal","checkout","_onCloseModal","trigger","_onLoadConnector","off","./config","./connector","./deferred","./modal","./module","./response","3","fnTest","test","toString","ClassObject","assign","instance","prop","proto","parent","prototype","hasOwnProperty","name","result","temp","_super","apply","arguments","superMethod","constructor","fn","cx","cb","concat","Array","slice","Class","4","newModule","modules","get","addModule","5","GooglePayApi","GoogleBaseRequest","apiVersion","apiVersionMinor","allowedPaymentMethods","parameters","allowedAuthMethods","allowedCardNetworks","GooglePayLanguages","PaymentRequestMethods","supportedMethods","PaymentRequestDetails","total","label","amount","currency","value","width","height","left","bottom","position","border","ButtonFrameCss","margin","padding","display","min-width","background","opacity","overflow","outline","z-index","ButtonFrameAttrs","tabindex","allowpaymentrequest","ButtonCoverCss","top","cursor","ButtonCoverAttrs","href","ButtonContainerCss","ButtonDefaultColor","ButtonColorMap","dark","light","black","white","ButtonLabelMap","ar","bg","ca","zh","hr","cs","da","nl","en","et","es","el","fi","fr","de","id","it","ja","ko","ms","no","pl","pt","ru","sr","sk","sl","sv","th","tr","uk","6","ns","uniqueId","signature","setTarget","create","addEvent","destroy","removeEvent","router","source","JSON","parse","console","log","stringify","options","targetOrigin","delegate","postMessage","7","forEach","list","context","isArray","status","doneFuncs","failFuncs","progressFuncs","resultArgs","promise","done","push","fail","always","progress","then","object","state","isPending","isRejected","isResolved","obj","resolveWith","args","rejectWith","notifyWith","resetState","resolve","reject","notify","isFunction","./utils","8","Event","events","empty","splice","j","./class","9","config","GooglePay","client","wrapper","load","getPath","script","async","isElement","show","methods","find","item","getClient","environment","loadPaymentData","readyToPay","onError","error","onLoadSuccess","isReadyToPay","catch","onLoadError","PaymentClient","../config","../deferred","../module","10","Template","template","initModal","initConnector","getRandomNumber","innerHTML","render","form","prepareForm","initScrollbar","submit","measureScrollbar","scrollDiv","document","className","offsetWidth","clientWidth","removeElement","checkScrollbar","documentElementRect","fullWindowWidth","innerWidth","documentElement","getBoundingClientRect","right","Math","abs","bodyIsOverflowing","scrollbarWidth","bodyPad","parseInt","getStyle","originalBodyPad","style","paddingRight","originalOverflow","resetScrollbar","round","random","selector","closeModal","preventDefault","removeModal","submitForm","onResponse","sendResponse","./template","11","Model","eachProps","alt","each","props","filter","key","split","pop","len","undefined","serialize","12","getListener","_listener_","_proxy_cache_","ob","v","k","setAttribute","addCssProperty","idx","cssText","match","RegExp","replace","index","indexOf","substring","addEventListener","removeEventListener","./event","13","Request","Button","button","mode","color","initElement","initEvents","initApi","initFrame","initPaymentRequest","supported","api","endpointUrl","element","container","cover","sendButtonEvent","payment","setApi","setMerchant","merchant_id","getSupportedMethod","frameLoaded","frame","onFrameLoaded","update","onFallback","fallback","onSupported","getConfigParams","isPlainObject","sendOptions","sendConfig","supportedMethod","setConfig","process","validate","validateCallback","validationProgress","click","onClick","cssUnit","unit","String","sendPay","details","payment_system","message","onToken","onSuccess","onReload","onShow","transition","onHide","onLog","event","onPay","pay","../api","../connector","../google/pay","../response","./request","14","Container","lang","embedded","css","getGoogleLangSupport","getButtonColor","getGoogleSvg","format","stringFormat","getAppleSvg","getAppleLabel","addFrameImage","query","buttonColor","browserLocale","buttonSizeMode","param","classList","remove","styleButton","image","setProperty","contains","15","getPaymentRequest","uuid","PaymentRequest","merchant","isValidConfig","callee","canMakePayment","modelRequest","failure","getRequest","complete","location","reload","appleSession","merchantValidation","domain","session","../utils","16","ProxyUrl","string","that","formDataProxy","formDataSubmit","parentNode","removeChild","inProgress","readyToSubmit","waitForResponse","needVerifyCode","redirectUrl","redirectToUrl","submitToMerchant","ready","prepare3dsData","token","TermUrl","waitOn3dsDecline","js_wait_on_3ds_decline","js_wait_on_3ds_decline_duration","submit3dsForm","./model","17","escapeExpr","entityRe","htmlEntities","Views","settings","evaluate","interpolate","escape","noMatch","escapes","'","\\","\r","\n","\t"," "," ","escaper","&","<",">","\"","counter","view","output","text","matcher","offset","Function","include","../views","18","getType","toLowerCase","isObject","Object","isRegexp","isArguments","isError","isDate","isNumber","nodeType","toArray","querySelectorAll","hasProp","map","cleanObject","s","encodeURIComponent","build","prefix","getComputedStyle","word","letter","toUpperCase","b","path","first","shift","19","attributes","addSelectorEvent","getRequestParams","getElementData","hasAttribute","getAttribute","./index","20","Widget","FormData","setFormElement","getData","deparam","serializeArray","elements","field","disabled","checked","serializeAndEncode","breaker","last","Form","21","initWidget","initOptions","sendRequest","defaultPrevented","onProgress","22"],"mappings":"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"}