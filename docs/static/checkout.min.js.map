{"version":3,"file":"checkout.min.js","sources":["checkout.js"],"sourcesContent":["(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.$checkout = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\nvar Component = require('./core/component');\n\nvar Api = require('./core/api');\nvar Module = require('./core/module');\nvar Connector = require('./core/connector');\nvar Response = require('./core/response');\nvar PaymentButton = require('./core/payment/button');\nvar PaymentContainer = require('./core/payment/container');\nvar FormWidget = require('./core/widget/form');\nvar ButtonWidget = require('./core/widget/button');\nvar Utils = require('./core/utils');\nvar Config = require('./core/config');\n\nComponent.add('Api', Api);\nComponent.add('Connector', Connector);\nComponent.add('PaymentContainer', PaymentContainer);\nComponent.add('PaymentButton', PaymentButton);\nComponent.add('FormWidget', FormWidget);\nComponent.add('ButtonWidget', ButtonWidget);\nComponent.add('Response', Response);\n\nmodule.exports = Component;\nmodule.exports['Api'] = Api;\nmodule.exports['Module'] = Module;\nmodule.exports['Utils'] = Utils;\nmodule.exports['Config'] = Config;\nmodule.exports['Connector'] = Connector;\nmodule.exports['PaymentContainer'] = PaymentContainer;\nmodule.exports['PaymentButton'] = PaymentButton;\nmodule.exports['FormWidget'] = FormWidget;\nmodule.exports['ButtonWidget'] = ButtonWidget;\nmodule.exports['Response'] = Response;\n\n},{\"./core/api\":2,\"./core/component\":4,\"./core/config\":5,\"./core/connector\":6,\"./core/module\":12,\"./core/payment/button\":13,\"./core/payment/container\":14,\"./core/response\":16,\"./core/utils\":18,\"./core/widget/button\":19,\"./core/widget/form\":20}],2:[function(require,module,exports){\nvar Config    = require('./config');\nvar Deferred  = require('./deferred');\nvar Module    = require('./module');\nvar Connector = require('./connector');\nvar Modal     = require('./modal');\nvar Response  = require('./response');\n\n/**\n * @type {ClassObject}\n * @extends {Module}\n */\nvar Api = Module.extend({\n    'defaults': {\n        'origin': 'https://api.fondy.eu',\n        'endpoint': {\n            'gateway': '/checkout/v2/index.html'\n        },\n        'messages':{\n            'modalHeader':'Now you will be redirected to your bank 3DSecure. If you are not redirected please refer',\n            'modalLinkLabel':'link'\n        }\n    },\n    'init': function (params) {\n        this.initParams(params);\n    },\n    'url': function (type, url) {\n        return [this.params.origin, this.params.endpoint[type] || '/', url || ''].join('');\n    },\n    'extendParams': function(params){\n        this.utils.extend(this.params, params);\n        return this;\n    },\n    'initParams': function (params) {\n        this.params = this.utils.extend({},this.defaults);\n        this.extendParams(params);\n        this.setOrigin(this.params.origin);\n        this.loaded = false;\n        this.created = false;\n    },\n    'setOrigin': function (origin) {\n        if (this.utils.isString(origin)) {\n            this.params.origin = origin;\n        }\n        return this;\n    },\n    'scope': function (callback) {\n        callback = this.proxy(callback);\n        if (this._createFrame().loaded === true) {\n            callback();\n        } else {\n            this.on('checkout.api', callback);\n        }\n    },\n    'request': function (model, method, params) {\n        var defer = Deferred();\n        var data = {\n            uid: this.connector.getUID(),\n            action: model,\n            method: method,\n            params: params || {}\n        };\n        this.connector.send('request', data);\n        this.connector.on(data.uid, this.proxy(function (ev, response, model, action) {\n            model = new Response(response);\n            model.setUID(data.uid);\n            model.setConnector(this.connector);\n            action = 'resolveWith';\n            if (model.attr('submit3ds')) {\n                action = 'notifyWith';\n            }\n            if (model.attr('error')) {\n                action = 'rejectWith';\n            }\n            defer[action](this, [model]);\n        }));\n        return defer;\n    },\n    '_loadFrame': function (url) {\n        this.iframe = this.utils.createElement('iframe');\n        this.addAttr(this.iframe, {'allowtransparency': true, 'frameborder': 0, 'scrolling': 'no'});\n        this.addAttr(this.iframe, {'src': url});\n        this.addCss(this.iframe,Config.ApiFrameCss);\n        this.body = this.utils.querySelector('body');\n        if (this.body.firstChild) {\n            this.body.insertBefore(this.iframe, this.body.firstChild);\n        } else {\n            this.body.appendChild(this.iframe);\n        }\n        return this.iframe;\n    },\n    '_createFrame': function () {\n        if (this.created === false) {\n            this.created = true;\n            this.iframe = this._loadFrame(this.url('gateway'));\n            this.connector = new Connector({target: this.iframe.contentWindow});\n            this.connector.on('load', this.proxy('_onLoadConnector'));\n            this.connector.on('modal', this.proxy('_onOpenModal'));\n        }\n        return this;\n    },\n    '_onOpenModal': function (xhr, model) {\n        this.modal = new Modal({\n            checkout: this,\n            model: model\n        });\n        this.modal.on('close', this.proxy('_onCloseModal'));\n    },\n    '_onCloseModal': function (modal, data) {\n        this.trigger('modal.close', modal, data);\n    },\n    '_onLoadConnector': function () {\n        this.loaded = true;\n        this.connector.off('load');\n        this.trigger('checkout.api');\n        this.off('checkout.api');\n    }\n});\n\nmodule.exports = Api;\n\n},{\"./config\":5,\"./connector\":6,\"./deferred\":7,\"./modal\":10,\"./module\":12,\"./response\":16}],3:[function(require,module,exports){\nvar init = false;\nvar fnTest = /xyz/.test(function () {\n    return 'xyz';\n}.toString()) ? /\\b_super\\b/ : /.*/;\n/**\n * @type {ClassObject}\n */\nfunction ClassObject() {\n\n}\n\nClassObject.prototype._super = function(){\n\n}\n\nClassObject.prototype.instance = function(params){\n    return new this.constructor(params);\n}\n\nClassObject.prototype.proxy = function(fn){\n    fn = typeof (fn) == 'string' ? this[fn] : fn;\n    return (function (cx, cb) {\n        return function () {\n            return cb.apply(cx, [this].concat(Array.prototype.slice.call(arguments)))\n        };\n    })(this, fn);\n}\n\nfunction superMethod(parent,name,method){\n    return function () {\n        var temp = this._super, result;\n        this._super = parent[name];\n        result = method.apply(this,arguments);\n        this._super = temp;\n        return result;\n    };\n}\n\nfunction assign(target,instance){\n    var prop,proto,parent = target.prototype;\n    init = true;\n    proto = new target();\n    init = false;\n    for (prop in instance) {\n        if (instance.hasOwnProperty(prop)) {\n            if (typeof (parent[prop]) == 'function' &&\n                typeof (instance[prop]) == 'function' &&\n                fnTest.test(instance[prop])\n            ) {\n                proto[prop] = superMethod(parent,prop,instance[prop]);\n            } else {\n                proto[prop] = instance[prop];\n            }\n        }\n    }\n    return proto;\n}\n\nClassObject.extend = function extend(instance){\n    function Class(){\n        if (!init && this['init']) this['init'].apply(this, arguments);\n    }\n    Class.prototype = assign(this,instance);\n    Class.prototype.constructor = Class;\n    Class.extend = extend;\n    return Class;\n}\n\nmodule.exports = ClassObject;\n\n},{}],4:[function(require,module,exports){\nvar modules = {};\nvar instance = {};\n\nvar newModule = function (name, params) {\n    if (!modules[name]) {\n        throw Error(['module is undefined', name].join(' '));\n    }\n    return new modules[name](params || {});\n};\n\nvar addModule = function (name, module) {\n    if (modules[name]) {\n        throw Error(['module already added', name].join(' '));\n    }\n    modules[name] = module;\n};\n\nfunction Component(name, params){\n    if (instance[name]) return instance[name];\n    return (instance[name] = newModule(name, params));\n}\n\nComponent.get = function (name, params) {\n    return newModule(name, params);\n};\n\nComponent.add = function (name, module) {\n    addModule(name, module);\n    return this;\n};\n\n\nmodule.exports = Component;\n\n},{}],5:[function(require,module,exports){\nexports.GooglePayApi = 'https://pay.google.com/gp/p/js/pay.js';\n\nexports.GoogleBaseRequest = {\n    'apiVersion': 2,\n    'apiVersionMinor': 0,\n    'allowedPaymentMethods': [\n        {\n            'type': 'CARD',\n            'parameters': {\n                'allowedAuthMethods': [\"PAN_ONLY\", \"CRYPTOGRAM_3DS\"],\n                'allowedCardNetworks': ['AMEX', 'DISCOVER', 'INTERAC', 'JCB', 'MASTERCARD', 'VISA']\n            }\n        }\n    ]\n};\n\nexports.GooglePayLanguages = [\n    'ar',\n    'bg',\n    'ca',\n    'zh',\n    'hr',\n    'cs',\n    'da',\n    'nl',\n    'en',\n    'et',\n    'fi',\n    'fr',\n    'de',\n    'el',\n    'id',\n    'it',\n    'ja',\n    'ko',\n    'ms',\n    'no',\n    'pl',\n    'pt',\n    'ru',\n    'sr',\n    'sk',\n    'sl',\n    'es',\n    'sv',\n    'th',\n    'tr',\n    'uk'\n];\n\nexports.PaymentRequestMethods = [\n    ['google', {\n        'supportedMethods': ['https://google.com/pay'],\n        'data': exports.GoogleBaseRequest\n    }],\n    ['apple', {'supportedMethods': ['https://apple.com/apple-pay']}],\n    ['card', {'supportedMethods': ['basic-card']}]\n];\n\nexports.PaymentRequestDetails = {\n    'total': {\n        'label': 'Total',\n        'amount': {\n            'currency': 'USD',\n            'value': '0.00'\n        }\n    }\n};\n\nexports.ApiFrameCss = {\n    'width': '1px !important',\n    'height': '1px !important',\n    'left': '1px !important',\n    'bottom': '1px !important',\n    'position': 'fixed !important',\n    'border': '0px !important'\n};\n\nexports.ButtonFrameCss = {\n    'border': 'none !important',\n    'margin': '0 !important',\n    'padding': '0 !important',\n    'display': 'block !important',\n    'width': '1px !important',\n    'min-width': '100% !important',\n    'background': 'transparent !important',\n    'position': 'relative !important',\n    'opacity': '0 !important',\n    'overflow': 'hidden !important',\n    'height': '100% !important',\n    'outline': 'none !important',\n    'z-index':'1 !important'\n};\n\nexports.ButtonFrameAttrs = {\n    'tabindex':'-1',\n    'scrolling': 'no',\n    'frameborder': 0,\n    'allowtransparency': true,\n    'allowpaymentrequest': true\n};\n\nexports.ButtonCoverCss = {\n    'z-index':'2 !important',\n    'position':'absolute !important',\n    'left':'0 !important',\n    'top':'0 !important',\n    'cursor':'pointer !important',\n    'outline': 'none !important',\n    'width':'100% !important',\n    'height':'100% !important'\n};\n\nexports.ButtonCoverAttrs = {\n    'tabindex':'0',\n    'href':'javascript:void(0)'\n};\n\nexports.ButtonContainerCss = {\n    'border': '0 !important',\n    'margin': '0 !important',\n    'padding': '0 !important',\n    'display': 'block !important',\n    'background': 'transparent !important',\n    'overflow': 'hidden !important',\n    'position': 'relative !important',\n    'opacity': '1 !important',\n    'height': '0 !important',\n    'outline': 'none !important'\n};\n\nexports.ButtonDefaultColor = 'dark';\n\nexports.ButtonColorMap = {\n    'dark': 'dark',\n    'light': 'light',\n    'black': 'dark',\n    'white': 'light'\n}\n\nexports.ButtonLabelMap = {\n    'ar':'',\n    'bg':'',\n    'ca':'',\n    'zh':'',\n    'hr':'',\n    'cs':'',\n    'da':'',\n    'nl':'',\n    'en':'Pay with',\n    'et':'',\n    'es':'Comprar con',\n    'el':'',\n    'fi':'',\n    'fr':'Acheter avec',\n    'de':'Zahlen über',\n    'id':'',\n    'it':'Acquista con',\n    'ja':'',\n    'ko':'',\n    'ms':'',\n    'no':'',\n    'pl':'Zapłać przez',\n    'pt':'',\n    'ru':'Оплатить через',\n    'sr':'',\n    'sk':'Zaplatiť cez',\n    'sl':'',\n    'sv':'',\n    'th':'',\n    'tr':'',\n    'uk':'Оплатити через'\n}\n\n},{}],6:[function(require,module,exports){\nvar Module = require('./module');\n/**\n * @type {ClassObject}\n * @extends {Module}\n */\nvar Connector = Module.extend({\n    'ns': 'crossDomain',\n    'origin': '*',\n    'uniqueId': 1,\n    'signature': null,\n    'init': function (params) {\n        this.setTarget(params.target);\n        this.create();\n    },\n    'create': function () {\n        this.addEvent(window, 'message', 'router');\n    },\n    'setTarget': function (target) {\n        this.target = target;\n        return this;\n    },\n    'getUID': function () {\n        return ++this.uniqueId;\n    },\n    'destroy': function () {\n        this.removeEvent(window, 'message', 'router');\n        this._super();\n    },\n    'router': function (window, ev, response) {\n        if (this.target !== ev.source) return false;\n        try {\n            response = JSON.parse(ev.data);\n        } catch (e) {\n        }\n        if (response && response.action && response.data) {\n            this.trigger(response.action, response.data);\n        }\n    },\n    'send': function (action, data) {\n        if(!this.target){\n            console.log(this.target,action,data);\n            return;\n        }\n        this.target.postMessage(JSON.stringify({\n            action: action,\n            data: data\n        }), this.origin, []);\n    }\n});\n\n\nmodule.exports = Connector;\n\n},{\"./module\":12}],7:[function(require,module,exports){\nvar Utils = require('./utils');\n\nvar PENDING = 0;\nvar RESOLVED = 1;\nvar REJECTED = 2;\n\nfunction isArray(value) {\n    return Utils.isArray(value);\n}\n\nfunction isFunction(value) {\n    return Utils.isFunction(value);\n}\n\nfunction forEach(list, callback, context) {\n    var i = 0;\n    if (list) {\n        if (isArray(list)) {\n            for (; i < list.length; i++) {\n                callback.call(context, list[i]);\n            }\n        } else {\n            callback.call(context, list);\n        }\n    }\n}\n\n/**\n * @name Deferred\n * @param [fn]\n * @return {Deferred}\n */\nfunction Deferred(fn) {\n    var status = PENDING;\n    var doneFuncs = [];\n    var failFuncs = [];\n    var progressFuncs = [];\n    var resultArgs = null;\n    /**\n     * @lends Deferred.prototype\n     */\n    var promise = {\n        done: function () {\n            for (var i = 0; i < arguments.length; i++) {\n                if (!arguments[i]) {\n                    continue;\n                }\n                forEach(arguments[i], function (callback) {\n                    if (status === RESOLVED) {\n                        callback.apply(this, resultArgs);\n                    }\n                    doneFuncs.push(callback);\n                }, this);\n            }\n            return this;\n        },\n        fail: function () {\n            for (var i = 0; i < arguments.length; i++) {\n                if (!arguments[i]) {\n                    continue;\n                }\n                forEach(arguments[i], function (callback) {\n                    if (status === REJECTED) {\n                        callback.apply(this, resultArgs);\n                    }\n                    failFuncs.push(callback);\n                }, this);\n            }\n            return this;\n        },\n        always: function () {\n            return this.done.apply(this, arguments).fail.apply(this, arguments);\n        },\n        progress: function () {\n            for (var i = 0; i < arguments.length; i++) {\n                if (!arguments[i]) {\n                    continue;\n                }\n                forEach(arguments[i], function (callback) {\n                    if (status === PENDING) {\n                        progressFuncs.push(callback);\n                    }\n                }, this);\n            }\n            return this;\n        },\n        then: function () {\n            if (arguments.length > 1 && arguments[1]) {\n                this.fail(arguments[1]);\n            }\n            if (arguments.length > 0 && arguments[0]) {\n                this.done(arguments[0]);\n            }\n            if (arguments.length > 2 && arguments[2]) {\n                this.progress(arguments[2]);\n            }\n            return this;\n        },\n        promise: function (object) {\n            var prop;\n            if (object === null) {\n                return promise;\n            }\n            for (prop in promise) {\n                if (promise.hasOwnProperty(prop)) {\n                    object[prop] = promise[prop];\n                }\n            }\n            return object;\n        },\n        state: function () {\n            return status;\n        },\n        isPending: function () {\n            return status === PENDING;\n        },\n        isRejected: function () {\n            return status === REJECTED;\n        },\n        isResolved: function () {\n            return status === RESOLVED;\n        }\n    };\n    /**\n     * @lends Deferred.prototype\n     */\n    var deferred = {\n        resolveWith: function (context) {\n            if (status === PENDING) {\n                status = RESOLVED;\n                var args = resultArgs = (arguments.length > 1) ? arguments[1] : [];\n                for (var i = 0; i < doneFuncs.length; i++) {\n                    doneFuncs[i].apply(context, args);\n                }\n            }\n            return this;\n        },\n        rejectWith: function (context) {\n            if (status === PENDING) {\n                status = REJECTED;\n                var args = resultArgs = (arguments.length > 1) ? arguments[1] : [];\n                for (var i = 0; i < failFuncs.length; i++) {\n                    failFuncs[i].apply(context, args);\n                }\n            }\n            return this;\n        },\n        notifyWith: function (context) {\n            if (status === PENDING) {\n                var args = resultArgs = (arguments.length > 1) ? arguments[1] : [];\n                for (var i = 0; i < progressFuncs.length; i++) {\n                    progressFuncs[i].apply(context, args);\n                }\n            }\n            return this;\n        },\n        resetState: function(){\n            status = PENDING;\n            return this;\n        },\n        resolve: function () {\n            return this.resolveWith(this, arguments);\n        },\n        reject: function () {\n            return this.rejectWith(this, arguments);\n        },\n        notify: function () {\n            return this.notifyWith(this, arguments);\n        }\n    };\n    var obj = promise.promise(deferred);\n    if (isFunction(fn)) {\n        fn.call(obj, obj);\n    }\n    return obj;\n}\n\n\nmodule.exports = Deferred;\n\n},{\"./utils\":18}],8:[function(require,module,exports){\nvar Class = require('./class');\n/**\n * @type {ClassObject}\n * @extends {Class}\n */\nvar Event = Class.extend({\n    'init': function () {\n        this.events = {};\n        this.empty = [];\n    },\n    'on': function (type, callback) {\n        (this.events[type] = this.events[type] || []).push(callback);\n        return this;\n    },\n    'off': function (type, callback) {\n        type || (this.events = {});\n        var list = this.events[type] || this.empty,\n            i = list.length = callback ? list.length : 0;\n        while (i--) callback === list[i][0] && list.splice(i, 1);\n        return this;\n    },\n    'trigger': function (type) {\n        var e = this.events[type] || this.empty,\n            list = e.length > 0 ? e.slice(0, e.length) : e,\n            i = 0, j;\n        while ((j = list[i++])) j.apply(j, this.empty.slice.call(arguments, 1));\n        return this;\n    }\n});\n\nmodule.exports = Event;\n\n},{\"./class\":3}],9:[function(require,module,exports){\nvar Deferred = require('../deferred');\nvar Module = require('../module');\nvar config = require('../config');\n\nvar GooglePay = Module.extend({\n    'id': 'google-payments-api',\n    'init': function () {\n        this.client = null;\n        this.wrapper = this.utils.querySelector('head');\n        this.defer = Deferred();\n    },\n    'load': function () {\n        if (this.utils.getPath('google.payments.api.PaymentsClient')) {\n            return this.defer.resolveWith(this);\n        }\n        if (this.utils.querySelector('#'.concat(this.id))) {\n            return this.defer;\n        }\n        this.script = this.utils.createElement('script');\n        this.addAttr(this.script, {\n            id: this.id,\n            async: true,\n            src: config.GooglePayApi\n        });\n        this.utils.isElement(this.wrapper) && this.wrapper.appendChild(this.script);\n        this.addEvent(this.script, 'load', 'onLoadSuccess');\n        this.addEvent(this.script, 'error', 'onLoadError');\n        return this.defer;\n    },\n    'show': function (methods) {\n        var method = methods.find(function (item) {\n            return item.supportedMethods === 'https://google.com/pay';\n        });\n        var client = this.getClient({environment: method.data.environment});\n        return client.loadPaymentData(method.data);\n    },\n    'readyToPay': function (cx, response) {\n        if (response.result) {\n            this.defer.resolveWith(this);\n        }\n    },\n    'onError': function (cx, error) {\n        this.defer.rejectWith(this, error);\n    },\n    'onLoadSuccess': function () {\n        this.getClient().isReadyToPay(config.GoogleBaseRequest)\n            .then(this.proxy('readyToPay'))\n            .catch(this.proxy('onError'));\n    },\n    'onLoadError': function () {\n        this.defer.rejectWith(this);\n    },\n    'getClient': function (options) {\n        if( options || this.client === null ) {\n            var PaymentClient = this.utils.getPath('google.payments.api.PaymentsClient');\n            if (PaymentClient) {\n                this.client = new PaymentClient(options);\n            } else {\n                this.onError(null, new Error('Google Client Error'));\n            }\n        }\n        return this.client;\n    }\n});\n\nmodule.exports = new GooglePay;\n\n},{\"../config\":5,\"../deferred\":7,\"../module\":12}],10:[function(require,module,exports){\nvar Module = require('./module');\nvar Connector = require('./connector');\nvar Template  = require('./template');\n/**\n * @type {ClassObject}\n * @extends {Module}\n */\nvar Modal = Module.extend({\n    'init': function (data) {\n        this.checkout = data.checkout;\n        this.model    = data.model || {};\n        this.messages = data.checkout.params.messages || {};\n        this.template = new Template('3ds.ejs');\n        this.body = this.utils.querySelector('body');\n        this.initModal();\n        this.initConnector();\n    },\n    'initModal': function () {\n        this.name = ['modal-iframe', this.getRandomNumber()].join('-');\n        this.modal = this.utils.createElement('div');\n        this.modal.innerHTML = this.template.render({\n            model: this.model,\n            messages: this.messages\n        });\n        this.iframe = this.find('.ipsp-modal-iframe');\n        this.addAttr(this.iframe, {name: this.name, id: this.name});\n        if (this.model['send_data']) {\n            this.form = this.prepareForm(this.model['url'], this.model['send_data'], this.name);\n            this.modal.appendChild(this.form);\n        } else {\n            this.iframe.src = this.model['url'];\n        }\n        this.addEvent(this.find('.ipsp-modal-close'), 'click', 'closeModal');\n        this.addEvent(this.find('.ipsp-modal-title a'), 'click', 'submitForm');\n        this.initScrollbar();\n        this.body.appendChild(this.modal);\n        if (this.form) {\n            this.form.submit();\n        }\n    },\n    'measureScrollbar': function () {\n        var width;\n        var scrollDiv = document.createElement('div');\n        scrollDiv.className = 'modal-scrollbar-measure';\n        this.body.appendChild(scrollDiv);\n        width = scrollDiv.offsetWidth - scrollDiv.clientWidth;\n        this.utils.removeElement(scrollDiv);\n        return width;\n    },\n    'checkScrollbar': function () {\n        var documentElementRect;\n        var fullWindowWidth = window.innerWidth;\n        if (!fullWindowWidth) {\n            documentElementRect = document.documentElement.getBoundingClientRect();\n            fullWindowWidth = documentElementRect.right - Math.abs(documentElementRect.left);\n        }\n        this.bodyIsOverflowing = document.body.clientWidth < fullWindowWidth;\n        this.scrollbarWidth = this.measureScrollbar()\n    },\n    'initScrollbar': function () {\n        this.checkScrollbar();\n        this.bodyPad = parseInt(this.utils.getStyle(this.body, 'padding-right') || 0, 10);\n        this.originalBodyPad = document.body.style.paddingRight || '';\n        this.originalOverflow = document.body.style.overflow || '';\n        if (this.bodyIsOverflowing) {\n            this.addCss(this.body, {\n                'paddingRight': [this.bodyPad + this.scrollbarWidth, 'px'].join(''),\n                'overflow': 'hidden'\n            });\n        }\n    },\n    'resetScrollbar': function () {\n        this.addCss(this.body, {\n            'paddingRight': this.originalBodyPad ? [this.originalBodyPad, 'px'].join('') : '',\n            'overflow': this.originalOverflow\n        });\n    },\n    'getRandomNumber': function () {\n        return Math.round(Math.random() * 1000000000);\n    },\n    'find': function (selector) {\n        return this.utils.querySelector(selector, this.modal);\n    },\n    'closeModal': function (el, ev) {\n        ev.preventDefault();\n        this.trigger('close', this.data);\n        this.removeModal();\n    },\n    'submitForm': function (el, ev) {\n        ev.preventDefault();\n        this.trigger('submit', this.data);\n        this.addAttr(this.form,{\n            target: '_blank'\n        });\n        this.form.submit();\n    },\n    'removeModal': function () {\n        this.destroy();\n    },\n    'destroy': function () {\n        this.utils.removeElement(this.modal);\n        this.resetScrollbar();\n        this.connector.destroy();\n        this._super();\n    },\n    'initConnector': function () {\n        this.connector = new Connector({target: this.iframe.contentWindow});\n        this.connector.on('response', this.proxy('onResponse'));\n    },\n    'onResponse': function (ev, data) {\n        this.sendResponse(data);\n        this.removeModal();\n    },\n    'sendResponse': function (data) {\n        this.checkout.connector.send('request', {\n            uid: data.uid,\n            action: 'api.checkout.proxy',\n            method: 'send',\n            params: data\n        });\n    }\n});\n\nmodule.exports = Modal;\n\n},{\"./connector\":6,\"./module\":12,\"./template\":17}],11:[function(require,module,exports){\nvar Module = require('./module');\n/**\n * @type {ClassObject}\n * @extends {Module}\n */\nvar Model = Module.extend({\n    'init': function (data) {\n        this.data = data || {};\n        this.create();\n    },\n    'create': function () {\n\n    },\n    'eachProps': function(args){\n        var name = args[1] ? args[0] : null;\n        var callback = args[1] ? args[1] : args[0];\n        var list = name ? this.alt(name, []) : this.data;\n        return {\n            list: list,\n            callback: callback\n        }\n    },\n    'each': function () {\n        var prop;\n        var props = this.eachProps(arguments);\n        for (prop in props.list) {\n            if (props.list.hasOwnProperty(prop)) {\n                props.callback(this.instance(props.list[prop]), props.list[prop], prop)\n            }\n        }\n    },\n    'filter': function(){\n        var item,prop;\n        var props = this.eachProps(arguments);\n        for (prop in props.list) {\n            if (props.list.hasOwnProperty(prop)) {\n                item   = this.instance(props.list[prop]);\n                if( props.callback(item, props.list[prop], prop) ){\n                    return props.list[prop];\n                }\n            }\n        }\n    },\n    /**\n     *\n     * @return {boolean|Model}\n     */\n    'find': function(){\n        var item,prop;\n        var props = this.eachProps(arguments);\n        for (prop in props.list) {\n            if (props.list.hasOwnProperty(prop)) {\n                item   = this.instance(props.list[prop]);\n                if( props.callback(item, props.list[prop], prop) ){\n                    return item;\n                }\n            }\n        }\n        return false;\n    },\n    'alt': function (prop, defaults) {\n        prop = this.attr(prop);\n        return typeof (prop) === 'undefined' ? defaults : prop;\n    },\n    'attr': function (key, value) {\n        var i = 0,\n            data = this.data,\n            name = (key || '').split('.'),\n            prop = name.pop(),\n            len = arguments.length;\n        for (; i < name.length; i++) {\n            if (data && data.hasOwnProperty(name[i])) {\n                data = data[name[i]];\n            } else {\n                if (len === 2) {\n                    data = (data[name[i]] = {});\n                } else {\n                    break;\n                }\n            }\n        }\n        if (len === 1) {\n            return data ? data[prop] : undefined;\n        }\n        if (len === 2) {\n            data[prop] = value;\n        }\n        return this;\n    },\n    'stringify': function () {\n        return JSON.stringify(this.serialize());\n    },\n    'serialize': function () {\n        return this.data;\n    }\n});\n\n\nmodule.exports = Model;\n\n},{\"./module\":12}],12:[function(require,module,exports){\nvar Class = require('./class');\nvar Event = require('./event');\nvar Utils = require('./utils');\n/**\n * @type {ClassObject}\n * @extends {Class}\n */\nvar Module =  Class.extend({\n    'utils': Utils,\n    'getListener': function () {\n        if (!this._listener_) this._listener_ = new Event();\n        return this._listener_;\n    },\n    'destroy': function () {\n        this.off();\n    },\n    'on': function (type, callback) {\n        this.getListener().on(type, callback);\n        return this;\n    },\n    'off': function (type, callback) {\n        this.getListener().off(type, callback);\n        return this;\n    },\n    'proxy': function (fn) {\n        if (!this._proxy_cache_) this._proxy_cache_ = {};\n        if (this.utils.isString(fn)) {\n            if (!this._proxy_cache_[fn]) {\n                this._proxy_cache_[fn] = this._super(fn);\n            }\n            return this._proxy_cache_[fn];\n        }\n        return this._super(fn);\n    },\n    'trigger': function () {\n        this.getListener().trigger.apply(this.getListener(), arguments);\n        return this;\n    },\n    'each': function (ob, cb) {\n        this.utils.forEach(ob, this.proxy(cb));\n    },\n    'addAttr': function (el, ob) {\n        if (!this.utils.isElement(el)) return false;\n        this.utils.forEach(ob, function (v, k) {\n            el.setAttribute(k, v);\n        });\n    },\n    'addCss': function (el, ob) {\n        if (!this.utils.isElement(el)) return false;\n        this.utils.forEach(ob, function (v, k) {\n            this.addCssProperty(el, k, v);\n        }, this);\n    },\n    'addCssProperty': function (el, style, value) {\n        var result = el.style.cssText.match(new RegExp(\"(?:[;\\\\s]|^)(\" +\n            style.replace(\"-\", \"\\\\-\") + \"\\\\s*:(.*?)(;|$))\")),\n            idx;\n        if (result) {\n            idx = result.index + result[0].indexOf(result[1]);\n            el.style.cssText = el.style.cssText.substring(0, idx) +\n                style + \": \" + value + \";\" +\n                el.style.cssText.substring(idx + result[1].length);\n        } else {\n            el.style.cssText += \" \" + style + \": \" + value + \";\";\n        }\n    },\n    'addEvent': function (el, ev, cb) {\n        if (!el || !ev || !cb) return false;\n        cb = this.proxy(cb);\n        if (el.addEventListener) el.addEventListener(ev, cb);\n        else if (el['attachEvent']) el['attachEvent']('on' + ev, cb);\n    },\n    'removeEvent': function (el, ev, cb) {\n        if (!el || !ev || !cb) return false;\n        cb = this.proxy(cb);\n        if (el.removeEventListener) el.removeEventListener(ev, cb, false);\n        else if (el['detachEvent']) el['detachEvent']('on' + ev, cb);\n    },\n    'prepareForm': function (url, data, target, method) {\n        var form = this.utils.createElement('form');\n        this.addAttr(form, {\n            'action': url,\n            'target': target || '_self',\n            'method': method || 'POST'\n        });\n        this.addCss(form, {\n            'display': 'none'\n        });\n        this.utils.forEach(data, function (v, k, el) {\n            el = this.utils.createElement('input');\n            el.type = 'hidden';\n            el.name = k;\n            el.value = v;\n            form.appendChild(el);\n        }, this);\n        return form;\n    }\n});\n\nmodule.exports = Module;\n\n},{\"./class\":3,\"./event\":8,\"./utils\":18}],13:[function(require,module,exports){\nvar Config = require('../config');\nvar Module    = require('../module');\nvar Api       = require('../api');\nvar Connector = require('../connector');\nvar Response  = require('../response');\nvar Deferred = require('../deferred');\nvar Request   = require('./request');\n\n\n/**\n * @type {ClassObject}\n * @extends {Module}\n */\nvar Button = Module.extend({\n    'defaults': {\n        origin: 'https://api.fondy.eu',\n        endpoint: {\n            gateway: '/checkout/v2/index.html',\n            button: '/checkout/v2/button/index.html'\n        },\n        style: {\n            height: 38,\n            mode: 'default',\n            type: 'long',\n            color: 'black'\n        },\n        data: {}\n    },\n    'init': function (params) {\n        this.initParams(params);\n        this.initElement();\n        this.initEvents();\n        this.initApi();\n        this.initFrame();\n        this.initPaymentRequest();\n    },\n    'initParams': function (params) {\n        this.supported = false;\n        this.params = this.utils.extend({},this.defaults, params);\n    },\n    'initApi': function () {\n        if(this.params.api instanceof Api){\n            this.api = this.params.api;\n            delete this.params['api'];\n        } else {\n            this.api = new Api({\n                origin:this.params.origin,\n                endpoint: this.params.endpoint\n            });\n        }\n    },\n    'endpointUrl': function (type, url) {\n        return [this.params.origin, this.params.endpoint[type] || '/', url || ''].join('');\n    },\n    'initElement': function () {\n        this.element = this.utils.querySelector(this.params.element);\n        this.container = this.utils.createElement('div');\n        this.cover = this.utils.createElement('a');\n        this.addCss(this.cover,Config.ButtonCoverCss);\n        this.addAttr(this.cover,Config.ButtonCoverAttrs)\n        this.addCss(this.container,Config.ButtonContainerCss);\n        this.element.appendChild(this.container);\n    },\n    'sendButtonEvent': function(cx,ev){\n        ev.preventDefault();\n        this.connector.send('event',{type:ev.type});\n    },\n    'initEvents': function(){\n        this.addEvent(this.cover, 'mouseenter', 'sendButtonEvent');\n        this.addEvent(this.cover, 'mouseleave', 'sendButtonEvent');\n        this.addEvent(this.cover, 'blur', 'sendButtonEvent');\n        this.addEvent(this.cover, 'focus', 'sendButtonEvent');\n        this.addEvent(this.cover, 'click', 'onClick');\n    },\n    'initPaymentRequest': function () {\n        this.payment = new Request({});\n        this.payment.on('complete', this.proxy('onToken'));\n        this.payment.on('error', this.proxy('onError'));\n        this.payment.on('log', this.proxy('onLog'));\n        this.payment.on('supported', this.proxy('onSupported'));\n        this.payment.on('fallback', this.proxy('onFallback'));\n        this.payment.on('reload', this.proxy('onReload'));\n        this.payment.setApi(this.api);\n        this.payment.setMerchant(this.params.data.merchant_id);\n        this.payment.getSupportedMethod();\n    },\n    'initFrame': function () {\n        this.frameLoaded = Deferred();\n        this.frame = this.utils.createElement('iframe');\n        this.addCss(this.frame,Config.ButtonFrameCss);\n        this.addAttr(this.frame,Config.ButtonFrameAttrs);\n        this.addAttr(this.frame, {\n            src: this.endpointUrl('button')\n        });\n        this.container.appendChild(this.frame);\n        this.container.appendChild(this.cover);\n        this.initConnector();\n        this.addEvent(this.frame, 'load', function () {\n            this.frameLoaded.resetState().resolve();\n        });\n    },\n    'onFrameLoaded': function(){\n        this.update({});\n    },\n    'onFallback': function(){\n        this.fallback = true;\n        this.onSupported(null, 'google');\n    },\n    'onSupported': function(cx, method){\n        this.supported = true;\n        this.method = method;\n        this.frameLoaded.done(this.proxy('onFrameLoaded'));\n    },\n    'initConnector': function () {\n        this.connector = new Connector({target: this.frame.contentWindow});\n        this.connector.on('show', this.proxy('onShow'));\n        this.connector.on('hide', this.proxy('onHide'));\n        this.connector.on('log', this.proxy('onLog'));\n        this.connector.on('pay', this.proxy('onPay'));\n        this.connector.on('complete', this.proxy('onToken'));\n        this.connector.on('error', this.proxy('onError'));\n        this.connector.on('reload', this.proxy('onReload'));\n    },\n    'getConfigParams': function (data) {\n        var params = {method: this.method, data: {}, style: {} , fallback: this.fallback};\n        this.utils.extend(params.data, this.params.data);\n        this.utils.extend(params.style, this.params.style);\n        if (this.utils.isPlainObject(data)) {\n            this.utils.extend(params,data);\n        }\n        return params;\n    },\n    'send': function(action,data){\n        if( this.supported === true ){\n            this.connector.send(action,data);\n        }\n        return this;\n    },\n    'update': function (params) {\n        this.sendOptions(params);\n        this.api.scope(this.proxy(function(){\n            this.api.request('api.checkout.pay','get',this.params.data)\n                .done(this.proxy('sendConfig'))\n                .fail(this.proxy('sendConfig'));\n        }));\n    },\n    'sendOptions': function(params){\n        this.utils.extend(this.params,this.getConfigParams(params));\n        this.send('options',this.params);\n    },\n    'sendConfig': function(cx,model){\n        this.model = model;\n        this.model.supportedMethod(this.method);\n        this.payment.setConfig(this.model.data);\n        this.send('config',this.model.data);\n    },\n    'callback': function (model) {\n        var params = this.utils.extend({}, this.params.data, model.serialize());\n        this.api.scope(this.proxy(function(){\n            this.api.request('api.checkout.form','request',params)\n                .done(this.proxy('onSuccess'))\n                .fail(this.proxy('onError'));\n        }));\n    },\n    'process': function (callback) {\n        this.callback = callback;\n        return this;\n    },\n    'validate': function(callback){\n        this.validateCallback = (function(context){\n            return function(resolve){\n                if( context.validationProgress === true ) return false;\n                context.validationProgress = true;\n                callback(function(){\n                    context.validationProgress = false;\n                    resolve.call(context);\n                });\n            }\n        })(this);\n    },\n    'click': function(){\n        this.onClick();\n    },\n    'cssUnit': function (value, unit) {\n        return String(value || 0).concat(unit || '').concat(' !important')\n    },\n    'onClick': function () {\n        if( this.validateCallback ){\n            this.validateCallback(function(){\n                this.send('pay',{});\n            });\n        } else {\n            this.send('pay',{});\n        }\n    },\n    'onToken': function (c, data) {\n        this.callback(new Response(data));\n    },\n    'onSuccess': function (c, data) {\n        this.trigger('success', data);\n    },\n    'onError': function (c, data) {\n        this.trigger('error', data);\n    },\n    'onReload': function(c,data){\n        this.trigger('reload', data);\n    },\n    'onShow': function () {\n        this.addCss(this.frame, {\n            'transition': 'opacity 0.6s 0.4s ease-out',\n            'opacity': this.cssUnit(1)\n        });\n        this.addCss(this.container, {\n            'transition': 'height 0.2s ease-out',\n            'height': this.cssUnit(this.params.style.height, 'px')\n        });\n        this.trigger('show', {});\n    },\n    'onHide': function () {\n        this.addCss(this.frame, {\n            'transition': 'opacity 0.4s ease-out',\n            'opacity': this.cssUnit(0)\n        });\n        this.addCss(this.container, {\n            'transition': 'height 0.2s 0.4s ease-out',\n            'height': this.cssUnit(0, 'px')\n        });\n        this.trigger('hide', {});\n    },\n    'onLog': function (c, result) {\n        this.trigger('log',{\n            event: 'log',\n            result: result\n        });\n    },\n    'onPay': function (c, data) {\n        this.payment.setConfig(data);\n        this.payment.pay();\n    }\n});\n\nmodule.exports = Button;\n\n},{\"../api\":2,\"../config\":5,\"../connector\":6,\"../deferred\":7,\"../module\":12,\"../response\":16,\"./request\":15}],14:[function(require,module,exports){\nvar Config = require('../config');\nvar Module = require('../module');\nvar Connector = require('../connector');\nvar Request = require('./request');\n\n/**\n * @type {ClassObject}\n * @extends {Module}\n */\nvar Container = Module.extend({\n    'defaults': {\n        element: null,\n        method: 'card',\n        data: {\n            lang: 'en'\n        },\n        style: {}\n    },\n    'init': function (params) {\n        this.initParams(params);\n        this.initEvents();\n    },\n    'initParams': function (params) {\n        this.params = this.utils.extend({}, this.defaults, params);\n        this.element = this.utils.querySelector(this.params.element);\n        this.connector = new Connector({target: window.parent});\n        this.payment   = new Request({\n            embedded: true\n        });\n    },\n    'extendParams': function (params) {\n        this.utils.extend(this.params, {\n            method: params.method,\n            style: params.style,\n            data: params.data,\n            css: params.css\n        });\n    },\n    'getGoogleLangSupport': function (lang, defaults) {\n        return Config.GooglePayLanguages.indexOf(lang) !== -1 ? lang : defaults;\n    },\n    'getButtonColor': function(color){\n        return Config.ButtonColorMap[color] || Config.ButtonDefaultColor;\n    },\n    'getGoogleSvg': function (color, lang, mode) {\n        var format = 'url(\"{endpoint}/{color}/{mode}/{lang}.svg\")';\n        var params = {\n            endpoint: 'https://www.gstatic.com/instantbuy/svg',\n            color: this.getButtonColor(color),\n            mode: mode || 'plain',\n            lang: lang || 'en'\n        };\n        if (mode === 'plain') {\n            format = 'url(\"{endpoint}/{color}_gpay.svg\")';\n        }\n        if (mode === 'buy') {\n            format = 'url(\"{endpoint}/{color}/{lang}.svg\")';\n        }\n        return this.utils.stringFormat(format, params)\n    },\n    'getAppleSvg': function (color, lang, mode) {\n        var format = 'url(\"svg/apple-pay-{color}.svg\")';\n        var params = {\n            color: this.getButtonColor(color)\n        };\n        return this.utils.stringFormat(format, params);\n    },\n    'getAppleLabel': function (lang) {\n        return Config.ButtonLabelMap[lang || 'en'];\n    },\n    'addFrameImage': function () {\n        var frame = this.utils.querySelector('iframe', this.element) || this.utils.createElement('iframe');\n        var url = 'https://pay.google.com/gp/p/generate_gpay_btn_img';\n        var style = this.params.style || {};\n        var lang = this.getGoogleLangSupport(this.params.data.lang, 'en');\n        var query = {\n            buttonColor: style.color || 'black',\n            browserLocale: lang,\n            buttonSizeMode: 'fill'\n        };\n        var src = [url, this.utils.param(query)].join('?');\n        this.addAttr(frame, {\n            'scrolling': 'no',\n            'frameborder': 0,\n            'src': src\n        });\n        this.element.appendChild(frame);\n        this.element.classList.remove('short', 'long');\n    },\n    'styleButton': function () {\n        var element = this.element;\n        var params = this.params;\n        var method = params.method;\n        var style = params.style || {};\n        var lang = params.data.lang || 'en';\n        var css = params.css || {};\n        element.setAttribute('class', '');\n        element.classList.add('button','pending');\n        if (method === 'card') method = 'google';\n        if (method) {\n            element.classList.add(method);\n        }\n        if (lang) {\n            element.classList.add(lang);\n        }\n        if (style.type) {\n            element.classList.add(style.type);\n        }\n        if (style.mode) {\n            element.classList.add(style.mode);\n        }\n        if (style.color) {\n            element.classList.add(style.color);\n        }\n        if (method === 'google') {\n            if (style.type === 'short') {\n                style.mode = 'plain';\n            }\n            if (style.mode === 'default') {\n                this.addFrameImage();\n            } else {\n                css.image = this.getGoogleSvg(style.color, lang, style.mode);\n            }\n        }\n        if (method === 'apple') {\n            css.image = this.getAppleSvg(style.color);\n            css.label = this.getAppleLabel(lang, style.mode);\n        }\n        if (css) {\n            this.utils.forEach(css, function (value, name) {\n                element.style.setProperty(['--', name].join(''), value);\n            });\n        }\n    },\n    'initEvents': function () {\n        this.connector.on('options', this.proxy(function (cx, data) {\n            this.extendParams(data);\n            this.styleButton();\n        }));\n        this.connector.on('pay', this.proxy(function () {\n            if (!this.element.classList.contains('pending')) {\n                if (this.params.method === 'apple') {\n                    this.connector.send('pay', this.payment.config);\n                } else {\n                    this.payment.pay();\n                }\n            }\n        }));\n        this.connector.on('config', this.proxy(function (cx, data) {\n            this.payment.setConfig(data);\n            if (data.payment_system && data.methods && data.methods.length > 0) {\n                this.element.classList.remove('pending');\n                this.element.classList.add('ready');\n                this.connector.send('show', {});\n            } else {\n                this.connector.send('hide', {});\n            }\n        }));\n        this.connector.on('event', this.proxy(function (cx, data) {\n            if (data.type === 'mouseenter') {\n                this.element.classList.add('hover');\n            }\n            if (data.type === 'mouseleave') {\n                this.element.classList.remove('hover');\n            }\n            if (data.type === 'focus') {\n                this.element.classList.add('active');\n            }\n            if (data.type === 'blur') {\n                this.element.classList.remove('active');\n            }\n        }))\n    }\n});\n\nmodule.exports = Container;\n\n},{\"../config\":5,\"../connector\":6,\"../module\":12,\"./request\":15}],15:[function(require,module,exports){\nvar Api = require('../api');\nvar Module = require('../module');\nvar GooglePay = require('../google/pay')\nvar Deferred = require('../deferred');\nvar Utils = require('../utils');\nvar Config = require('../config');\n\nvar hasPaymentRequest = function () {\n    return window.hasOwnProperty('PaymentRequest') && typeof (window.PaymentRequest) === 'function'\n}\n\nvar getPaymentRequest = function (methods, details, options) {\n    var request = null;\n    options = options || {};\n    details = details || {};\n    details.id = Utils.uuid();\n    if (hasPaymentRequest()) {\n        try {\n            request = new PaymentRequest(methods, details, options);\n        } catch (e) {\n            request = null;\n        }\n    }\n    return request;\n};\n\n/**\n * @type {ClassObject}\n * @extends {Module}\n */\nvar Request = Module.extend({\n    'config': {\n        payment_system: '',\n        fallback: false,\n        methods: [],\n        details: {},\n        options: {}\n    },\n    'init': function (params) {\n        this.params = params || {};\n    },\n    'setConfig': function (config) {\n        this.config = config;\n        return this;\n    },\n    'setMerchant': function (merchant) {\n        this.merchant = merchant;\n    },\n    'setApi': function (api) {\n        if (api instanceof Api) {\n            this.api = api;\n        }\n    },\n    'isValidConfig': function(){\n        return this.config.payment_system && this.config.methods && this.config.methods.length > 0;\n    },\n    'getSupportedMethod': function () {\n        (function (module, list, index) {\n            var request, method, config;\n            var callback = arguments.callee;\n            var item = list[index] || false;\n            if (item === false) {\n                return module.trigger('fallback');\n            }\n            index = (index || 0) + 1;\n            method = item[0];\n            config = item[1];\n            request = getPaymentRequest([config], Config.PaymentRequestDetails);\n            if( request ){\n                request.canMakePayment().then(function (status) {\n                    if (status === true) {\n                        module.trigger('supported', method);\n                    } else {\n                        callback(module, list, index);\n                    }\n                });\n            } else {\n                callback(module, list, index);\n            }\n        })(this, Config.PaymentRequestMethods , 0);\n    },\n    'modelRequest': function (method, params, callback, failure) {\n        if (this.api instanceof Api) {\n            this.api.scope(this.proxy(function () {\n                this.api.request('api.checkout.pay', method, params)\n                    .done(this.proxy(callback)).fail(this.proxy(failure));\n            }));\n        }\n    },\n    'getRequest': function () {\n        var module = this;\n        var defer = Deferred();\n        var request = getPaymentRequest(\n            this.config.methods,\n            this.config.details,\n            this.config.options\n        );\n        if (request) {\n            this.addEvent(request, 'merchantvalidation', 'merchantValidation');\n            request.canMakePayment().then(function () {\n                request.show().then(function (response) {\n                    response.complete('success').then(function () {\n                        defer.resolveWith(module, [response.details])\n                    });\n                }).catch(function (e) {\n                    defer.rejectWith(module, [{code: e.code, message: e.message}]);\n                })\n            }).catch(function (e) {\n                defer.rejectWith(module, [{code: e.code, message: e.message}]);\n            });\n        } else {\n            GooglePay.load().then(this.proxy(function(){\n                GooglePay.show(this.config.methods).then(function(details){\n                    defer.resolveWith(module, [details])\n                }).catch(function(e){\n                    defer.rejectWith(module, [{code: e.code, message: e.message}]);\n                });\n            }));\n        }\n        return defer;\n    },\n    'pay': function () {\n        this.getRequest().done(function (details) {\n            this.trigger('complete', {\n                payment_system: this.config.payment_system,\n                data: details\n            });\n        }).fail(function (error) {\n            this.trigger('error', error);\n            if (this.params.embedded === true) {\n                location.reload();\n                this.trigger('reload', this.params);\n            }\n        });\n    },\n    'appleSession': function (params) {\n        var defer = Deferred();\n        this.modelRequest('session', params, function (c, model) {\n            defer.resolveWith(this, [model.serialize()]);\n        }, function (c, model) {\n            defer.rejectWith(this, [model]);\n        });\n        return defer;\n    },\n    'merchantValidation': function (cx, event) {\n        this.appleSession({\n            url: event['validationURL'],\n            domain: location['host'],\n            merchant_id: this.merchant\n        }).done(function (session) {\n            try {\n                event.complete(session.data);\n            } catch (error) {\n                this.trigger('error', error);\n            }\n        }).fail(function (error) {\n            this.trigger('error', error);\n        });\n    }\n});\n\nmodule.exports = Request;\n\n},{\"../api\":2,\"../config\":5,\"../deferred\":7,\"../google/pay\":9,\"../module\":12,\"../utils\":18}],16:[function(require,module,exports){\nvar Model = require('./model');\n/**\n * @type {ClassObject}\n * @extends {Model}\n */\n\nvar ProxyUrl = 'http://secure-redirect.cloudipsp.com/submit/';\n\n\nvar Response = Model.extend({\n    'stringFormat': function (string) {\n        var that = this;\n        return (string || '').replace(/{(.+?)}/g, function (match, prop) {\n            return that.attr(['order.order_data', prop].join('.')) || match;\n        });\n    },\n    'setConnector': function (connector) {\n        this.connector = connector;\n        return this;\n    },\n    'setUID': function (uid) {\n        this.uid = uid;\n        return this;\n    },\n    'getUID': function () {\n        return this.uid;\n    },\n    'formDataProxy': function(url, data, target, method){\n        location.assign([ProxyUrl, JSON.stringify({\n            url: url,\n            params: data,\n            target: target,\n            method: method\n        })].join('#'));\n    },\n    'formDataSubmit': function (url, data, target, method) {\n        if( url.match(/^http:/) ){\n            return this.formDataProxy(url,data,target,method);\n        }\n        var action = this.stringFormat(url);\n        var form = this.prepareForm(action, data, target, method);\n        var body = this.utils.querySelector('body');\n        body.appendChild(form);\n        form.submit();\n        form.parentNode.removeChild(form);\n    },\n    'inProgress': function () {\n        return this.attr('order.in_progress');\n    },\n    'readyToSubmit': function () {\n        return this.attr('order.ready_to_submit');\n    },\n    'waitForResponse': function () {\n        return this.attr('order.pending');\n    },\n    'needVerifyCode': function () {\n        return this.attr('order.need_verify_code');\n    },\n    'redirectUrl': function () {\n        if (this.attr('url')) {\n            this.redirectToUrl(this.attr('url'));\n            return true;\n        }\n        return false;\n    },\n    'redirectToUrl': function(url){\n        location.assign(url);\n    },\n    'submitToMerchant': function () {\n        var ready = this.attr('order.ready_to_submit');\n        var url = this.attr('model.url') || this.attr('order.response_url');\n        var method = this.attr('order.method');\n        var action = this.attr('order.action');\n        var data = this.attr('model.send_data') || this.attr('order.order_data');\n        if (ready && url && data) {\n            if( action === 'redirect' || data['get_without_parameters'] === true) {\n                this.redirectToUrl(url);\n            } else {\n                this.formDataSubmit(url, data, '_self', method);\n            }\n            return true;\n        }\n    },\n    'submitForm': function () {\n        var method = this.attr('method');\n        var url = this.attr('url');\n        var data = this.attr('send_data');\n        if (url && data) {\n            this.formDataSubmit(url, data, '_self', method);\n            return true;\n        }\n        return false;\n    },\n    'sendResponse': function () {\n        var action = this.attr('action');\n        if (action === 'submit')\n            return this.submitForm();\n        if (action === 'redirect')\n            return this.redirectUrl();\n        return false;\n    },\n    'prepare3dsData': function () {\n        var params = {};\n        var data = this.attr('submit3ds');\n        if (data['3ds']) {\n            params.token = this.attr('token');\n            params.uid = this.getUID();\n            params.frame = true;\n            if (data['send_data'].TermUrl) {\n                data['send_data'].TermUrl = [\n                    data['send_data'].TermUrl,\n                    this.utils.param(params)\n                ].join('#!!');\n            }\n        }\n        return data;\n    },\n    'waitOn3dsDecline': function () {\n        var data = this.alt('submit3ds.checkout_data', {\n            js_wait_on_3ds_decline: false,\n            js_wait_on_3ds_decline_duration: 0\n        });\n        return data.js_wait_on_3ds_decline ? data.js_wait_on_3ds_decline_duration : 0;\n    },\n    'submit3dsForm': function () {\n        if (this.attr('submit3ds.checkout_data')) {\n            this.connector.trigger('modal', this.prepare3dsData());\n        }\n    },\n    'supportedMethod': function(method){\n        var item = this.find('methods',function(item){\n            return item.alt('supportedMethods','').match(method)\n        });\n        if( item ){\n            this.attr('methods',[item.serialize()])\n        } else {\n            this.attr('methods',[]);\n        }\n    }\n});\n\nmodule.exports = Response;\n\n},{\"./model\":11}],17:[function(require,module,exports){\nvar Views = require('../views');\nvar Class = require('./class');\nvar Utils = require('./utils');\n\nvar settings = {\n    evaluate: /<%([\\s\\S]+?)%>/g,\n    interpolate: /<%=([\\s\\S]+?)%>/g,\n    escape: /<%-([\\s\\S]+?)%>/g\n};\nvar noMatch = /(.)^/;\nvar escapes = {\n    \"'\": \"'\",\n    '\\\\': '\\\\',\n    '\\r': 'r',\n    '\\n': 'n',\n    '\\t': 't',\n    '\\u2028': 'u2028',\n    '\\u2029': 'u2029'\n};\nvar escaper = /\\\\|'|\\r|\\n|\\t|\\u2028|\\u2029/g;\nvar htmlEntities = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#x27;'\n};\nvar entityRe = new RegExp('[&<>\"\\']', 'g');\nvar escapeExpr = function (string) {\n    if (string == null) return '';\n    return ('' + string).replace(entityRe, function (match) {\n        return htmlEntities[match];\n    });\n};\nvar counter = 0;\nvar template = function (text) {\n    var render;\n    var matcher = new RegExp([\n        (settings.escape || noMatch).source,\n        (settings.interpolate || noMatch).source,\n        (settings.evaluate || noMatch).source\n    ].join('|') + '|$', 'g');\n    var index = 0;\n    var source = \"__p+='\";\n    text.replace(matcher, function (match, escape, interpolate, evaluate, offset) {\n        source += text.slice(index, offset).replace(escaper, function (match) {\n            return '\\\\' + escapes[match];\n        });\n        if (escape) {\n            source += \"'+\\n((__t=(\" + escape + \"))==null?'':escapeExpr(__t))+\\n'\";\n        }\n        if (interpolate) {\n            source += \"'+\\n((__t=(\" + interpolate + \"))==null?'':__t)+\\n'\";\n        }\n        if (evaluate) {\n            source += \"';\\n\" + evaluate + \"\\n__p+='\";\n        }\n        index = offset + match.length;\n        return match;\n    });\n    source += \"';\\n\";\n    if (!settings['variable']) source = 'with(obj||{}){\\n' + source + '}\\n';\n    source = \"var __t,__p='',__j=Array.prototype.join,\" +\n        \"print=function(){__p+=__j.call(arguments,'');};\\n\" +\n        source + \"return __p;\\n//# sourceURL=/tmpl/source[\" + counter++ + \"]\";\n    try {\n        render = new Function(settings['variable'] || 'obj', 'escapeExpr', source);\n    } catch (e) {\n        e.source = source;\n        throw e;\n    }\n    var template = function (data) {\n        return render.call(this, data, escapeExpr);\n    };\n    template.source = 'function(' + (settings['variable'] || 'obj') + '){\\n' + source + '}';\n    return template;\n};\n/**\n * @type {ClassObject}\n * @extends {Class}\n */\nvar Template = Class.extend({\n    'utils': Utils,\n    'init': function (name) {\n        this.name = name;\n        this.view = {};\n        this.output();\n    },\n    'output': function () {\n        this.view.source = Views[this.name];\n        this.view.output = template(this.view.source);\n    },\n    'render': function (data) {\n        this.data = data;\n        return this.view.output.call(this, this);\n    },\n    'include': function (name, data) {\n        return this.instance(name).render(this.utils.extend(this.data, data));\n    }\n});\n\nmodule.exports = Template;\n\n},{\"../views\":22,\"./class\":3,\"./utils\":18}],18:[function(require,module,exports){\nvar Utils = {\n    'getType': function (o) {\n        return ({}).toString.call(o).match(/\\s([a-zA-Z]+)/)[1].toLowerCase();\n    },\n    'isObject': function (o) {\n        return this.getType(o) === 'object';\n    },\n    'isPlainObject': function (o) {\n        return (!!o && typeof o === 'object' && o.constructor === Object);\n    },\n    'isFunction': function (o) {\n        return this.getType(o) === 'function';\n    },\n    'isRegexp': function (o) {\n        return this.getType(o) === 'regexp';\n    },\n    'isArguments': function (o) {\n        return this.getType(o) === 'arguments';\n    },\n    'isError': function (o) {\n        return this.getType(o) === 'error';\n    },\n    'isArray': function (o) {\n        return this.getType(o) === 'array';\n    },\n    'isDate': function (o) {\n        return this.getType(o) === 'date';\n    },\n    'isString': function (o) {\n        return this.getType(o) === 'string';\n    },\n    'isNumber': function (o) {\n        return this.getType(o) === 'number';\n    },\n    'isElement': function (o) {\n        return o && o.nodeType === 1;\n    },\n    'toArray': function (o) {\n        return [].slice.call(o);\n    },\n    'querySelectorAll': function (o, p) {\n        return this.toArray((p || document).querySelectorAll(o));\n    },\n    'querySelector': function (o, p) {\n        return (p || document).querySelector(o);\n    },\n    'hasProp': function(o,v){\n        return o && o.hasOwnProperty(v);\n    },\n    'forEach': function (ob, cb, cx) {\n        var p;\n        for (p in ob)\n            if (this.hasProp(ob,p))\n                cb.call(cx || null, ob[p], p);\n    },\n    'map': function (ob, cb, cx) {\n        var p, t, r = [];\n        for (p in ob)\n            if (this.hasProp(ob,p))\n                if ((t = cb.call(cx || null, ob[p], p)) !== undefined)\n                    r[p] = t;\n        return r;\n    },\n    'cleanObject': function (ob) {\n        var p;\n        for (p in ob) {\n            if (this.hasProp(ob,p)) {\n                if (ob[p].length === 0) {\n                    if (this.isArray(ob)) ob.splice(p, 1);\n                    if (this.isPlainObject(ob)) delete ob[p];\n                } else if (this.isPlainObject(ob[p])) {\n                    this.cleanObject(ob[p]);\n                }\n            }\n        }\n        return ob;\n    },\n    'param': function (data) {\n        var s = [];\n        var add = function (k, v) {\n            v = typeof v === 'function' ? v() : v;\n            v = v === null ? '' : v === undefined ? '' : v;\n            s[s.length] = encodeURIComponent(k) + '=' + encodeURIComponent(v);\n        };\n        var ns = function(o,i){\n            return (typeof o === 'object' && o ? i : '' )\n        };\n        var build = function (prefix, ob) {\n            if (prefix) {\n                if (Utils.isArray(ob)) {\n                    Utils.forEach(ob,function(v,k){\n                        build(prefix+'['+ns(v,k)+']',v);\n                    })\n                } else if (Utils.isObject(ob)) {\n                    Utils.forEach(ob,function(v,k){\n                        build(prefix+'['+k+']',v);\n                    });\n                } else {\n                    add(prefix,ob);\n                }\n            } else if (Utils.isArray(ob)) {\n                Utils.forEach(ob,function(v){\n                    add(v.name,v.value);\n                });\n            } else {\n                Utils.forEach(ob,function(v,k){\n                    build(k,v);\n                });\n            }\n            return s;\n        };\n        return build('', data).join('&');\n    },\n    'removeElement': function (el) {\n        el.parentNode.removeChild(el);\n    },\n    'createElement': function (el) {\n        return document.createElement(el);\n    },\n    'getStyle': function (el, prop, getComputedStyle) {\n        getComputedStyle = window.getComputedStyle;\n        return (getComputedStyle ? getComputedStyle(el) : el['currentStyle'])[prop.replace(/-(\\w)/gi, function (word, letter) {\n            return letter.toUpperCase()\n        })];\n    },\n    'extend': function (obj) {\n        this.forEach([].slice.call(arguments, 1), function (o) {\n            if (o !== null) {\n                this.forEach(o, function (value, key) {\n                    if (this.isPlainObject(value)) {\n                        obj[key] = this.extend(obj[key] || {}, value);\n                    } else {\n                        obj[key] = value;\n                    }\n                }, this);\n            }\n        }, this);\n        return obj;\n    },\n    'uuid': function(){\n        var a=0,b='';\n        while(a++<36){\n            if( a * 51 & 52 ){\n                b+= ( a ^ 15 ? 8 ^ Math.random() * ( a ^ 20 ? 16 : 4 ) : 4 ).toString(16);\n            } else {\n                b+= '-';\n            }\n        }\n        return b;\n    },\n    'getPath': function(path){\n        var props = path.split('.');\n        var first = props.shift();\n        var value = null;\n        if( this.hasProp(window,first) ) {\n            value = window[first];\n            this.forEach(props,function(name){\n                value = this.hasProp(value,name) ? value[name] : null;\n            },this)\n        }\n        return value;\n    },\n    'stringFormat':function(format,params){\n        return (format || '').replace(/{(.+?)}/g, function(match, prop) {\n            return params[prop] || match;\n        });\n    }\n};\n\nmodule.exports = Utils;\n\n},{}],19:[function(require,module,exports){\nvar Widget = require('./index');\n/**\n * @type {ClassObject}\n * @extends {Widget}\n */\nvar Button = Widget.extend({\n    'attributes': {},\n    'initElement': function (el) {\n        if (this.utils.isPlainObject(this.params.attributes)) {\n            this.utils.extend(this.attributes, this.params.attributes);\n        }\n        this.addSelectorEvent(el, 'click', 'sendRequest');\n    },\n    'getRequestParams': function (el) {\n        return this.utils.extend({}, this.params.options, this.getElementData(el));\n    },\n    'getElementData': function (el) {\n        var result = {};\n        this.utils.forEach(this.attributes, function (value, key) {\n            if (el.hasAttribute(key)) {\n                result[value] = el.getAttribute(key);\n            }\n        });\n        return result;\n    }\n});\n\nmodule.exports = Button;\n\n},{\"./index\":21}],20:[function(require,module,exports){\nvar Module = require('../module');\nvar Widget = require('./index');\n/**\n * @type {ClassObject}\n */\nvar FormData = Module.extend({\n    'init': function (form) {\n        this.setFormElement(form);\n    },\n    'setFormElement': function (form) {\n        if (this.utils.isElement(form)) {\n            this.form = form;\n        }\n    },\n    'getData': function (filter) {\n        var params = this.deparam(this.serializeArray());\n        return filter === true ? this.utils.cleanObject(params) : params;\n    },\n    'serializeArray': function () {\n        var list = this.utils.toArray(this.form.elements);\n        return this.utils.map(list, function (field) {\n            if (field.disabled || field.name === '') return;\n            if (field.type.match('checkbox|radio') && !field.checked) return;\n            return {\n                name: field.name,\n                value: field.value\n            };\n        });\n    },\n    'serializeAndEncode': function () {\n        return this.utils.map(this.serializeArray(), function (field) {\n            return [field.name, encodeURIComponent(field.value)].join('=');\n        }).join('&');\n    },\n    'deparam': function (obj) {\n        var prop;\n        var result = {};\n        var breaker = /[^\\[\\]]+|\\[\\]$/g;\n        var attr = function (name, value) {\n            var i, data = result, last = name.pop(), len = name.length;\n            for (i = 0; i < len; i++) {\n                if (!data[name[i]])\n                    data[name[i]] = len === i + 1 && last === '[]' ? [] : {};\n                data = data[name[i]];\n            }\n            if (last === '[]') {\n                data.push(value);\n            } else {\n                data[last] = value;\n            }\n        };\n        for (prop in obj) {\n            if (obj.hasOwnProperty(prop)) {\n                attr(obj[prop].name.match(breaker), obj[prop].value);\n            }\n        }\n        return result;\n    }\n});\n/**\n * @type {ClassObject}\n * @extends {Widget}\n */\nvar Form = Widget.extend({\n    'initElement': function (el) {\n        this.addSelectorEvent(el, 'submit', 'sendRequest');\n    },\n    'getRequestParams': function (el) {\n        return this.utils.extend({}, this.params.options, new FormData(el).getData() );\n    }\n});\n\nmodule.exports = Form;\n\n},{\"../module\":12,\"./index\":21}],21:[function(require,module,exports){\nvar Api = require('../api');\n/**\n * @type {ClassObject}\n * @extends {Api}\n */\nvar Widget = Api.extend({\n    'init': function (params) {\n        this.initParams(params);\n        this.initWidget();\n    },\n    'initWidget': function () {\n        this.initOptions(this.params.options);\n        if (this.utils.isString(this.params.element)) {\n            this.initElement(this.params.element);\n        }\n    },\n    'initOptions': function () {\n        if (this.utils.isPlainObject(this.params.options)) {\n            this.params.options = this.params.options || {};\n        }\n    },\n    'initElement': function (el) {\n\n    },\n    'addSelectorEvent': function (el, ev, cb) {\n        this.each(this.utils.querySelectorAll(el), function (cx, element) {\n            this.addEvent(element, ev, cb);\n        });\n        return this;\n    },\n    'getRequestParams': function () {\n        return {};\n    },\n    'sendRequest': function (el, ev) {\n        if (ev.defaultPrevented) return;\n        ev.preventDefault();\n        this.trigger('request', this.getRequestParams(el));\n        this.scope(function () {\n            this.request('api.checkout.form', 'request', this.getRequestParams(el))\n                .done(this.proxy('onSuccess'))\n                .fail(this.proxy('onError'))\n                .progress(this.proxy('onProgress'));\n        });\n    },\n    'onProgress': function (cx, model) {\n        this.trigger('progress', model);\n    },\n    'onSuccess': function (cx, model) {\n        model.sendResponse();\n        model.submitToMerchant();\n        this.trigger('success', model);\n    },\n    'onError': function (cx, model) {\n        this.trigger('error', model);\n    }\n});\n\n\nmodule.exports = Widget;\n\n},{\"../api\":2}],22:[function(require,module,exports){\nmodule.exports = Object.create(null)\nmodule.exports['3ds.ejs'] = '<%=include(\\'styles.ejs\\')%>\\n<div class=\"ipsp-modal-wrapper\">\\n    <div class=\"ipsp-modal\">\\n        <div class=\"ipsp-modal-header\">\\n            <a href=\"javascript:void(0)\" class=\"ipsp-modal-close\"></a>\\n            <div class=\"ipsp-modal-title\">\\n                <%-data.messages.modalHeader%>\\n                <a href=\\'javascript:void(0)\\'><%-data.messages.modalLinkLabel%></a>\\n            </div>\\n        </div>\\n        <div class=\"ipsp-modal-content\">\\n            <iframe src=\"about:blank\" class=\"ipsp-modal-iframe\" frameborder=\"0\" allowtransparency=\"true\"></iframe>\\n        </div>\\n    </div>\\n</div>\\n\\n'\nmodule.exports['styles.ejs'] = '<style>\\n    .ipsp-modal{\\n        box-sizing: border-box;\\n        margin:100px auto;\\n        max-width:680px;\\n        background-color:#fff;\\n        border-radius:5px;\\n        box-shadow:0 2px 2px rgba(0,0,0,0.2);\\n        overflow: hidden;\\n    }\\n    @media (max-width:850px){\\n        .ipsp-modal{\\n            margin:50px auto;\\n        }\\n    }\\n    @media (max-width:695px){\\n        .ipsp-modal{\\n            max-width:100%;\\n            margin:5px;\\n        }\\n    }\\n    .ipsp-modal-wrapper{\\n        box-sizing: border-box;\\n        overflow: auto;\\n        position:fixed;\\n        z-index:99999;\\n        left:0;\\n        bottom:0;\\n        top:0;\\n        right:0;\\n        background-color: rgba(0,0,0,0.2);\\n    }\\n    .ipsp-modal-header{\\n        box-sizing: border-box;\\n        background-color:#fafafa;\\n        height:50px;\\n        box-shadow:0 0 2px rgba(0,0,0,0.2);\\n        border-top-left-radius:5px;\\n        border-top-right-radius:5px;\\n    }\\n    .ipsp-modal-close{\\n        box-sizing: border-box;\\n        float:right;\\n        overflow:hidden;\\n        height:50px;\\n        text-decoration:none;\\n        border-top-right-radius:5px;\\n        color:#949494;\\n    }\\n    .ipsp-modal-close:hover,.ipsp-modal-close:focus,.ipsp-modal-close:active{\\n        text-decoration:none;\\n        color:#646464;\\n    }\\n    .ipsp-modal-close:before{\\n        content:\"×\";\\n        font-size:50px;\\n        line-height:50px;\\n        padding:0 10px;\\n    }\\n    .ipsp-modal-title{\\n        box-sizing: border-box;\\n        border-top-left-radius:5px;\\n        line-height:20px;\\n        height:50px;\\n        padding:5px 15px;\\n        font-size:12px;\\n        display:table-cell;\\n        vertical-align: middle;\\n    }\\n    .ipsp-modal-content{\\n        box-sizing: border-box;\\n        border-bottom-left-radius:5px;\\n        min-height:650px;\\n    }\\n    .ipsp-modal-iframe{\\n        overflow-x: hidden;\\n        border: 0;\\n        display: block;\\n        width: 100%;\\n        height: 750px;\\n    }\\n\\n</style>\\n'\nmodule.exports['trustly.ejs'] = '<%=include(\\'styles.ejs\\')%>\\n<div class=\"ipsp-modal-wrapper\">\\n    <div class=\"ipsp-modal\">\\n        <div class=\"ipsp-modal-header\">\\n            <a href=\"#\" class=\"ipsp-modal-close\"></a>\\n            <div class=\"ipsp-modal-title\">\\n                <%-data.messages.modalHeader%>\\n                <a href=\\'javascript:void(0)\\'><%-data.messages.modalLinkLabel%></a>\\n            </div>\\n        </div>\\n        <div class=\"ipsp-modal-content\">\\n            <iframe src=\"about:blank\" class=\"ipsp-modal-iframe\" frameborder=\"0\" allowtransparency=\"true\"></iframe>\\n        </div>\\n    </div>\\n</div>\\n'\n},{}]},{},[1])(1)\n});\n"],"names":["f","exports","module","define","amd","window","global","self","this","$checkout","r","e","n","t","o","i","c","require","u","a","Error","code","p","call","length","1","Component","Api","Module","Connector","Response","PaymentButton","PaymentContainer","FormWidget","ButtonWidget","Utils","Config","add","./core/api","./core/component","./core/config","./core/connector","./core/module","./core/payment/button","./core/payment/container","./core/response","./core/utils","./core/widget/button","./core/widget/form","2","Deferred","Modal","extend","defaults","origin","endpoint","gateway","messages","modalHeader","modalLinkLabel","init","params","initParams","url","type","join","extendParams","utils","setOrigin","loaded","created","isString","scope","callback","proxy","_createFrame","on","request","model","method","defer","data","uid","connector","getUID","action","send","ev","response","setUID","setConnector","attr","_loadFrame","iframe","createElement","addAttr","allowtransparency","frameborder","scrolling","src","addCss","ApiFrameCss","body","querySelector","firstChild","insertBefore","appendChild","target","contentWindow","_onOpenModal","xhr","modal","checkout","_onCloseModal","trigger","_onLoadConnector","off","./config","./connector","./deferred","./modal","./module","./response","3","fnTest","test","toString","ClassObject","assign","instance","prop","proto","parent","prototype","hasOwnProperty","name","result","temp","_super","apply","arguments","superMethod","constructor","fn","cx","cb","concat","Array","slice","Class","4","newModule","modules","get","addModule","5","GooglePayApi","GoogleBaseRequest","apiVersion","apiVersionMinor","allowedPaymentMethods","parameters","allowedAuthMethods","allowedCardNetworks","GooglePayLanguages","PaymentRequestMethods","supportedMethods","PaymentRequestDetails","total","label","amount","currency","value","width","height","left","bottom","position","border","ButtonFrameCss","margin","padding","display","min-width","background","opacity","overflow","outline","z-index","ButtonFrameAttrs","tabindex","allowpaymentrequest","ButtonCoverCss","top","cursor","ButtonCoverAttrs","href","ButtonContainerCss","ButtonDefaultColor","ButtonColorMap","dark","light","black","white","ButtonLabelMap","ar","bg","ca","zh","hr","cs","da","nl","en","et","es","el","fi","fr","de","id","it","ja","ko","ms","no","pl","pt","ru","sr","sk","sl","sv","th","tr","uk","6","ns","uniqueId","signature","setTarget","create","addEvent","destroy","removeEvent","router","source","JSON","parse","postMessage","stringify","console","log","7","forEach","list","context","isArray","status","doneFuncs","failFuncs","progressFuncs","resultArgs","promise","done","push","fail","always","progress","then","object","state","isPending","isRejected","isResolved","obj","resolveWith","args","rejectWith","notifyWith","resetState","resolve","reject","notify","isFunction","./utils","8","Event","events","empty","splice","j","./class","9","config","GooglePay","client","wrapper","load","getPath","script","async","isElement","show","methods","find","item","getClient","environment","loadPaymentData","readyToPay","onError","error","onLoadSuccess","isReadyToPay","catch","onLoadError","options","PaymentClient","../config","../deferred","../module","10","Template","template","initModal","initConnector","getRandomNumber","innerHTML","render","form","prepareForm","initScrollbar","submit","measureScrollbar","scrollDiv","document","className","offsetWidth","clientWidth","removeElement","checkScrollbar","documentElementRect","fullWindowWidth","innerWidth","documentElement","getBoundingClientRect","right","Math","abs","bodyIsOverflowing","scrollbarWidth","bodyPad","parseInt","getStyle","originalBodyPad","style","paddingRight","originalOverflow","resetScrollbar","round","random","selector","closeModal","preventDefault","removeModal","submitForm","onResponse","sendResponse","./template","11","Model","eachProps","alt","each","props","filter","key","split","pop","len","undefined","serialize","12","getListener","_listener_","_proxy_cache_","ob","v","k","setAttribute","addCssProperty","idx","cssText","match","RegExp","replace","index","indexOf","substring","addEventListener","removeEventListener","./event","13","Request","Button","button","mode","color","initElement","initEvents","initApi","initFrame","initPaymentRequest","supported","api","endpointUrl","element","container","cover","sendButtonEvent","payment","setApi","setMerchant","merchant_id","getSupportedMethod","frameLoaded","frame","onFrameLoaded","update","onFallback","fallback","onSupported","getConfigParams","isPlainObject","sendOptions","sendConfig","supportedMethod","setConfig","process","validate","validateCallback","validationProgress","click","onClick","cssUnit","unit","String","onToken","onSuccess","onReload","onShow","transition","onHide","onLog","event","onPay","pay","../api","../connector","../response","./request","14","Container","lang","embedded","css","getGoogleLangSupport","getButtonColor","getGoogleSvg","format","stringFormat","getAppleSvg","getAppleLabel","addFrameImage","query","buttonColor","browserLocale","buttonSizeMode","param","classList","remove","styleButton","image","setProperty","contains","payment_system","15","getPaymentRequest","details","uuid","PaymentRequest","merchant","isValidConfig","callee","canMakePayment","modelRequest","failure","getRequest","complete","message","location","reload","appleSession","merchantValidation","domain","session","../google/pay","../utils","16","ProxyUrl","string","that","formDataProxy","formDataSubmit","parentNode","removeChild","inProgress","readyToSubmit","waitForResponse","needVerifyCode","redirectUrl","redirectToUrl","submitToMerchant","ready","prepare3dsData","token","TermUrl","waitOn3dsDecline","js_wait_on_3ds_decline","js_wait_on_3ds_decline_duration","submit3dsForm","./model","17","escapeExpr","entityRe","htmlEntities","Views","settings","evaluate","interpolate","escape","noMatch","escapes","'","\\","\r","\n","\t"," "," ","escaper","&","<",">","\"","counter","view","output","text","matcher","offset","Function","include","../views","18","getType","toLowerCase","isObject","Object","isRegexp","isArguments","isError","isDate","isNumber","nodeType","toArray","querySelectorAll","hasProp","map","cleanObject","s","encodeURIComponent","build","prefix","getComputedStyle","word","letter","toUpperCase","b","path","first","shift","19","attributes","addSelectorEvent","getRequestParams","getElementData","hasAttribute","getAttribute","./index","20","Widget","FormData","setFormElement","getData","deparam","serializeArray","elements","field","disabled","checked","serializeAndEncode","breaker","last","Form","21","initWidget","initOptions","sendRequest","defaultPrevented","onProgress","22"],"mappings":"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"}